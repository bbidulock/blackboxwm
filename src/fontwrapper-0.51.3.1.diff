--- blackbox-0.51.3.orig/aclocal.m4
+++ blackbox-0.51.3/aclocal.m4
@@ -102,6 +102,390 @@
 fi
 AC_SUBST($1)])
 
+# Macro to add for using GNU gettext.
+# Ulrich Drepper <drepper@cygnus.com>, 1995.
+#
+# This file can be copied and used freely without restrictions.  It can
+# be used in projects which are not available under the GNU Public License
+# but which still want to provide support for the GNU gettext functionality.
+# Please note that the actual code is *not* freely available.
+
+# serial 5
+
+AC_DEFUN(AM_WITH_NLS,
+  [AC_MSG_CHECKING([whether NLS is requested])
+    dnl Default is enabled NLS
+    AC_ARG_ENABLE(nls,
+      [  --disable-nls           do not use Native Language Support],
+      USE_NLS=$enableval, USE_NLS=yes)
+    AC_MSG_RESULT($USE_NLS)
+    AC_SUBST(USE_NLS)
+
+    USE_INCLUDED_LIBINTL=no
+
+    dnl If we use NLS figure out what method
+    if test "$USE_NLS" = "yes"; then
+      AC_DEFINE(ENABLE_NLS)
+      AC_MSG_CHECKING([whether included gettext is requested])
+      AC_ARG_WITH(included-gettext,
+        [  --with-included-gettext use the GNU gettext library included here],
+        nls_cv_force_use_gnu_gettext=$withval,
+        nls_cv_force_use_gnu_gettext=no)
+      AC_MSG_RESULT($nls_cv_force_use_gnu_gettext)
+
+      nls_cv_use_gnu_gettext="$nls_cv_force_use_gnu_gettext"
+      if test "$nls_cv_force_use_gnu_gettext" != "yes"; then
+        dnl User does not insist on using GNU NLS library.  Figure out what
+        dnl to use.  If gettext or catgets are available (in this order) we
+        dnl use this.  Else we have to fall back to GNU NLS library.
+	dnl catgets is only used if permitted by option --with-catgets.
+	nls_cv_header_intl=
+	nls_cv_header_libgt=
+	CATOBJEXT=NONE
+
+	AC_CHECK_HEADER(libintl.h,
+	  [AC_CACHE_CHECK([for gettext in libc], gt_cv_func_gettext_libc,
+	    [AC_TRY_LINK([#include <libintl.h>], [return (int) gettext ("")],
+	       gt_cv_func_gettext_libc=yes, gt_cv_func_gettext_libc=no)])
+
+	   if test "$gt_cv_func_gettext_libc" != "yes"; then
+	     AC_CHECK_LIB(intl, bindtextdomain,
+	       [AC_CACHE_CHECK([for gettext in libintl],
+		 gt_cv_func_gettext_libintl,
+		 [AC_CHECK_LIB(intl, gettext,
+		  gt_cv_func_gettext_libintl=yes,
+		  gt_cv_func_gettext_libintl=no)],
+		 gt_cv_func_gettext_libintl=no)])
+	   fi
+
+	   if test "$gt_cv_func_gettext_libc" = "yes" \
+	      || test "$gt_cv_func_gettext_libintl" = "yes"; then
+	      AC_DEFINE(HAVE_GETTEXT)
+	      AM_PATH_PROG_WITH_TEST(MSGFMT, msgfmt,
+		[test -z "`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`"], no)dnl
+	      if test "$MSGFMT" != "no"; then
+		AC_CHECK_FUNCS(dcgettext)
+		AC_PATH_PROG(GMSGFMT, gmsgfmt, $MSGFMT)
+		AM_PATH_PROG_WITH_TEST(XGETTEXT, xgettext,
+		  [test -z "`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`"], :)
+		AC_TRY_LINK(, [extern int _nl_msg_cat_cntr;
+			       return _nl_msg_cat_cntr],
+		  [CATOBJEXT=.gmo
+		   DATADIRNAME=share],
+		  [CATOBJEXT=.mo
+		   DATADIRNAME=lib])
+		INSTOBJEXT=.mo
+	      fi
+	    fi
+	])
+
+        if test "$CATOBJEXT" = "NONE"; then
+	  AC_MSG_CHECKING([whether catgets can be used])
+	  AC_ARG_WITH(catgets,
+	    [  --with-catgets          use catgets functions if available],
+	    nls_cv_use_catgets=$withval, nls_cv_use_catgets=no)
+	  AC_MSG_RESULT($nls_cv_use_catgets)
+
+	  if test "$nls_cv_use_catgets" = "yes"; then
+	    dnl No gettext in C library.  Try catgets next.
+	    AC_CHECK_LIB(i, main)
+	    AC_CHECK_FUNC(catgets,
+	      [AC_DEFINE(HAVE_CATGETS)
+	       INTLOBJS="\$(CATOBJS)"
+	       AC_PATH_PROG(GENCAT, gencat, no)dnl
+	       if test "$GENCAT" != "no"; then
+		 AC_PATH_PROG(GMSGFMT, gmsgfmt, no)
+		 if test "$GMSGFMT" = "no"; then
+		   AM_PATH_PROG_WITH_TEST(GMSGFMT, msgfmt,
+		    [test -z "`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`"], no)
+		 fi
+		 AM_PATH_PROG_WITH_TEST(XGETTEXT, xgettext,
+		   [test -z "`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`"], :)
+		 USE_INCLUDED_LIBINTL=yes
+		 CATOBJEXT=.cat
+		 INSTOBJEXT=.cat
+		 DATADIRNAME=lib
+		 INTLDEPS='$(top_builddir)/intl/libintl.a'
+		 INTLLIBS=$INTLDEPS
+		 LIBS=`echo $LIBS | sed -e 's/-lintl//'`
+		 nls_cv_header_intl=intl/libintl.h
+		 nls_cv_header_libgt=intl/libgettext.h
+	       fi])
+	  fi
+        fi
+
+        if test "$CATOBJEXT" = "NONE"; then
+	  dnl Neither gettext nor catgets in included in the C library.
+	  dnl Fall back on GNU gettext library.
+	  nls_cv_use_gnu_gettext=yes
+        fi
+      fi
+
+      if test "$nls_cv_use_gnu_gettext" = "yes"; then
+        dnl Mark actions used to generate GNU NLS library.
+        INTLOBJS="\$(GETTOBJS)"
+        AM_PATH_PROG_WITH_TEST(MSGFMT, msgfmt,
+	  [test -z "`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`"], msgfmt)
+        AC_PATH_PROG(GMSGFMT, gmsgfmt, $MSGFMT)
+        AM_PATH_PROG_WITH_TEST(XGETTEXT, xgettext,
+	  [test -z "`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`"], :)
+        AC_SUBST(MSGFMT)
+	USE_INCLUDED_LIBINTL=yes
+        CATOBJEXT=.gmo
+        INSTOBJEXT=.mo
+        DATADIRNAME=share
+	INTLDEPS='$(top_builddir)/intl/libintl.a'
+	INTLLIBS=$INTLDEPS
+	LIBS=`echo $LIBS | sed -e 's/-lintl//'`
+        nls_cv_header_intl=intl/libintl.h
+        nls_cv_header_libgt=intl/libgettext.h
+      fi
+
+      dnl Test whether we really found GNU xgettext.
+      if test "$XGETTEXT" != ":"; then
+	dnl If it is no GNU xgettext we define it as : so that the
+	dnl Makefiles still can work.
+	if $XGETTEXT --omit-header /dev/null 2> /dev/null; then
+	  : ;
+	else
+	  AC_MSG_RESULT(
+	    [found xgettext program is not GNU xgettext; ignore it])
+	  XGETTEXT=":"
+	fi
+      fi
+
+      # We need to process the po/ directory.
+      POSUB=po
+    else
+      DATADIRNAME=share
+      nls_cv_header_intl=intl/libintl.h
+      nls_cv_header_libgt=intl/libgettext.h
+    fi
+    AC_LINK_FILES($nls_cv_header_libgt, $nls_cv_header_intl)
+    AC_OUTPUT_COMMANDS(
+     [case "$CONFIG_FILES" in *po/Makefile.in*)
+        sed -e "/POTFILES =/r po/POTFILES" po/Makefile.in > po/Makefile
+      esac])
+
+
+    # If this is used in GNU gettext we have to set USE_NLS to `yes'
+    # because some of the sources are only built for this goal.
+    if test "$PACKAGE" = gettext; then
+      USE_NLS=yes
+      USE_INCLUDED_LIBINTL=yes
+    fi
+
+    dnl These rules are solely for the distribution goal.  While doing this
+    dnl we only have to keep exactly one list of the available catalogs
+    dnl in configure.in.
+    for lang in $ALL_LINGUAS; do
+      GMOFILES="$GMOFILES $lang.gmo"
+      POFILES="$POFILES $lang.po"
+    done
+
+    dnl Make all variables we use known to autoconf.
+    AC_SUBST(USE_INCLUDED_LIBINTL)
+    AC_SUBST(CATALOGS)
+    AC_SUBST(CATOBJEXT)
+    AC_SUBST(DATADIRNAME)
+    AC_SUBST(GMOFILES)
+    AC_SUBST(INSTOBJEXT)
+    AC_SUBST(INTLDEPS)
+    AC_SUBST(INTLLIBS)
+    AC_SUBST(INTLOBJS)
+    AC_SUBST(POFILES)
+    AC_SUBST(POSUB)
+  ])
+
+AC_DEFUN(AM_GNU_GETTEXT,
+  [AC_REQUIRE([AC_PROG_MAKE_SET])dnl
+   AC_REQUIRE([AC_PROG_CC])dnl
+   AC_REQUIRE([AC_PROG_RANLIB])dnl
+   AC_REQUIRE([AC_ISC_POSIX])dnl
+   AC_REQUIRE([AC_HEADER_STDC])dnl
+   AC_REQUIRE([AC_C_CONST])dnl
+   AC_REQUIRE([AC_C_INLINE])dnl
+   AC_REQUIRE([AC_TYPE_OFF_T])dnl
+   AC_REQUIRE([AC_TYPE_SIZE_T])dnl
+   AC_REQUIRE([AC_FUNC_ALLOCA])dnl
+   AC_REQUIRE([AC_FUNC_MMAP])dnl
+
+   AC_CHECK_HEADERS([argz.h limits.h locale.h nl_types.h malloc.h string.h \
+unistd.h sys/param.h])
+   AC_CHECK_FUNCS([getcwd munmap putenv setenv setlocale strchr strcasecmp \
+strdup __argz_count __argz_stringify __argz_next])
+
+   if test "${ac_cv_func_stpcpy+set}" != "set"; then
+     AC_CHECK_FUNCS(stpcpy)
+   fi
+   if test "${ac_cv_func_stpcpy}" = "yes"; then
+     AC_DEFINE(HAVE_STPCPY)
+   fi
+
+   AM_LC_MESSAGES
+   AM_WITH_NLS
+
+   if test "x$CATOBJEXT" != "x"; then
+     if test "x$ALL_LINGUAS" = "x"; then
+       LINGUAS=
+     else
+       AC_MSG_CHECKING(for catalogs to be installed)
+       NEW_LINGUAS=
+       for lang in ${LINGUAS=$ALL_LINGUAS}; do
+         case "$ALL_LINGUAS" in
+          *$lang*) NEW_LINGUAS="$NEW_LINGUAS $lang" ;;
+         esac
+       done
+       LINGUAS=$NEW_LINGUAS
+       AC_MSG_RESULT($LINGUAS)
+     fi
+
+     dnl Construct list of names of catalog files to be constructed.
+     if test -n "$LINGUAS"; then
+       for lang in $LINGUAS; do CATALOGS="$CATALOGS $lang$CATOBJEXT"; done
+     fi
+   fi
+
+   dnl The reference to <locale.h> in the installed <libintl.h> file
+   dnl must be resolved because we cannot expect the users of this
+   dnl to define HAVE_LOCALE_H.
+   if test $ac_cv_header_locale_h = yes; then
+     INCLUDE_LOCALE_H="#include <locale.h>"
+   else
+     INCLUDE_LOCALE_H="\
+/* The system does not provide the header <locale.h>.  Take care yourself.  */"
+   fi
+   AC_SUBST(INCLUDE_LOCALE_H)
+
+   dnl Determine which catalog format we have (if any is needed)
+   dnl For now we know about two different formats:
+   dnl   Linux libc-5 and the normal X/Open format
+   test -d intl || mkdir intl
+   if test "$CATOBJEXT" = ".cat"; then
+     AC_CHECK_HEADER(linux/version.h, msgformat=linux, msgformat=xopen)
+
+     dnl Transform the SED scripts while copying because some dumb SEDs
+     dnl cannot handle comments.
+     sed -e '/^#/d' $srcdir/intl/$msgformat-msg.sed > intl/po2msg.sed
+   fi
+   dnl po2tbl.sed is always needed.
+   sed -e '/^#.*[^\\]$/d' -e '/^#$/d' \
+     $srcdir/intl/po2tbl.sed.in > intl/po2tbl.sed
+
+   dnl In the intl/Makefile.in we have a special dependency which makes
+   dnl only sense for gettext.  We comment this out for non-gettext
+   dnl packages.
+   if test "$PACKAGE" = "gettext"; then
+     GT_NO="#NO#"
+     GT_YES=
+   else
+     GT_NO=
+     GT_YES="#YES#"
+   fi
+   AC_SUBST(GT_NO)
+   AC_SUBST(GT_YES)
+
+   dnl If the AC_CONFIG_AUX_DIR macro for autoconf is used we possibly
+   dnl find the mkinstalldirs script in another subdir but ($top_srcdir).
+   dnl Try to locate is.
+   MKINSTALLDIRS=
+   if test -n "$ac_aux_dir"; then
+     MKINSTALLDIRS="$ac_aux_dir/mkinstalldirs"
+   fi
+   if test -z "$MKINSTALLDIRS"; then
+     MKINSTALLDIRS="\$(top_srcdir)/mkinstalldirs"
+   fi
+   AC_SUBST(MKINSTALLDIRS)
+
+   dnl *** For now the libtool support in intl/Makefile is not for real.
+   l=
+   AC_SUBST(l)
+
+   dnl Generate list of files to be processed by xgettext which will
+   dnl be included in po/Makefile.
+   test -d po || mkdir po
+   if test "x$srcdir" != "x."; then
+     if test "x`echo $srcdir | sed 's@/.*@@'`" = "x"; then
+       posrcprefix="$srcdir/"
+     else
+       posrcprefix="../$srcdir/"
+     fi
+   else
+     posrcprefix="../"
+   fi
+   rm -f po/POTFILES
+   sed -e "/^#/d" -e "/^\$/d" -e "s,.*,	$posrcprefix& \\\\," -e "\$s/\(.*\) \\\\/\1/" \
+	< $srcdir/po/POTFILES.in > po/POTFILES
+  ])
+
+# Search path for a program which passes the given test.
+# Ulrich Drepper <drepper@cygnus.com>, 1996.
+#
+# This file can be copied and used freely without restrictions.  It can
+# be used in projects which are not available under the GNU Public License
+# but which still want to provide support for the GNU gettext functionality.
+# Please note that the actual code is *not* freely available.
+
+# serial 1
+
+dnl AM_PATH_PROG_WITH_TEST(VARIABLE, PROG-TO-CHECK-FOR,
+dnl   TEST-PERFORMED-ON-FOUND_PROGRAM [, VALUE-IF-NOT-FOUND [, PATH]])
+AC_DEFUN(AM_PATH_PROG_WITH_TEST,
+[# Extract the first word of "$2", so it can be a program name with args.
+set dummy $2; ac_word=[$]2
+AC_MSG_CHECKING([for $ac_word])
+AC_CACHE_VAL(ac_cv_path_$1,
+[case "[$]$1" in
+  /*)
+  ac_cv_path_$1="[$]$1" # Let the user override the test with a path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
+  for ac_dir in ifelse([$5], , $PATH, [$5]); do
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      if [$3]; then
+	ac_cv_path_$1="$ac_dir/$ac_word"
+	break
+      fi
+    fi
+  done
+  IFS="$ac_save_ifs"
+dnl If no 4th arg is given, leave the cache variable unset,
+dnl so AC_PATH_PROGS will keep looking.
+ifelse([$4], , , [  test -z "[$]ac_cv_path_$1" && ac_cv_path_$1="$4"
+])dnl
+  ;;
+esac])dnl
+$1="$ac_cv_path_$1"
+if test -n "[$]$1"; then
+  AC_MSG_RESULT([$]$1)
+else
+  AC_MSG_RESULT(no)
+fi
+AC_SUBST($1)dnl
+])
+
+# Check whether LC_MESSAGES is available in <locale.h>.
+# Ulrich Drepper <drepper@cygnus.com>, 1995.
+#
+# This file can be copied and used freely without restrictions.  It can
+# be used in projects which are not available under the GNU Public License
+# but which still want to provide support for the GNU gettext functionality.
+# Please note that the actual code is *not* freely available.
+
+# serial 1
+
+AC_DEFUN(AM_LC_MESSAGES,
+  [if test $ac_cv_header_locale_h = yes; then
+    AC_CACHE_CHECK([for LC_MESSAGES], am_cv_val_LC_MESSAGES,
+      [AC_TRY_LINK([#include <locale.h>], [return LC_MESSAGES],
+       am_cv_val_LC_MESSAGES=yes, am_cv_val_LC_MESSAGES=no)])
+    if test $am_cv_val_LC_MESSAGES = yes; then
+      AC_DEFINE(HAVE_LC_MESSAGES)
+    fi
+  fi])
+
 # Add --enable-maintainer-mode option to configure.
 # From Jim Meyering
 
--- blackbox-0.51.3.orig/config.h.in
+++ blackbox-0.51.3/config.h.in
@@ -7,33 +7,132 @@
 #undef _ALL_SOURCE
 #endif
 
+/* Define if using alloca.c.  */
+#undef C_ALLOCA
+
+/* Define to empty if the keyword does not work.  */
+#undef const
+
+/* Define to one of _getb67, GETB67, getb67 for Cray-2 and Cray-YMP systems.
+   This function is required for alloca.c support on those systems.  */
+#undef CRAY_STACKSEG_END
+
+/* Define to 1 if NLS is requested. */
+#undef ENABLE_NLS
+
+/* Define if you have alloca, as a function or macro.  */
+#undef HAVE_ALLOCA
+
+/* Define if you have <alloca.h> and it should be used (not on Ultrix).  */
+#undef HAVE_ALLOCA_H
+
+/* Define as 1 if you have catgets and don't want to use GNU gettext */
+#undef HAVE_CATGETS
+
+/* Define as 1 if you have gettext and don't want to use GNU gettext. */
+#undef HAVE_GETTEXT
+
+/* Define if your locale.h file contains LC_MESSAGES.  */
+#undef HAVE_LC_MESSAGES
+
+/* Define if you have a working `mmap' system call.  */
+#undef HAVE_MMAP
+
+#undef HAVE_STPCPY
+
+/* Define as __inline if that's what the C compiler calls it.  */
+#undef inline
+
+/* Define to `long' if <sys/types.h> doesn't define.  */
+#undef off_t
+
+/* Define to the name of the distribution. */
+#undef PACKAGE
+
 /* Define if you need to in order for stat and other things to work.  */
 #undef _POSIX_SOURCE
 
 /* Define as the return type of signal handlers (int or void).  */
 #undef RETSIGTYPE
 
+/* Define to `unsigned' if <sys/types.h> doesn't define.  */
+#undef size_t
+
+/* If using the C implementation of alloca, define if you know the
+   direction of stack growth for your system; otherwise it will be
+   automatically deduced at run-time.
+ STACK_DIRECTION > 0 => grows toward higher addresses
+ STACK_DIRECTION < 0 => grows toward lower addresses
+ STACK_DIRECTION = 0 => direction of growth unknown
+ */
+#undef STACK_DIRECTION
+
 /* Define if you have the ANSI C header files.  */
 #undef STDC_HEADERS
 
 /* Define if you can safely include both <sys/time.h> and <time.h>.  */
 #undef TIME_WITH_SYS_TIME
 
+/* Define to the version of the distribution. */
+#undef VERSION
+
 /* Define if the X Window System is missing or not being used.  */
 #undef X_DISPLAY_MISSING
 
+/* Define if you have the __argz_count function.  */
+#undef HAVE___ARGZ_COUNT
+
+/* Define if you have the __argz_next function.  */
+#undef HAVE___ARGZ_NEXT
+
+/* Define if you have the __argz_stringify function.  */
+#undef HAVE___ARGZ_STRINGIFY
+
 /* Define if you have the basename function.  */
 #undef HAVE_BASENAME
 
+/* Define if you have the dcgettext function.  */
+#undef HAVE_DCGETTEXT
+
+/* Define if you have the getcwd function.  */
+#undef HAVE_GETCWD
+
+/* Define if you have the getpagesize function.  */
+#undef HAVE_GETPAGESIZE
+
+/* Define if you have the munmap function.  */
+#undef HAVE_MUNMAP
+
+/* Define if you have the putenv function.  */
+#undef HAVE_PUTENV
+
+/* Define if you have the setenv function.  */
+#undef HAVE_SETENV
+
 /* Define if you have the setlocale function.  */
 #undef HAVE_SETLOCALE
 
 /* Define if you have the sigaction function.  */
 #undef HAVE_SIGACTION
 
+/* Define if you have the stpcpy function.  */
+#undef HAVE_STPCPY
+
+/* Define if you have the strcasecmp function.  */
+#undef HAVE_STRCASECMP
+
+/* Define if you have the strchr function.  */
+#undef HAVE_STRCHR
+
+/* Define if you have the strdup function.  */
+#undef HAVE_STRDUP
+
 /* Define if you have the strftime function.  */
 #undef HAVE_STRFTIME
 
+/* Define if you have the <argz.h> header file.  */
+#undef HAVE_ARGZ_H
+
 /* Define if you have the <dirent.h> header file.  */
 #undef HAVE_DIRENT_H
 
@@ -43,9 +142,18 @@
 /* Define if you have the <libgen.h> header file.  */
 #undef HAVE_LIBGEN_H
 
+/* Define if you have the <limits.h> header file.  */
+#undef HAVE_LIMITS_H
+
 /* Define if you have the <locale.h> header file.  */
 #undef HAVE_LOCALE_H
 
+/* Define if you have the <malloc.h> header file.  */
+#undef HAVE_MALLOC_H
+
+/* Define if you have the <nl_types.h> header file.  */
+#undef HAVE_NL_TYPES_H
+
 /* Define if you have the <process.h> header file.  */
 #undef HAVE_PROCESS_H
 
@@ -55,6 +163,9 @@
 /* Define if you have the <stdio.h> header file.  */
 #undef HAVE_STDIO_H
 
+/* Define if you have the <string.h> header file.  */
+#undef HAVE_STRING_H
+
 /* Define if you have the <sys/param.h> header file.  */
 #undef HAVE_SYS_PARAM_H
 
@@ -81,3 +192,6 @@
 
 /* Define if you have the <unistd.h> header file.  */
 #undef HAVE_UNISTD_H
+
+/* Define if you have the i library (-li).  */
+#undef HAVE_LIBI
--- blackbox-0.51.3.orig/configure.in
+++ blackbox-0.51.3/configure.in
@@ -20,7 +20,13 @@
 
 dnl Initialize autoconf and automake
 AC_INIT(src/blackbox.cc)
-AM_INIT_AUTOMAKE(Blackbox,0.51.3,no-define)
+AM_INIT_AUTOMAKE(blackbox,0.51.3,no-define)
+PACKAGE="blackbox"
+VERSION=0.51.3
+AC_DEFINE_UNQUOTED(PACKAGE, "$PACKAGE")
+AC_DEFINE_UNQUOTED(VERSION, "$VERSION")
+AC_SUBST(PACKAGE)
+AC_SUBST(VERSION)
 
 dnl Determine default prefix
 test x$prefix = "xNONE" && prefix="$ac_default_prefix"
@@ -39,6 +45,9 @@
   AC_MSG_ERROR([error. sed is required to build the default menu file.])
 fi
 
+ALL_LINGUAS="ja"
+AM_GNU_GETTEXT
+
 dnl Check for system header files
 AC_HEADER_STDC
 AC_CHECK_HEADERS(dirent.h fcntl.h libgen.h locale.h process.h signal.h stdio.h time.h unistd.h sys/param.h sys/select.h sys/signal.h sys/stat.h sys/time.h sys/types.h sys/wait.h)
@@ -167,6 +176,6 @@
 
 dnl Output files
 AM_CONFIG_HEADER(config.h)
-AC_OUTPUT(Makefile src/Makefile util/Makefile data/Makefile data/styles/Makefile version.h)
+AC_OUTPUT(Makefile src/Makefile util/Makefile data/Makefile intl/Makefile data/styles/Makefile po/Makefile.in version.h )
 
 
--- blackbox-0.51.3.orig/data/Makefile.in
+++ blackbox-0.51.3/data/Makefile.in
@@ -77,22 +77,43 @@
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
+CATALOGS = @CATALOGS@
+CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CXX = @CXX@
+DATADIRNAME = @DATADIRNAME@
+GENCAT = @GENCAT@
+GMOFILES = @GMOFILES@
+GMSGFMT = @GMSGFMT@
+GT_NO = @GT_NO@
+GT_YES = @GT_YES@
+INCLUDE_LOCALE_H = @INCLUDE_LOCALE_H@
+INSTOBJEXT = @INSTOBJEXT@
 INTERLACE = @INTERLACE@
+INTLDEPS = @INTLDEPS@
+INTLLIBS = @INTLLIBS@
+INTLOBJS = @INTLOBJS@
 KDE = @KDE@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
+MKINSTALLDIRS = @MKINSTALLDIRS@
+MSGFMT = @MSGFMT@
 PACKAGE = @PACKAGE@
+POFILES = @POFILES@
+POSUB = @POSUB@
+RANLIB = @RANLIB@
 SHAPE = @SHAPE@
 SLIT = @SLIT@
+USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
+USE_NLS = @USE_NLS@
 VERSION = @VERSION@
+l = @l@
 regex_cmd = @regex_cmd@
 
 SUBDIRS = styles
-CLEANFILES = menu
+CLEANFILES = menu menu.ja
 MAINTAINERCLEANFILES = Makefile.in
-pkgdata_DATA = menu
+pkgdata_DATA = menu menu.ja
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = ../config.h
 CONFIG_CLEAN_FILES = 
@@ -108,9 +129,9 @@
 all: all-redirect
 .SUFFIXES:
 $(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
-	cd $(top_srcdir) && $(AUTOMAKE) --gnu --include-deps data/Makefile
+	cd $(top_srcdir) && $(AUTOMAKE) --gnu data/Makefile
 
-Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
+Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status $(BUILT_SOURCES)
 	cd $(top_builddir) \
 	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
 
@@ -228,10 +249,15 @@
 subdir = data
 
 distdir: $(DISTFILES)
+	here=`cd $(top_builddir) && pwd`; \
+	top_distdir=`cd $(top_distdir) && pwd`; \
+	distdir=`cd $(distdir) && pwd`; \
+	cd $(top_srcdir) \
+	  && $(AUTOMAKE) --include-deps --build-dir=$$here --srcdir-name=$(top_srcdir) --output-dir=$$top_distdir --gnu data/Makefile
 	@for file in $(DISTFILES); do \
 	  d=$(srcdir); \
 	  if test -d $$d/$$file; then \
-	    cp -pr $$/$$file $(distdir)/$$file; \
+	    cp -pr $$d/$$file $(distdir)/$$file; \
 	  else \
 	    test -f $(distdir)/$$file \
 	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
@@ -327,6 +353,9 @@
 
 menu: menu.in
 	@regex_cmd@ -e "s,@pkgdatadir@,$(pkgdatadir)," menu.in > menu
+
+menu.ja: menu.ja.in
+	@regex_cmd@ -e "s,@pkgdatadir@,$(pkgdatadir)," menu.ja.in > menu.ja
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
--- blackbox-0.51.3.orig/data/styles/Makefile.in
+++ blackbox-0.51.3/data/styles/Makefile.in
@@ -77,16 +77,37 @@
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
+CATALOGS = @CATALOGS@
+CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CXX = @CXX@
+DATADIRNAME = @DATADIRNAME@
+GENCAT = @GENCAT@
+GMOFILES = @GMOFILES@
+GMSGFMT = @GMSGFMT@
+GT_NO = @GT_NO@
+GT_YES = @GT_YES@
+INCLUDE_LOCALE_H = @INCLUDE_LOCALE_H@
+INSTOBJEXT = @INSTOBJEXT@
 INTERLACE = @INTERLACE@
+INTLDEPS = @INTLDEPS@
+INTLLIBS = @INTLLIBS@
+INTLOBJS = @INTLOBJS@
 KDE = @KDE@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
+MKINSTALLDIRS = @MKINSTALLDIRS@
+MSGFMT = @MSGFMT@
 PACKAGE = @PACKAGE@
+POFILES = @POFILES@
+POSUB = @POSUB@
+RANLIB = @RANLIB@
 SHAPE = @SHAPE@
 SLIT = @SLIT@
+USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
+USE_NLS = @USE_NLS@
 VERSION = @VERSION@
+l = @l@
 regex_cmd = @regex_cmd@
 
 styledir = $(pkgdatadir)/styles
@@ -108,9 +129,9 @@
 all: all-redirect
 .SUFFIXES:
 $(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
-	cd $(top_srcdir) && $(AUTOMAKE) --gnu --include-deps data/styles/Makefile
+	cd $(top_srcdir) && $(AUTOMAKE) --gnu data/styles/Makefile
 
-Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
+Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status $(BUILT_SOURCES)
 	cd $(top_builddir) \
 	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
 
@@ -142,10 +163,15 @@
 subdir = data/styles
 
 distdir: $(DISTFILES)
+	here=`cd $(top_builddir) && pwd`; \
+	top_distdir=`cd $(top_distdir) && pwd`; \
+	distdir=`cd $(distdir) && pwd`; \
+	cd $(top_srcdir) \
+	  && $(AUTOMAKE) --include-deps --build-dir=$$here --srcdir-name=$(top_srcdir) --output-dir=$$top_distdir --gnu data/styles/Makefile
 	@for file in $(DISTFILES); do \
 	  d=$(srcdir); \
 	  if test -d $$d/$$file; then \
-	    cp -pr $$/$$file $(distdir)/$$file; \
+	    cp -pr $$d/$$file $(distdir)/$$file; \
 	  else \
 	    test -f $(distdir)/$$file \
 	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
--- blackbox-0.51.3.orig/data/Makefile.am
+++ blackbox-0.51.3/data/Makefile.am
@@ -19,9 +19,9 @@
 #
 
 SUBDIRS = styles
-CLEANFILES = menu
+CLEANFILES = menu menu.ja
 MAINTAINERCLEANFILES = Makefile.in
-pkgdata_DATA = menu
+pkgdata_DATA = menu menu.ja
 
 distclean-local:
 	rm -f *\~
@@ -31,3 +31,5 @@
 menu: menu.in
 	@regex_cmd@ -e "s,@pkgdatadir@,$(pkgdatadir)," menu.in > menu
 
+menu.ja: menu.ja.in
+	@regex_cmd@ -e "s,@pkgdatadir@,$(pkgdatadir)," menu.ja.in > menu.ja
--- blackbox-0.51.3.orig/data/menu.ja.in
+++ blackbox-0.51.3/data/menu.ja.in
@@ -0,0 +1,97 @@
+# これはBlackbox(0.33.0以上)の標準メニューファイルです
+# 
+# 行頭が"#"で始まると注釈と見なされます.
+#
+# 新しい文法は従来のXリソースフォーマットにくらべ簡単です.
+# メニューアイテムは2〜3の要素で構成されます:
+#
+#	[command]  (label)  {data}
+#
+# [command]は以下の内から一つ指定します:
+#
+# [begin] [end] [exec] [exit] [reconfig] [restart] [submenu] [style] [include]
+#
+# [begin] は最上レベルメニューに使われます.
+# [submenu] はサブメニューに使われます.
+# [end] は[begin]と[submenu]に対し パーサーをファイルから読み込むのを
+#   中断するのに使います.
+#
+# [exec] (label) {string}
+# プログラムを実行するアイテムを挿入します.
+#
+# [exit] (label)
+# ウィンドウマネージャを終了するアイテムを挿入します.
+#
+# [reconfig] (label) {string}
+# blackboxに対し設定ファイルを再読み込みさせるメニューを挿入します.
+#  {string}はオプションです。指定すると、再設定の処理前に /bin/sh -cに
+#  よって{string}を実行します.
+#  (これは複数の設定ファイルを書き込んでそれらをスイッチするのに役に
+#  立ちます)
+#
+# [restart] (label) {string}
+# ウィンドウマネージャを再起動するアイテムを挿入します. {string} はオプショ
+#  ンです. 省略すると blackbox自身が再起動します.  {string}が指定すると、
+#  違うウィンドウマネージャが起動します.
+#
+# [style] (filename)
+# blackboxを新しいスタイルに再設定するアイテムを挿入します. この変更は
+#  blackbox終了／再起動時に保存されます.
+#
+# [include] (filename)
+# これは"filename"からメニューアイテムを取り込みます. ファイル中には
+#  [begin]もしくは[end]を含んではいけません. ただし、サブメニューに必要な
+#  [end]は例外です.
+#
+# 例:
+
+[begin] (Blackbox 0.50.x)
+  [exec] (漢字ターミナル) {kterm -ls}
+  [exec] (rxvt)     {rxvt}
+
+  [exec] (Applixware) {applix}
+  [exec] (多言語Emacs) {mule}
+  [exec] (Acrobat Reader)   {acroread}
+
+  [submenu] (グラフィックス)
+    [exec] (XV)           {xv}
+    [exec] (The GIMP)     {gimp}
+    [exec] (Image Magick) {display}
+  [end]
+
+  [submenu] (ネットスケープ) {ネットスケープ}
+    [exec] (ネットスケープナビゲータ) {netscape}
+    [submenu] (その他...)
+      [exec] (ネットスケープメール) {netscape -mail}
+      [exec] (ネットスケープニュース) {netscape -news}
+      [exec] (ネットスケープコンポーザ) {netscape -edit}
+    [end]
+  [end]
+
+  [submenu] (Xユーティリティ) {ユーティリティ}
+    [exec] (フォントセレクタ) {xfontsel}
+    [exec] (マニュアル) {xman}
+    [exec] (電卓) {xcalc}
+    [exec] (Xload) {xload}
+  [end]
+  
+  [submenu] (スタイル) {スタイルを選んでください...}
+    [include] (@pkgdatadir@/brueghel/stylesmenu)
+    [include] (@pkgdatadir@/styles/stylesmenu)
+  [end]
+
+  [reconfig] (設定読み直し)
+  [restart] (再起動)
+  [submenu] (その他) {他のウィンドウマネージャを起動}
+    [restart] (FVWMに切り替え) {fvwm}
+    [restart] (WindowMakerに切り替え) {wmaker}
+    [restart] (Afterstepに切り替え)   {afterstep}
+    [restart] (TWMに切り替え)         {twm}
+    [restart] (KWMに切り替え)         {kwm}
+    [restart] (MWMに切り替え)         {mwm}
+  [end]
+
+  [exit] (終了)
+[end]
+
+# 以上 サンプルメニュー.
--- blackbox-0.51.3.orig/Makefile.in
+++ blackbox-0.51.3/Makefile.in
@@ -77,27 +77,48 @@
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
+CATALOGS = @CATALOGS@
+CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CXX = @CXX@
+DATADIRNAME = @DATADIRNAME@
+GENCAT = @GENCAT@
+GMOFILES = @GMOFILES@
+GMSGFMT = @GMSGFMT@
+GT_NO = @GT_NO@
+GT_YES = @GT_YES@
+INCLUDE_LOCALE_H = @INCLUDE_LOCALE_H@
+INSTOBJEXT = @INSTOBJEXT@
 INTERLACE = @INTERLACE@
+INTLDEPS = @INTLDEPS@
+INTLLIBS = @INTLLIBS@
+INTLOBJS = @INTLOBJS@
 KDE = @KDE@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
+MKINSTALLDIRS = @MKINSTALLDIRS@
+MSGFMT = @MSGFMT@
 PACKAGE = @PACKAGE@
+POFILES = @POFILES@
+POSUB = @POSUB@
+RANLIB = @RANLIB@
 SHAPE = @SHAPE@
 SLIT = @SLIT@
+USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
+USE_NLS = @USE_NLS@
 VERSION = @VERSION@
+l = @l@
 regex_cmd = @regex_cmd@
 
-SUBDIRS = data util src
+SUBDIRS = data util intl po src
 MAINTAINERCLEANFILES = aclocal.m4 config.h.in configure Makefile.in stamp-h.in
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = config.h
 CONFIG_CLEAN_FILES =  version.h
-DIST_COMMON =  README ./stamp-h.in AUTHORS COPYING ChangeLog INSTALL \
-Makefile.am Makefile.in NEWS TODO aclocal.m4 config.h.in configure \
-configure.in install-sh missing mkinstalldirs version.h.in
+DIST_COMMON =  README ./stamp-h.in ABOUT-NLS AUTHORS COPYING ChangeLog \
+INSTALL Makefile.am Makefile.in NEWS TODO aclocal.m4 config.h.in \
+configure configure.in install-sh missing mkinstalldirs version.h.in
 
 
 DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)
@@ -107,9 +128,9 @@
 all: all-redirect
 .SUFFIXES:
 $(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
-	cd $(top_srcdir) && $(AUTOMAKE) --gnu --include-deps Makefile
+	cd $(top_srcdir) && $(AUTOMAKE) --gnu Makefile
 
-Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
+Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status $(BUILT_SOURCES)
 	cd $(top_builddir) \
 	  && CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status
 
@@ -253,7 +274,7 @@
 	mkdir $(distdir)/=inst
 	dc_install_base=`cd $(distdir)/=inst && pwd`; \
 	cd $(distdir)/=build \
-	  && ../configure --srcdir=.. --prefix=$$dc_install_base \
+	  && ../configure --with-included-gettext --srcdir=.. --prefix=$$dc_install_base \
 	  && $(MAKE) $(AM_MAKEFLAGS) \
 	  && $(MAKE) $(AM_MAKEFLAGS) dvi \
 	  && $(MAKE) $(AM_MAKEFLAGS) check \
@@ -278,10 +299,15 @@
 	-rm -rf $(distdir)
 	mkdir $(distdir)
 	-chmod 777 $(distdir)
+	here=`cd $(top_builddir) && pwd`; \
+	top_distdir=`cd $(distdir) && pwd`; \
+	distdir=`cd $(distdir) && pwd`; \
+	cd $(top_srcdir) \
+	  && $(AUTOMAKE) --include-deps --build-dir=$$here --srcdir-name=$(top_srcdir) --output-dir=$$top_distdir --gnu Makefile
 	@for file in $(DISTFILES); do \
 	  d=$(srcdir); \
 	  if test -d $$d/$$file; then \
-	    cp -pr $$/$$file $(distdir)/$$file; \
+	    cp -pr $$d/$$file $(distdir)/$$file; \
 	  else \
 	    test -f $(distdir)/$$file \
 	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
--- blackbox-0.51.3.orig/Makefile.am
+++ blackbox-0.51.3/Makefile.am
@@ -18,7 +18,7 @@
 #  (See the included file COPYING / GPL-2.0)
 #
 
-SUBDIRS = data util src
+SUBDIRS = data util intl po src
 MAINTAINERCLEANFILES = aclocal.m4 config.h.in configure Makefile.in stamp-h.in
 
 distclean-local:
--- blackbox-0.51.3.orig/ChangeLog
+++ blackbox-0.51.3/ChangeLog
@@ -1,6 +1,10 @@
 ChangeLog for 0.51.x
 
 
+Changes from 0.51.3 to 0.51.3.1:
+  - silly fix for new linked list cde and KDE removeWindow operation... nothing
+    to warrant a full rev number increase
+
 Changes from 0.51.2 to 0.51.3:
   - made linked lists a little smarter... they now know which iterator is
     accessing them, and don't let more than one at at time access them...
--- blackbox-0.51.3.orig/configure
+++ blackbox-0.51.3/configure
@@ -12,6 +12,12 @@
 ac_default_prefix=/usr/local
 # Any additions from configure.in:
 ac_help="$ac_help
+  --disable-nls           do not use Native Language Support"
+ac_help="$ac_help
+  --with-included-gettext use the GNU gettext library included here"
+ac_help="$ac_help
+  --with-catgets          use catgets functions if available"
+ac_help="$ac_help
   --with-x                use the X Window System"
 ac_help="$ac_help
   --enable-shape          enable support of the XShape extension [default=yes]"
@@ -565,7 +571,7 @@
 # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
 # ./install, which can be erroneously created by make from ./install.sh.
 echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
-echo "configure:569: checking for a BSD compatible install" >&5
+echo "configure:575: checking for a BSD compatible install" >&5
 if test -z "$INSTALL"; then
 if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -618,7 +624,7 @@
 test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
 
 echo $ac_n "checking whether build environment is sane""... $ac_c" 1>&6
-echo "configure:622: checking whether build environment is sane" >&5
+echo "configure:628: checking whether build environment is sane" >&5
 # Just in case
 sleep 1
 echo timestamp > conftestfile
@@ -675,7 +681,7 @@
 test "$program_transform_name" = "" && program_transform_name="s,x,x,"
 
 echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
-echo "configure:679: checking whether ${MAKE-make} sets \${MAKE}" >&5
+echo "configure:685: checking whether ${MAKE-make} sets \${MAKE}" >&5
 set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -702,7 +708,7 @@
 fi
 
 
-PACKAGE=Blackbox
+PACKAGE=blackbox
 
 VERSION=0.51.3
 
@@ -714,7 +720,7 @@
 
 missing_dir=`cd $ac_aux_dir && pwd`
 echo $ac_n "checking for working aclocal""... $ac_c" 1>&6
-echo "configure:718: checking for working aclocal" >&5
+echo "configure:724: checking for working aclocal" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
@@ -727,7 +733,7 @@
 fi
 
 echo $ac_n "checking for working autoconf""... $ac_c" 1>&6
-echo "configure:731: checking for working autoconf" >&5
+echo "configure:737: checking for working autoconf" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
@@ -740,7 +746,7 @@
 fi
 
 echo $ac_n "checking for working automake""... $ac_c" 1>&6
-echo "configure:744: checking for working automake" >&5
+echo "configure:750: checking for working automake" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
@@ -753,7 +759,7 @@
 fi
 
 echo $ac_n "checking for working autoheader""... $ac_c" 1>&6
-echo "configure:757: checking for working autoheader" >&5
+echo "configure:763: checking for working autoheader" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
@@ -766,7 +772,7 @@
 fi
 
 echo $ac_n "checking for working makeinfo""... $ac_c" 1>&6
-echo "configure:770: checking for working makeinfo" >&5
+echo "configure:776: checking for working makeinfo" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
@@ -779,13 +785,25 @@
 fi
 
 
+PACKAGE="blackbox"
+VERSION=0.51.3
+cat >> confdefs.h <<EOF
+#define PACKAGE "$PACKAGE"
+EOF
+
+cat >> confdefs.h <<EOF
+#define VERSION "$VERSION"
+EOF
+
+
+
 
 test x$prefix = "xNONE" && prefix="$ac_default_prefix"
 
 # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:789: checking for $ac_word" >&5
+echo "configure:807: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -815,7 +833,7 @@
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:819: checking for $ac_word" >&5
+echo "configure:837: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -866,7 +884,7 @@
       # Extract the first word of "cl", so it can be a program name with args.
 set dummy cl; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:870: checking for $ac_word" >&5
+echo "configure:888: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -898,7 +916,7 @@
 fi
 
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:902: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
+echo "configure:920: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
 
 ac_ext=c
 # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
@@ -909,12 +927,12 @@
 
 cat > conftest.$ac_ext << EOF
 
-#line 913 "configure"
+#line 931 "configure"
 #include "confdefs.h"
 
 main(){return(0);}
 EOF
-if { (eval echo configure:918: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:936: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   ac_cv_prog_cc_works=yes
   # If we can't run a trivial program, we are probably using a cross compiler.
   if (./conftest; exit) 2>/dev/null; then
@@ -940,12 +958,12 @@
   { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
 fi
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:944: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
+echo "configure:962: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
 echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
 cross_compiling=$ac_cv_prog_cc_cross
 
 echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
-echo "configure:949: checking whether we are using GNU C" >&5
+echo "configure:967: checking whether we are using GNU C" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -954,7 +972,7 @@
   yes;
 #endif
 EOF
-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:958: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:976: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
   ac_cv_prog_gcc=yes
 else
   ac_cv_prog_gcc=no
@@ -973,7 +991,7 @@
 ac_save_CFLAGS="$CFLAGS"
 CFLAGS=
 echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
-echo "configure:977: checking whether ${CC-cc} accepts -g" >&5
+echo "configure:995: checking whether ${CC-cc} accepts -g" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1005,7 +1023,7 @@
 fi
 
 echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:1009: checking how to run the C preprocessor" >&5
+echo "configure:1027: checking how to run the C preprocessor" >&5
 # On Suns, sometimes $CPP names a directory.
 if test -n "$CPP" && test -d "$CPP"; then
   CPP=
@@ -1020,13 +1038,13 @@
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp.
   cat > conftest.$ac_ext <<EOF
-#line 1024 "configure"
+#line 1042 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1030: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1048: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -1037,13 +1055,13 @@
   rm -rf conftest*
   CPP="${CC-cc} -E -traditional-cpp"
   cat > conftest.$ac_ext <<EOF
-#line 1041 "configure"
+#line 1059 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1047: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1065: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -1054,13 +1072,13 @@
   rm -rf conftest*
   CPP="${CC-cc} -nologo -E"
   cat > conftest.$ac_ext <<EOF
-#line 1058 "configure"
+#line 1076 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1064: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1082: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -1085,9 +1103,9 @@
 echo "$ac_t""$CPP" 1>&6
 
 echo $ac_n "checking for AIX""... $ac_c" 1>&6
-echo "configure:1089: checking for AIX" >&5
+echo "configure:1107: checking for AIX" >&5
 cat > conftest.$ac_ext <<EOF
-#line 1091 "configure"
+#line 1109 "configure"
 #include "confdefs.h"
 #ifdef _AIX
   yes
@@ -1109,7 +1127,7 @@
 
 
 echo $ac_n "checking for POSIXized ISC""... $ac_c" 1>&6
-echo "configure:1113: checking for POSIXized ISC" >&5
+echo "configure:1131: checking for POSIXized ISC" >&5
 if test -d /etc/conf/kconfig.d &&
   grep _POSIX_VERSION /usr/include/sys/unistd.h >/dev/null 2>&1
 then
@@ -1135,7 +1153,7 @@
 # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1139: checking for $ac_word" >&5
+echo "configure:1157: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1167,7 +1185,7 @@
 
 
 echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:1171: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5
+echo "configure:1189: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5
 
 ac_ext=C
 # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
@@ -1178,12 +1196,12 @@
 
 cat > conftest.$ac_ext << EOF
 
-#line 1182 "configure"
+#line 1200 "configure"
 #include "confdefs.h"
 
 int main(){return(0);}
 EOF
-if { (eval echo configure:1187: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1205: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   ac_cv_prog_cxx_works=yes
   # If we can't run a trivial program, we are probably using a cross compiler.
   if (./conftest; exit) 2>/dev/null; then
@@ -1209,12 +1227,12 @@
   { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; exit 1; }
 fi
 echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:1213: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
+echo "configure:1231: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
 echo "$ac_t""$ac_cv_prog_cxx_cross" 1>&6
 cross_compiling=$ac_cv_prog_cxx_cross
 
 echo $ac_n "checking whether we are using GNU C++""... $ac_c" 1>&6
-echo "configure:1218: checking whether we are using GNU C++" >&5
+echo "configure:1236: checking whether we are using GNU C++" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1223,166 +1241,2098 @@
   yes;
 #endif
 EOF
-if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:1227: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
+if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:1245: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
   ac_cv_prog_gxx=yes
 else
-  ac_cv_prog_gxx=no
-fi
+  ac_cv_prog_gxx=no
+fi
+fi
+
+echo "$ac_t""$ac_cv_prog_gxx" 1>&6
+
+if test $ac_cv_prog_gxx = yes; then
+  GXX=yes
+else
+  GXX=
+fi
+
+ac_test_CXXFLAGS="${CXXFLAGS+set}"
+ac_save_CXXFLAGS="$CXXFLAGS"
+CXXFLAGS=
+echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
+echo "configure:1264: checking whether ${CXX-g++} accepts -g" >&5
+if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  echo 'void f(){}' > conftest.cc
+if test -z "`${CXX-g++} -g -c conftest.cc 2>&1`"; then
+  ac_cv_prog_cxx_g=yes
+else
+  ac_cv_prog_cxx_g=no
+fi
+rm -f conftest*
+
+fi
+
+echo "$ac_t""$ac_cv_prog_cxx_g" 1>&6
+if test "$ac_test_CXXFLAGS" = set; then
+  CXXFLAGS="$ac_save_CXXFLAGS"
+elif test $ac_cv_prog_cxx_g = yes; then
+  if test "$GXX" = yes; then
+    CXXFLAGS="-g -O2"
+  else
+    CXXFLAGS="-g"
+  fi
+else
+  if test "$GXX" = yes; then
+    CXXFLAGS="-O2"
+  else
+    CXXFLAGS=
+  fi
+fi
+
+# Find a good install program.  We prefer a C program (faster),
+# so one script is as good as another.  But avoid the broken or
+# incompatible versions:
+# SysV /etc/install, /usr/sbin/install
+# SunOS /usr/etc/install
+# IRIX /sbin/install
+# AIX /bin/install
+# AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
+# AFS /usr/afsws/bin/install, which mishandles nonexistent args
+# SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
+# ./install, which can be erroneously created by make from ./install.sh.
+echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
+echo "configure:1307: checking for a BSD compatible install" >&5
+if test -z "$INSTALL"; then
+if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+    IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS=":"
+  for ac_dir in $PATH; do
+    # Account for people who put trailing slashes in PATH elements.
+    case "$ac_dir/" in
+    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
+    *)
+      # OSF1 and SCO ODT 3.0 have their own names for install.
+      # Don't use installbsd from OSF since it installs stuff as root
+      # by default.
+      for ac_prog in ginstall scoinst install; do
+        if test -f $ac_dir/$ac_prog; then
+	  if test $ac_prog = install &&
+            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
+	    # AIX install.  It has an incompatible calling convention.
+	    :
+	  else
+	    ac_cv_path_install="$ac_dir/$ac_prog -c"
+	    break 2
+	  fi
+	fi
+      done
+      ;;
+    esac
+  done
+  IFS="$ac_save_IFS"
+
+fi
+  if test "${ac_cv_path_install+set}" = set; then
+    INSTALL="$ac_cv_path_install"
+  else
+    # As a last resort, use the slow shell script.  We don't cache a
+    # path for INSTALL within a source directory, because that will
+    # break other packages using the cache if that directory is
+    # removed, or if the path is relative.
+    INSTALL="$ac_install_sh"
+  fi
+fi
+echo "$ac_t""$INSTALL" 1>&6
+
+# Use test -z because SunOS4 sh mishandles braces in ${var-val}.
+# It thinks the first close brace ends the variable substitution.
+test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
+
+test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'
+
+test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
+
+
+for ac_prog in sed
+do
+# Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:1365: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_prog_regex_cmd'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test -n "$regex_cmd"; then
+  ac_cv_prog_regex_cmd="$regex_cmd" # Let the user override the test.
+else
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_prog_regex_cmd="$ac_prog"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+fi
+fi
+regex_cmd="$ac_cv_prog_regex_cmd"
+if test -n "$regex_cmd"; then
+  echo "$ac_t""$regex_cmd" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+test -n "$regex_cmd" && break
+done
+
+if test x$regex_cmd = "x"; then
+  { echo "configure: error: error. sed is required to build the default menu file." 1>&2; exit 1; }
+fi
+
+ALL_LINGUAS="ja"
+# Extract the first word of "ranlib", so it can be a program name with args.
+set dummy ranlib; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:1402: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test -n "$RANLIB"; then
+  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
+else
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_prog_RANLIB="ranlib"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
+fi
+fi
+RANLIB="$ac_cv_prog_RANLIB"
+if test -n "$RANLIB"; then
+  echo "$ac_t""$RANLIB" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
+echo "configure:1430: checking for ANSI C header files" >&5
+if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 1435 "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+#include <stdarg.h>
+#include <string.h>
+#include <float.h>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:1443: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  ac_cv_header_stdc=yes
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+if test $ac_cv_header_stdc = yes; then
+  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
+cat > conftest.$ac_ext <<EOF
+#line 1460 "configure"
+#include "confdefs.h"
+#include <string.h>
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "memchr" >/dev/null 2>&1; then
+  :
+else
+  rm -rf conftest*
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
+cat > conftest.$ac_ext <<EOF
+#line 1478 "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "free" >/dev/null 2>&1; then
+  :
+else
+  rm -rf conftest*
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
+if test "$cross_compiling" = yes; then
+  :
+else
+  cat > conftest.$ac_ext <<EOF
+#line 1499 "configure"
+#include "confdefs.h"
+#include <ctype.h>
+#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
+#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
+int main () { int i; for (i = 0; i < 256; i++)
+if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
+exit (0); }
+
+EOF
+if { (eval echo configure:1510: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  :
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_header_stdc=no
+fi
+rm -fr conftest*
+fi
+
+fi
+fi
+
+echo "$ac_t""$ac_cv_header_stdc" 1>&6
+if test $ac_cv_header_stdc = yes; then
+  cat >> confdefs.h <<\EOF
+#define STDC_HEADERS 1
+EOF
+
+fi
+
+echo $ac_n "checking for working const""... $ac_c" 1>&6
+echo "configure:1534: checking for working const" >&5
+if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 1539 "configure"
+#include "confdefs.h"
+
+int main() {
+
+/* Ultrix mips cc rejects this.  */
+typedef int charset[2]; const charset x = {0,0};
+/* SunOS 4.1.1 cc rejects this.  */
+char const *const *ccp;
+char **p;
+/* NEC SVR4.0.2 mips cc rejects this.  */
+struct point {int x, y;};
+static struct point const zero = {0,0};
+/* AIX XL C 1.02.0.0 rejects this.
+   It does not let you subtract one const X* pointer from another in an arm
+   of an if-expression whose if-part is not a constant expression */
+const char *g = "string";
+ccp = &g + (g ? g-g : 0);
+/* HPUX 7.0 cc rejects these. */
+++ccp;
+p = (char**) ccp;
+ccp = (char const *const *) p;
+{ /* SCO 3.2v4 cc rejects this.  */
+  char *t;
+  char const *s = 0 ? (char *) 0 : (char const *) 0;
+
+  *t++ = 0;
+}
+{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
+  int x[] = {25, 17};
+  const int *foo = &x[0];
+  ++foo;
+}
+{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
+  typedef const int *iptr;
+  iptr p = 0;
+  ++p;
+}
+{ /* AIX XL C 1.02.0.0 rejects this saying
+     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
+  struct s { int j; const int *ap[3]; };
+  struct s *b; b->j = 5;
+}
+{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
+  const int foo = 10;
+}
+
+; return 0; }
+EOF
+if { (eval echo configure:1588: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  ac_cv_c_const=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_c_const=no
+fi
+rm -f conftest*
+fi
+
+echo "$ac_t""$ac_cv_c_const" 1>&6
+if test $ac_cv_c_const = no; then
+  cat >> confdefs.h <<\EOF
+#define const 
+EOF
+
+fi
+
+echo $ac_n "checking for inline""... $ac_c" 1>&6
+echo "configure:1609: checking for inline" >&5
+if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_cv_c_inline=no
+for ac_kw in inline __inline__ __inline; do
+  cat > conftest.$ac_ext <<EOF
+#line 1616 "configure"
+#include "confdefs.h"
+
+int main() {
+} $ac_kw foo() {
+; return 0; }
+EOF
+if { (eval echo configure:1623: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  ac_cv_c_inline=$ac_kw; break
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+fi
+rm -f conftest*
+done
+
+fi
+
+echo "$ac_t""$ac_cv_c_inline" 1>&6
+case "$ac_cv_c_inline" in
+  inline | yes) ;;
+  no) cat >> confdefs.h <<\EOF
+#define inline 
+EOF
+ ;;
+  *)  cat >> confdefs.h <<EOF
+#define inline $ac_cv_c_inline
+EOF
+ ;;
+esac
+
+echo $ac_n "checking for off_t""... $ac_c" 1>&6
+echo "configure:1649: checking for off_t" >&5
+if eval "test \"`echo '$''{'ac_cv_type_off_t'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 1654 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+#if STDC_HEADERS
+#include <stdlib.h>
+#include <stddef.h>
+#endif
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "(^|[^a-zA-Z_0-9])off_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
+  rm -rf conftest*
+  ac_cv_type_off_t=yes
+else
+  rm -rf conftest*
+  ac_cv_type_off_t=no
+fi
+rm -f conftest*
+
+fi
+echo "$ac_t""$ac_cv_type_off_t" 1>&6
+if test $ac_cv_type_off_t = no; then
+  cat >> confdefs.h <<\EOF
+#define off_t long
+EOF
+
+fi
+
+echo $ac_n "checking for size_t""... $ac_c" 1>&6
+echo "configure:1682: checking for size_t" >&5
+if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 1687 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+#if STDC_HEADERS
+#include <stdlib.h>
+#include <stddef.h>
+#endif
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
+  rm -rf conftest*
+  ac_cv_type_size_t=yes
+else
+  rm -rf conftest*
+  ac_cv_type_size_t=no
+fi
+rm -f conftest*
+
+fi
+echo "$ac_t""$ac_cv_type_size_t" 1>&6
+if test $ac_cv_type_size_t = no; then
+  cat >> confdefs.h <<\EOF
+#define size_t unsigned
+EOF
+
+fi
+
+# The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
+# for constant arguments.  Useless!
+echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
+echo "configure:1717: checking for working alloca.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 1722 "configure"
+#include "confdefs.h"
+#include <alloca.h>
+int main() {
+char *p = alloca(2 * sizeof(int));
+; return 0; }
+EOF
+if { (eval echo configure:1729: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  ac_cv_header_alloca_h=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_header_alloca_h=no
+fi
+rm -f conftest*
+fi
+
+echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
+if test $ac_cv_header_alloca_h = yes; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_ALLOCA_H 1
+EOF
+
+fi
+
+echo $ac_n "checking for alloca""... $ac_c" 1>&6
+echo "configure:1750: checking for alloca" >&5
+if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 1755 "configure"
+#include "confdefs.h"
+
+#ifdef __GNUC__
+# define alloca __builtin_alloca
+#else
+# ifdef _MSC_VER
+#  include <malloc.h>
+#  define alloca _alloca
+# else
+#  if HAVE_ALLOCA_H
+#   include <alloca.h>
+#  else
+#   ifdef _AIX
+ #pragma alloca
+#   else
+#    ifndef alloca /* predefined by HP cc +Olibcalls */
+char *alloca ();
+#    endif
+#   endif
+#  endif
+# endif
+#endif
+
+int main() {
+char *p = (char *) alloca(1);
+; return 0; }
+EOF
+if { (eval echo configure:1783: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  ac_cv_func_alloca_works=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_func_alloca_works=no
+fi
+rm -f conftest*
+fi
+
+echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
+if test $ac_cv_func_alloca_works = yes; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_ALLOCA 1
+EOF
+
+fi
+
+if test $ac_cv_func_alloca_works = no; then
+  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
+  # that cause trouble.  Some versions do not even contain alloca or
+  # contain a buggy version.  If you still want to use their alloca,
+  # use ar to extract alloca.o from them instead of compiling alloca.c.
+  ALLOCA=alloca.${ac_objext}
+  cat >> confdefs.h <<\EOF
+#define C_ALLOCA 1
+EOF
+
+
+echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
+echo "configure:1815: checking whether alloca needs Cray hooks" >&5
+if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 1820 "configure"
+#include "confdefs.h"
+#if defined(CRAY) && ! defined(CRAY2)
+webecray
+#else
+wenotbecray
+#endif
+
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "webecray" >/dev/null 2>&1; then
+  rm -rf conftest*
+  ac_cv_os_cray=yes
+else
+  rm -rf conftest*
+  ac_cv_os_cray=no
+fi
+rm -f conftest*
+
+fi
+
+echo "$ac_t""$ac_cv_os_cray" 1>&6
+if test $ac_cv_os_cray = yes; then
+for ac_func in _getb67 GETB67 getb67; do
+  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:1845: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 1850 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:1873: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<EOF
+#define CRAY_STACKSEG_END $ac_func
+EOF
+
+  break
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+done
+fi
+
+echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
+echo "configure:1900: checking stack direction for C alloca" >&5
+if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_c_stack_direction=0
+else
+  cat > conftest.$ac_ext <<EOF
+#line 1908 "configure"
+#include "confdefs.h"
+find_stack_direction ()
+{
+  static char *addr = 0;
+  auto char dummy;
+  if (addr == 0)
+    {
+      addr = &dummy;
+      return find_stack_direction ();
+    }
+  else
+    return (&dummy > addr) ? 1 : -1;
+}
+main ()
+{
+  exit (find_stack_direction() < 0);
+}
+EOF
+if { (eval echo configure:1927: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_c_stack_direction=1
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_c_stack_direction=-1
+fi
+rm -fr conftest*
+fi
+
+fi
+
+echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
+cat >> confdefs.h <<EOF
+#define STACK_DIRECTION $ac_cv_c_stack_direction
+EOF
+
+fi
+
+for ac_hdr in unistd.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:1952: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 1957 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:1962: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+for ac_func in getpagesize
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:1991: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 1996 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:2019: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+echo $ac_n "checking for working mmap""... $ac_c" 1>&6
+echo "configure:2044: checking for working mmap" >&5
+if eval "test \"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_func_mmap_fixed_mapped=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 2052 "configure"
+#include "confdefs.h"
+
+/* Thanks to Mike Haertel and Jim Avera for this test.
+   Here is a matrix of mmap possibilities:
+	mmap private not fixed
+	mmap private fixed at somewhere currently unmapped
+	mmap private fixed at somewhere already mapped
+	mmap shared not fixed
+	mmap shared fixed at somewhere currently unmapped
+	mmap shared fixed at somewhere already mapped
+   For private mappings, we should verify that changes cannot be read()
+   back from the file, nor mmap's back from the file at a different
+   address.  (There have been systems where private was not correctly
+   implemented like the infamous i386 svr4.0, and systems where the
+   VM page cache was not coherent with the filesystem buffer cache
+   like early versions of FreeBSD and possibly contemporary NetBSD.)
+   For shared mappings, we should conversely verify that changes get
+   propogated back to all the places they're supposed to be.
+
+   Grep wants private fixed already mapped.
+   The main things grep needs to know about mmap are:
+   * does it exist and is it safe to write into the mmap'd area
+   * how to use it (BSD variants)  */
+#include <sys/types.h>
+#include <fcntl.h>
+#include <sys/mman.h>
+
+/* This mess was copied from the GNU getpagesize.h.  */
+#ifndef HAVE_GETPAGESIZE
+# ifdef HAVE_UNISTD_H
+#  include <unistd.h>
+# endif
+
+/* Assume that all systems that can run configure have sys/param.h.  */
+# ifndef HAVE_SYS_PARAM_H
+#  define HAVE_SYS_PARAM_H 1
+# endif
+
+# ifdef _SC_PAGESIZE
+#  define getpagesize() sysconf(_SC_PAGESIZE)
+# else /* no _SC_PAGESIZE */
+#  ifdef HAVE_SYS_PARAM_H
+#   include <sys/param.h>
+#   ifdef EXEC_PAGESIZE
+#    define getpagesize() EXEC_PAGESIZE
+#   else /* no EXEC_PAGESIZE */
+#    ifdef NBPG
+#     define getpagesize() NBPG * CLSIZE
+#     ifndef CLSIZE
+#      define CLSIZE 1
+#     endif /* no CLSIZE */
+#    else /* no NBPG */
+#     ifdef NBPC
+#      define getpagesize() NBPC
+#     else /* no NBPC */
+#      ifdef PAGESIZE
+#       define getpagesize() PAGESIZE
+#      endif /* PAGESIZE */
+#     endif /* no NBPC */
+#    endif /* no NBPG */
+#   endif /* no EXEC_PAGESIZE */
+#  else /* no HAVE_SYS_PARAM_H */
+#   define getpagesize() 8192	/* punt totally */
+#  endif /* no HAVE_SYS_PARAM_H */
+# endif /* no _SC_PAGESIZE */
+
+#endif /* no HAVE_GETPAGESIZE */
+
+#ifdef __cplusplus
+extern "C" { void *malloc(unsigned); }
+#else
+char *malloc();
+#endif
+
+int
+main()
+{
+	char *data, *data2, *data3;
+	int i, pagesize;
+	int fd;
+
+	pagesize = getpagesize();
+
+	/*
+	 * First, make a file with some known garbage in it.
+	 */
+	data = malloc(pagesize);
+	if (!data)
+		exit(1);
+	for (i = 0; i < pagesize; ++i)
+		*(data + i) = rand();
+	umask(0);
+	fd = creat("conftestmmap", 0600);
+	if (fd < 0)
+		exit(1);
+	if (write(fd, data, pagesize) != pagesize)
+		exit(1);
+	close(fd);
+
+	/*
+	 * Next, try to mmap the file at a fixed address which
+	 * already has something else allocated at it.  If we can,
+	 * also make sure that we see the same garbage.
+	 */
+	fd = open("conftestmmap", O_RDWR);
+	if (fd < 0)
+		exit(1);
+	data2 = malloc(2 * pagesize);
+	if (!data2)
+		exit(1);
+	data2 += (pagesize - ((int) data2 & (pagesize - 1))) & (pagesize - 1);
+	if (data2 != mmap(data2, pagesize, PROT_READ | PROT_WRITE,
+	    MAP_PRIVATE | MAP_FIXED, fd, 0L))
+		exit(1);
+	for (i = 0; i < pagesize; ++i)
+		if (*(data + i) != *(data2 + i))
+			exit(1);
+
+	/*
+	 * Finally, make sure that changes to the mapped area
+	 * do not percolate back to the file as seen by read().
+	 * (This is a bug on some variants of i386 svr4.0.)
+	 */
+	for (i = 0; i < pagesize; ++i)
+		*(data2 + i) = *(data2 + i) + 1;
+	data3 = malloc(pagesize);
+	if (!data3)
+		exit(1);
+	if (read(fd, data3, pagesize) != pagesize)
+		exit(1);
+	for (i = 0; i < pagesize; ++i)
+		if (*(data + i) != *(data3 + i))
+			exit(1);
+	close(fd);
+	unlink("conftestmmap");
+	exit(0);
+}
+
+EOF
+if { (eval echo configure:2192: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_func_mmap_fixed_mapped=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_func_mmap_fixed_mapped=no
+fi
+rm -fr conftest*
+fi
+
+fi
+
+echo "$ac_t""$ac_cv_func_mmap_fixed_mapped" 1>&6
+if test $ac_cv_func_mmap_fixed_mapped = yes; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_MMAP 1
+EOF
+
+fi
+
+                              
+   for ac_hdr in argz.h limits.h locale.h nl_types.h malloc.h string.h \
+unistd.h sys/param.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:2220: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 2225 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:2230: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+   for ac_func in getcwd munmap putenv setenv setlocale strchr strcasecmp \
+strdup __argz_count __argz_stringify __argz_next
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:2260: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 2265 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:2288: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+
+   if test "${ac_cv_func_stpcpy+set}" != "set"; then
+     for ac_func in stpcpy
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:2317: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 2322 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:2345: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+   fi
+   if test "${ac_cv_func_stpcpy}" = "yes"; then
+     cat >> confdefs.h <<\EOF
+#define HAVE_STPCPY 1
+EOF
+
+   fi
+
+   if test $ac_cv_header_locale_h = yes; then
+    echo $ac_n "checking for LC_MESSAGES""... $ac_c" 1>&6
+echo "configure:2379: checking for LC_MESSAGES" >&5
+if eval "test \"`echo '$''{'am_cv_val_LC_MESSAGES'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 2384 "configure"
+#include "confdefs.h"
+#include <locale.h>
+int main() {
+return LC_MESSAGES
+; return 0; }
+EOF
+if { (eval echo configure:2391: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  am_cv_val_LC_MESSAGES=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  am_cv_val_LC_MESSAGES=no
+fi
+rm -f conftest*
+fi
+
+echo "$ac_t""$am_cv_val_LC_MESSAGES" 1>&6
+    if test $am_cv_val_LC_MESSAGES = yes; then
+      cat >> confdefs.h <<\EOF
+#define HAVE_LC_MESSAGES 1
+EOF
+
+    fi
+  fi
+   echo $ac_n "checking whether NLS is requested""... $ac_c" 1>&6
+echo "configure:2412: checking whether NLS is requested" >&5
+        # Check whether --enable-nls or --disable-nls was given.
+if test "${enable_nls+set}" = set; then
+  enableval="$enable_nls"
+  USE_NLS=$enableval
+else
+  USE_NLS=yes
+fi
+
+    echo "$ac_t""$USE_NLS" 1>&6
+    
+
+    USE_INCLUDED_LIBINTL=no
+
+        if test "$USE_NLS" = "yes"; then
+      cat >> confdefs.h <<\EOF
+#define ENABLE_NLS 1
+EOF
+
+      echo $ac_n "checking whether included gettext is requested""... $ac_c" 1>&6
+echo "configure:2432: checking whether included gettext is requested" >&5
+      # Check whether --with-included-gettext or --without-included-gettext was given.
+if test "${with_included_gettext+set}" = set; then
+  withval="$with_included_gettext"
+  nls_cv_force_use_gnu_gettext=$withval
+else
+  nls_cv_force_use_gnu_gettext=no
+fi
+
+      echo "$ac_t""$nls_cv_force_use_gnu_gettext" 1>&6
+
+      nls_cv_use_gnu_gettext="$nls_cv_force_use_gnu_gettext"
+      if test "$nls_cv_force_use_gnu_gettext" != "yes"; then
+                        		nls_cv_header_intl=
+	nls_cv_header_libgt=
+	CATOBJEXT=NONE
+
+	ac_safe=`echo "libintl.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for libintl.h""... $ac_c" 1>&6
+echo "configure:2451: checking for libintl.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 2456 "configure"
+#include "confdefs.h"
+#include <libintl.h>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:2461: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  echo $ac_n "checking for gettext in libc""... $ac_c" 1>&6
+echo "configure:2478: checking for gettext in libc" >&5
+if eval "test \"`echo '$''{'gt_cv_func_gettext_libc'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 2483 "configure"
+#include "confdefs.h"
+#include <libintl.h>
+int main() {
+return (int) gettext ("")
+; return 0; }
+EOF
+if { (eval echo configure:2490: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  gt_cv_func_gettext_libc=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  gt_cv_func_gettext_libc=no
+fi
+rm -f conftest*
+fi
+
+echo "$ac_t""$gt_cv_func_gettext_libc" 1>&6
+
+	   if test "$gt_cv_func_gettext_libc" != "yes"; then
+	     echo $ac_n "checking for bindtextdomain in -lintl""... $ac_c" 1>&6
+echo "configure:2506: checking for bindtextdomain in -lintl" >&5
+ac_lib_var=`echo intl'_'bindtextdomain | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lintl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 2514 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char bindtextdomain();
+
+int main() {
+bindtextdomain()
+; return 0; }
+EOF
+if { (eval echo configure:2525: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  echo $ac_n "checking for gettext in libintl""... $ac_c" 1>&6
+echo "configure:2541: checking for gettext in libintl" >&5
+if eval "test \"`echo '$''{'gt_cv_func_gettext_libintl'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  echo $ac_n "checking for gettext in -lintl""... $ac_c" 1>&6
+echo "configure:2546: checking for gettext in -lintl" >&5
+ac_lib_var=`echo intl'_'gettext | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lintl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 2554 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char gettext();
+
+int main() {
+gettext()
+; return 0; }
+EOF
+if { (eval echo configure:2565: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  gt_cv_func_gettext_libintl=yes
+else
+  echo "$ac_t""no" 1>&6
+gt_cv_func_gettext_libintl=no
+fi
+
+fi
+
+echo "$ac_t""$gt_cv_func_gettext_libintl" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+	   fi
+
+	   if test "$gt_cv_func_gettext_libc" = "yes" \
+	      || test "$gt_cv_func_gettext_libintl" = "yes"; then
+	      cat >> confdefs.h <<\EOF
+#define HAVE_GETTEXT 1
+EOF
+
+	      # Extract the first word of "msgfmt", so it can be a program name with args.
+set dummy msgfmt; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:2604: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_MSGFMT'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  case "$MSGFMT" in
+  /*)
+  ac_cv_path_MSGFMT="$MSGFMT" # Let the user override the test with a path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
+  for ac_dir in $PATH; do
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      if test -z "`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`"; then
+	ac_cv_path_MSGFMT="$ac_dir/$ac_word"
+	break
+      fi
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_path_MSGFMT" && ac_cv_path_MSGFMT="no"
+  ;;
+esac
+fi
+MSGFMT="$ac_cv_path_MSGFMT"
+if test -n "$MSGFMT"; then
+  echo "$ac_t""$MSGFMT" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
+	      if test "$MSGFMT" != "no"; then
+		for ac_func in dcgettext
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:2638: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 2643 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:2666: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+		# Extract the first word of "gmsgfmt", so it can be a program name with args.
+set dummy gmsgfmt; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:2693: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_GMSGFMT'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  case "$GMSGFMT" in
+  /*)
+  ac_cv_path_GMSGFMT="$GMSGFMT" # Let the user override the test with a path.
+  ;;
+  ?:/*)			 
+  ac_cv_path_GMSGFMT="$GMSGFMT" # Let the user override the test with a dos path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do 
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_path_GMSGFMT="$ac_dir/$ac_word"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_path_GMSGFMT" && ac_cv_path_GMSGFMT="$MSGFMT"
+  ;;
+esac
+fi
+GMSGFMT="$ac_cv_path_GMSGFMT"
+if test -n "$GMSGFMT"; then
+  echo "$ac_t""$GMSGFMT" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+		# Extract the first word of "xgettext", so it can be a program name with args.
+set dummy xgettext; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:2729: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_XGETTEXT'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  case "$XGETTEXT" in
+  /*)
+  ac_cv_path_XGETTEXT="$XGETTEXT" # Let the user override the test with a path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
+  for ac_dir in $PATH; do
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      if test -z "`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`"; then
+	ac_cv_path_XGETTEXT="$ac_dir/$ac_word"
+	break
+      fi
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_path_XGETTEXT" && ac_cv_path_XGETTEXT=":"
+  ;;
+esac
+fi
+XGETTEXT="$ac_cv_path_XGETTEXT"
+if test -n "$XGETTEXT"; then
+  echo "$ac_t""$XGETTEXT" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+		cat > conftest.$ac_ext <<EOF
+#line 2761 "configure"
+#include "confdefs.h"
+
+int main() {
+extern int _nl_msg_cat_cntr;
+			       return _nl_msg_cat_cntr
+; return 0; }
+EOF
+if { (eval echo configure:2769: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  CATOBJEXT=.gmo
+		   DATADIRNAME=share
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CATOBJEXT=.mo
+		   DATADIRNAME=lib
+fi
+rm -f conftest*
+		INSTOBJEXT=.mo
+	      fi
+	    fi
+	
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+
+        if test "$CATOBJEXT" = "NONE"; then
+	  echo $ac_n "checking whether catgets can be used""... $ac_c" 1>&6
+echo "configure:2792: checking whether catgets can be used" >&5
+	  # Check whether --with-catgets or --without-catgets was given.
+if test "${with_catgets+set}" = set; then
+  withval="$with_catgets"
+  nls_cv_use_catgets=$withval
+else
+  nls_cv_use_catgets=no
+fi
+
+	  echo "$ac_t""$nls_cv_use_catgets" 1>&6
+
+	  if test "$nls_cv_use_catgets" = "yes"; then
+	    	    echo $ac_n "checking for main in -li""... $ac_c" 1>&6
+echo "configure:2805: checking for main in -li" >&5
+ac_lib_var=`echo i'_'main | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-li  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 2813 "configure"
+#include "confdefs.h"
+
+int main() {
+main()
+; return 0; }
+EOF
+if { (eval echo configure:2820: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_lib=HAVE_LIB`echo i | sed -e 's/[^a-zA-Z0-9_]/_/g' \
+    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_lib 1
+EOF
+
+  LIBS="-li $LIBS"
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+	    echo $ac_n "checking for catgets""... $ac_c" 1>&6
+echo "configure:2848: checking for catgets" >&5
+if eval "test \"`echo '$''{'ac_cv_func_catgets'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 2853 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char catgets(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char catgets();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_catgets) || defined (__stub___catgets)
+choke me
+#else
+catgets();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:2876: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_catgets=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_catgets=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'catgets`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_CATGETS 1
+EOF
+
+	       INTLOBJS="\$(CATOBJS)"
+	       # Extract the first word of "gencat", so it can be a program name with args.
+set dummy gencat; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:2898: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_GENCAT'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  case "$GENCAT" in
+  /*)
+  ac_cv_path_GENCAT="$GENCAT" # Let the user override the test with a path.
+  ;;
+  ?:/*)			 
+  ac_cv_path_GENCAT="$GENCAT" # Let the user override the test with a dos path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do 
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_path_GENCAT="$ac_dir/$ac_word"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_path_GENCAT" && ac_cv_path_GENCAT="no"
+  ;;
+esac
+fi
+GENCAT="$ac_cv_path_GENCAT"
+if test -n "$GENCAT"; then
+  echo "$ac_t""$GENCAT" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
+	       if test "$GENCAT" != "no"; then
+		 # Extract the first word of "gmsgfmt", so it can be a program name with args.
+set dummy gmsgfmt; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:2934: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_GMSGFMT'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  case "$GMSGFMT" in
+  /*)
+  ac_cv_path_GMSGFMT="$GMSGFMT" # Let the user override the test with a path.
+  ;;
+  ?:/*)			 
+  ac_cv_path_GMSGFMT="$GMSGFMT" # Let the user override the test with a dos path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do 
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_path_GMSGFMT="$ac_dir/$ac_word"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_path_GMSGFMT" && ac_cv_path_GMSGFMT="no"
+  ;;
+esac
+fi
+GMSGFMT="$ac_cv_path_GMSGFMT"
+if test -n "$GMSGFMT"; then
+  echo "$ac_t""$GMSGFMT" 1>&6
+else
+  echo "$ac_t""no" 1>&6
 fi
 
-echo "$ac_t""$ac_cv_prog_gxx" 1>&6
-
-if test $ac_cv_prog_gxx = yes; then
-  GXX=yes
+		 if test "$GMSGFMT" = "no"; then
+		   # Extract the first word of "msgfmt", so it can be a program name with args.
+set dummy msgfmt; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:2971: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_GMSGFMT'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  GXX=
+  case "$GMSGFMT" in
+  /*)
+  ac_cv_path_GMSGFMT="$GMSGFMT" # Let the user override the test with a path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
+  for ac_dir in $PATH; do
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      if test -z "`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`"; then
+	ac_cv_path_GMSGFMT="$ac_dir/$ac_word"
+	break
+      fi
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_path_GMSGFMT" && ac_cv_path_GMSGFMT="no"
+  ;;
+esac
+fi
+GMSGFMT="$ac_cv_path_GMSGFMT"
+if test -n "$GMSGFMT"; then
+  echo "$ac_t""$GMSGFMT" 1>&6
+else
+  echo "$ac_t""no" 1>&6
 fi
 
-ac_test_CXXFLAGS="${CXXFLAGS+set}"
-ac_save_CXXFLAGS="$CXXFLAGS"
-CXXFLAGS=
-echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
-echo "configure:1246: checking whether ${CXX-g++} accepts -g" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
+		 fi
+		 # Extract the first word of "xgettext", so it can be a program name with args.
+set dummy xgettext; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:3006: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_XGETTEXT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  echo 'void f(){}' > conftest.cc
-if test -z "`${CXX-g++} -g -c conftest.cc 2>&1`"; then
-  ac_cv_prog_cxx_g=yes
+  case "$XGETTEXT" in
+  /*)
+  ac_cv_path_XGETTEXT="$XGETTEXT" # Let the user override the test with a path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
+  for ac_dir in $PATH; do
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      if test -z "`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`"; then
+	ac_cv_path_XGETTEXT="$ac_dir/$ac_word"
+	break
+      fi
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_path_XGETTEXT" && ac_cv_path_XGETTEXT=":"
+  ;;
+esac
+fi
+XGETTEXT="$ac_cv_path_XGETTEXT"
+if test -n "$XGETTEXT"; then
+  echo "$ac_t""$XGETTEXT" 1>&6
 else
-  ac_cv_prog_cxx_g=no
-fi
-rm -f conftest*
-
+  echo "$ac_t""no" 1>&6
 fi
 
-echo "$ac_t""$ac_cv_prog_cxx_g" 1>&6
-if test "$ac_test_CXXFLAGS" = set; then
-  CXXFLAGS="$ac_save_CXXFLAGS"
-elif test $ac_cv_prog_cxx_g = yes; then
-  if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
-  else
-    CXXFLAGS="-g"
-  fi
+		 USE_INCLUDED_LIBINTL=yes
+		 CATOBJEXT=.cat
+		 INSTOBJEXT=.cat
+		 DATADIRNAME=lib
+		 INTLDEPS='$(top_builddir)/intl/libintl.a'
+		 INTLLIBS=$INTLDEPS
+		 LIBS=`echo $LIBS | sed -e 's/-lintl//'`
+		 nls_cv_header_intl=intl/libintl.h
+		 nls_cv_header_libgt=intl/libgettext.h
+	       fi
 else
-  if test "$GXX" = yes; then
-    CXXFLAGS="-O2"
-  else
-    CXXFLAGS=
-  fi
+  echo "$ac_t""no" 1>&6
 fi
 
-# Find a good install program.  We prefer a C program (faster),
-# so one script is as good as another.  But avoid the broken or
-# incompatible versions:
-# SysV /etc/install, /usr/sbin/install
-# SunOS /usr/etc/install
-# IRIX /sbin/install
-# AIX /bin/install
-# AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
-# AFS /usr/afsws/bin/install, which mishandles nonexistent args
-# SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
-# ./install, which can be erroneously created by make from ./install.sh.
-echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
-echo "configure:1289: checking for a BSD compatible install" >&5
-if test -z "$INSTALL"; then
-if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
+	  fi
+        fi
+
+        if test "$CATOBJEXT" = "NONE"; then
+	  	  	  nls_cv_use_gnu_gettext=yes
+        fi
+      fi
+
+      if test "$nls_cv_use_gnu_gettext" = "yes"; then
+                INTLOBJS="\$(GETTOBJS)"
+        # Extract the first word of "msgfmt", so it can be a program name with args.
+set dummy msgfmt; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:3064: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_MSGFMT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-    IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS=":"
+  case "$MSGFMT" in
+  /*)
+  ac_cv_path_MSGFMT="$MSGFMT" # Let the user override the test with a path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
   for ac_dir in $PATH; do
-    # Account for people who put trailing slashes in PATH elements.
-    case "$ac_dir/" in
-    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
-    *)
-      # OSF1 and SCO ODT 3.0 have their own names for install.
-      # Don't use installbsd from OSF since it installs stuff as root
-      # by default.
-      for ac_prog in ginstall scoinst install; do
-        if test -f $ac_dir/$ac_prog; then
-	  if test $ac_prog = install &&
-            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
-	    # AIX install.  It has an incompatible calling convention.
-	    :
-	  else
-	    ac_cv_path_install="$ac_dir/$ac_prog -c"
-	    break 2
-	  fi
-	fi
-      done
-      ;;
-    esac
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      if test -z "`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`"; then
+	ac_cv_path_MSGFMT="$ac_dir/$ac_word"
+	break
+      fi
+    fi
   done
-  IFS="$ac_save_IFS"
-
-fi
-  if test "${ac_cv_path_install+set}" = set; then
-    INSTALL="$ac_cv_path_install"
-  else
-    # As a last resort, use the slow shell script.  We don't cache a
-    # path for INSTALL within a source directory, because that will
-    # break other packages using the cache if that directory is
-    # removed, or if the path is relative.
-    INSTALL="$ac_install_sh"
-  fi
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_path_MSGFMT" && ac_cv_path_MSGFMT="msgfmt"
+  ;;
+esac
+fi
+MSGFMT="$ac_cv_path_MSGFMT"
+if test -n "$MSGFMT"; then
+  echo "$ac_t""$MSGFMT" 1>&6
+else
+  echo "$ac_t""no" 1>&6
 fi
-echo "$ac_t""$INSTALL" 1>&6
-
-# Use test -z because SunOS4 sh mishandles braces in ${var-val}.
-# It thinks the first close brace ends the variable substitution.
-test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
-
-test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'
 
-test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
-
-
-for ac_prog in sed
-do
-# Extract the first word of "$ac_prog", so it can be a program name with args.
-set dummy $ac_prog; ac_word=$2
+        # Extract the first word of "gmsgfmt", so it can be a program name with args.
+set dummy gmsgfmt; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1347: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_regex_cmd'+set}'`\" = set"; then
+echo "configure:3098: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_GMSGFMT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  if test -n "$regex_cmd"; then
-  ac_cv_prog_regex_cmd="$regex_cmd" # Let the user override the test.
-else
+  case "$GMSGFMT" in
+  /*)
+  ac_cv_path_GMSGFMT="$GMSGFMT" # Let the user override the test with a path.
+  ;;
+  ?:/*)			 
+  ac_cv_path_GMSGFMT="$GMSGFMT" # Let the user override the test with a dos path.
+  ;;
+  *)
   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
   ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
+  for ac_dir in $ac_dummy; do 
     test -z "$ac_dir" && ac_dir=.
     if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_regex_cmd="$ac_prog"
+      ac_cv_path_GMSGFMT="$ac_dir/$ac_word"
       break
     fi
   done
   IFS="$ac_save_ifs"
+  test -z "$ac_cv_path_GMSGFMT" && ac_cv_path_GMSGFMT="$MSGFMT"
+  ;;
+esac
+fi
+GMSGFMT="$ac_cv_path_GMSGFMT"
+if test -n "$GMSGFMT"; then
+  echo "$ac_t""$GMSGFMT" 1>&6
+else
+  echo "$ac_t""no" 1>&6
 fi
-fi
-regex_cmd="$ac_cv_prog_regex_cmd"
-if test -n "$regex_cmd"; then
-  echo "$ac_t""$regex_cmd" 1>&6
+
+        # Extract the first word of "xgettext", so it can be a program name with args.
+set dummy xgettext; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:3134: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_XGETTEXT'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  case "$XGETTEXT" in
+  /*)
+  ac_cv_path_XGETTEXT="$XGETTEXT" # Let the user override the test with a path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
+  for ac_dir in $PATH; do
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      if test -z "`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`"; then
+	ac_cv_path_XGETTEXT="$ac_dir/$ac_word"
+	break
+      fi
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_path_XGETTEXT" && ac_cv_path_XGETTEXT=":"
+  ;;
+esac
+fi
+XGETTEXT="$ac_cv_path_XGETTEXT"
+if test -n "$XGETTEXT"; then
+  echo "$ac_t""$XGETTEXT" 1>&6
 else
   echo "$ac_t""no" 1>&6
 fi
 
-test -n "$regex_cmd" && break
-done
+        
+	USE_INCLUDED_LIBINTL=yes
+        CATOBJEXT=.gmo
+        INSTOBJEXT=.mo
+        DATADIRNAME=share
+	INTLDEPS='$(top_builddir)/intl/libintl.a'
+	INTLLIBS=$INTLDEPS
+	LIBS=`echo $LIBS | sed -e 's/-lintl//'`
+        nls_cv_header_intl=intl/libintl.h
+        nls_cv_header_libgt=intl/libgettext.h
+      fi
 
-if test x$regex_cmd = "x"; then
-  { echo "configure: error: error. sed is required to build the default menu file." 1>&2; exit 1; }
+            if test "$XGETTEXT" != ":"; then
+			if $XGETTEXT --omit-header /dev/null 2> /dev/null; then
+	  : ;
+	else
+	  echo "$ac_t""found xgettext program is not GNU xgettext; ignore it" 1>&6
+	  XGETTEXT=":"
+	fi
+      fi
+
+      # We need to process the po/ directory.
+      POSUB=po
+    else
+      DATADIRNAME=share
+      nls_cv_header_intl=intl/libintl.h
+      nls_cv_header_libgt=intl/libgettext.h
+    fi
+    
+    
+
+
+    # If this is used in GNU gettext we have to set USE_NLS to `yes'
+    # because some of the sources are only built for this goal.
+    if test "$PACKAGE" = gettext; then
+      USE_NLS=yes
+      USE_INCLUDED_LIBINTL=yes
+    fi
+
+                for lang in $ALL_LINGUAS; do
+      GMOFILES="$GMOFILES $lang.gmo"
+      POFILES="$POFILES $lang.po"
+    done
+
+        
+    
+    
+    
+    
+    
+    
+    
+    
+    
+    
+  
+
+   if test "x$CATOBJEXT" != "x"; then
+     if test "x$ALL_LINGUAS" = "x"; then
+       LINGUAS=
+     else
+       echo $ac_n "checking for catalogs to be installed""... $ac_c" 1>&6
+echo "configure:3227: checking for catalogs to be installed" >&5
+       NEW_LINGUAS=
+       for lang in ${LINGUAS=$ALL_LINGUAS}; do
+         case "$ALL_LINGUAS" in
+          *$lang*) NEW_LINGUAS="$NEW_LINGUAS $lang" ;;
+         esac
+       done
+       LINGUAS=$NEW_LINGUAS
+       echo "$ac_t""$LINGUAS" 1>&6
+     fi
+
+          if test -n "$LINGUAS"; then
+       for lang in $LINGUAS; do CATALOGS="$CATALOGS $lang$CATOBJEXT"; done
+     fi
+   fi
+
+            if test $ac_cv_header_locale_h = yes; then
+     INCLUDE_LOCALE_H="#include <locale.h>"
+   else
+     INCLUDE_LOCALE_H="\
+/* The system does not provide the header <locale.h>.  Take care yourself.  */"
+   fi
+   
+
+            test -d intl || mkdir intl
+   if test "$CATOBJEXT" = ".cat"; then
+     ac_safe=`echo "linux/version.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for linux/version.h""... $ac_c" 1>&6
+echo "configure:3255: checking for linux/version.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 3260 "configure"
+#include "confdefs.h"
+#include <linux/version.h>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:3265: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  msgformat=linux
+else
+  echo "$ac_t""no" 1>&6
+msgformat=xopen
 fi
 
+
+               sed -e '/^#/d' $srcdir/intl/$msgformat-msg.sed > intl/po2msg.sed
+   fi
+      sed -e '/^#.*[^\\]$/d' -e '/^#$/d' \
+     $srcdir/intl/po2tbl.sed.in > intl/po2tbl.sed
+
+            if test "$PACKAGE" = "gettext"; then
+     GT_NO="#NO#"
+     GT_YES=
+   else
+     GT_NO=
+     GT_YES="#YES#"
+   fi
+   
+   
+
+            MKINSTALLDIRS=
+   if test -n "$ac_aux_dir"; then
+     MKINSTALLDIRS="$ac_aux_dir/mkinstalldirs"
+   fi
+   if test -z "$MKINSTALLDIRS"; then
+     MKINSTALLDIRS="\$(top_srcdir)/mkinstalldirs"
+   fi
+   
+
+      l=
+   
+
+         test -d po || mkdir po
+   if test "x$srcdir" != "x."; then
+     if test "x`echo $srcdir | sed 's@/.*@@'`" = "x"; then
+       posrcprefix="$srcdir/"
+     else
+       posrcprefix="../$srcdir/"
+     fi
+   else
+     posrcprefix="../"
+   fi
+   rm -f po/POTFILES
+   sed -e "/^#/d" -e "/^\$/d" -e "s,.*,	$posrcprefix& \\\\," -e "\$s/\(.*\) \\\\/\1/" \
+	< $srcdir/po/POTFILES.in > po/POTFILES
+  
+
 echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:1381: checking for ANSI C header files" >&5
+echo "configure:3331: checking for ANSI C header files" >&5
 if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1386 "configure"
+#line 3336 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <stdarg.h>
@@ -1390,7 +3340,7 @@
 #include <float.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1394: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:3344: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -1407,7 +3357,7 @@
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 1411 "configure"
+#line 3361 "configure"
 #include "confdefs.h"
 #include <string.h>
 EOF
@@ -1425,7 +3375,7 @@
 if test $ac_cv_header_stdc = yes; then
   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 1429 "configure"
+#line 3379 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
@@ -1446,7 +3396,7 @@
   :
 else
   cat > conftest.$ac_ext <<EOF
-#line 1450 "configure"
+#line 3400 "configure"
 #include "confdefs.h"
 #include <ctype.h>
 #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
@@ -1457,7 +3407,7 @@
 exit (0); }
 
 EOF
-if { (eval echo configure:1461: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:3411: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   :
 else
@@ -1484,17 +3434,17 @@
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:1488: checking for $ac_hdr" >&5
+echo "configure:3438: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1493 "configure"
+#line 3443 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1498: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:3448: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -1521,12 +3471,12 @@
 done
 
 echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
-echo "configure:1525: checking whether time.h and sys/time.h may both be included" >&5
+echo "configure:3475: checking whether time.h and sys/time.h may both be included" >&5
 if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1530 "configure"
+#line 3480 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/time.h>
@@ -1535,7 +3485,7 @@
 struct tm *tp;
 ; return 0; }
 EOF
-if { (eval echo configure:1539: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3489: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_header_time=yes
 else
@@ -1559,12 +3509,12 @@
 for ac_func in basename
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:1563: checking for $ac_func" >&5
+echo "configure:3513: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1568 "configure"
+#line 3518 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -1587,7 +3537,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:1591: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3541: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -1609,7 +3559,7 @@
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for basename in -lgen""... $ac_c" 1>&6
-echo "configure:1613: checking for basename in -lgen" >&5
+echo "configure:3563: checking for basename in -lgen" >&5
 ac_lib_var=`echo gen'_'basename | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1617,7 +3567,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lgen  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1621 "configure"
+#line 3571 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -1628,7 +3578,7 @@
 basename()
 ; return 0; }
 EOF
-if { (eval echo configure:1632: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3582: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1654,12 +3604,12 @@
 for ac_func in setlocale sigaction strftime
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:1658: checking for $ac_func" >&5
+echo "configure:3608: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1663 "configure"
+#line 3613 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -1682,7 +3632,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:1686: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3636: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -1712,7 +3662,7 @@
 # Uses ac_ vars as temps to allow command line to override cache and checks.
 # --without-x overrides everything else, but does not touch the cache.
 echo $ac_n "checking for X""... $ac_c" 1>&6
-echo "configure:1716: checking for X" >&5
+echo "configure:3666: checking for X" >&5
 
 # Check whether --with-x or --without-x was given.
 if test "${with_x+set}" = set; then
@@ -1774,12 +3724,12 @@
 
   # First, try using that file with no special directory specified.
 cat > conftest.$ac_ext <<EOF
-#line 1778 "configure"
+#line 3728 "configure"
 #include "confdefs.h"
 #include <$x_direct_test_include>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1783: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:3733: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -1848,14 +3798,14 @@
   ac_save_LIBS="$LIBS"
   LIBS="-l$x_direct_test_library $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1852 "configure"
+#line 3802 "configure"
 #include "confdefs.h"
 
 int main() {
 ${x_direct_test_function}()
 ; return 0; }
 EOF
-if { (eval echo configure:1859: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3809: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   LIBS="$ac_save_LIBS"
 # We can link X programs with no special library path.
@@ -1961,17 +3911,17 @@
     case "`(uname -sr) 2>/dev/null`" in
     "SunOS 5"*)
       echo $ac_n "checking whether -R must be followed by a space""... $ac_c" 1>&6
-echo "configure:1965: checking whether -R must be followed by a space" >&5
+echo "configure:3915: checking whether -R must be followed by a space" >&5
       ac_xsave_LIBS="$LIBS"; LIBS="$LIBS -R$x_libraries"
       cat > conftest.$ac_ext <<EOF
-#line 1968 "configure"
+#line 3918 "configure"
 #include "confdefs.h"
 
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:1975: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3925: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_R_nospace=yes
 else
@@ -1987,14 +3937,14 @@
       else
 	LIBS="$ac_xsave_LIBS -R $x_libraries"
 	cat > conftest.$ac_ext <<EOF
-#line 1991 "configure"
+#line 3941 "configure"
 #include "confdefs.h"
 
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:1998: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3948: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_R_space=yes
 else
@@ -2026,7 +3976,7 @@
     # libraries were built with DECnet support.  And karl@cs.umb.edu says
     # the Alpha needs dnet_stub (dnet does not exist).
     echo $ac_n "checking for dnet_ntoa in -ldnet""... $ac_c" 1>&6
-echo "configure:2030: checking for dnet_ntoa in -ldnet" >&5
+echo "configure:3980: checking for dnet_ntoa in -ldnet" >&5
 ac_lib_var=`echo dnet'_'dnet_ntoa | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2034,7 +3984,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-ldnet  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2038 "configure"
+#line 3988 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2045,7 +3995,7 @@
 dnet_ntoa()
 ; return 0; }
 EOF
-if { (eval echo configure:2049: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3999: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -2067,7 +4017,7 @@
 
     if test $ac_cv_lib_dnet_dnet_ntoa = no; then
       echo $ac_n "checking for dnet_ntoa in -ldnet_stub""... $ac_c" 1>&6
-echo "configure:2071: checking for dnet_ntoa in -ldnet_stub" >&5
+echo "configure:4021: checking for dnet_ntoa in -ldnet_stub" >&5
 ac_lib_var=`echo dnet_stub'_'dnet_ntoa | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2075,7 +4025,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-ldnet_stub  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2079 "configure"
+#line 4029 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2086,7 +4036,7 @@
 dnet_ntoa()
 ; return 0; }
 EOF
-if { (eval echo configure:2090: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4040: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -2115,12 +4065,12 @@
     # The nsl library prevents programs from opening the X display
     # on Irix 5.2, according to dickey@clark.net.
     echo $ac_n "checking for gethostbyname""... $ac_c" 1>&6
-echo "configure:2119: checking for gethostbyname" >&5
+echo "configure:4069: checking for gethostbyname" >&5
 if eval "test \"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2124 "configure"
+#line 4074 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char gethostbyname(); below.  */
@@ -2143,7 +4093,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:2147: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4097: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_gethostbyname=yes"
 else
@@ -2164,7 +4114,7 @@
 
     if test $ac_cv_func_gethostbyname = no; then
       echo $ac_n "checking for gethostbyname in -lnsl""... $ac_c" 1>&6
-echo "configure:2168: checking for gethostbyname in -lnsl" >&5
+echo "configure:4118: checking for gethostbyname in -lnsl" >&5
 ac_lib_var=`echo nsl'_'gethostbyname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2172,7 +4122,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2176 "configure"
+#line 4126 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2183,7 +4133,7 @@
 gethostbyname()
 ; return 0; }
 EOF
-if { (eval echo configure:2187: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4137: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -2213,12 +4163,12 @@
     # -lsocket must be given before -lnsl if both are needed.
     # We assume that if connect needs -lnsl, so does gethostbyname.
     echo $ac_n "checking for connect""... $ac_c" 1>&6
-echo "configure:2217: checking for connect" >&5
+echo "configure:4167: checking for connect" >&5
 if eval "test \"`echo '$''{'ac_cv_func_connect'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2222 "configure"
+#line 4172 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char connect(); below.  */
@@ -2241,7 +4191,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:2245: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4195: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_connect=yes"
 else
@@ -2262,7 +4212,7 @@
 
     if test $ac_cv_func_connect = no; then
       echo $ac_n "checking for connect in -lsocket""... $ac_c" 1>&6
-echo "configure:2266: checking for connect in -lsocket" >&5
+echo "configure:4216: checking for connect in -lsocket" >&5
 ac_lib_var=`echo socket'_'connect | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2270,7 +4220,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket $X_EXTRA_LIBS $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2274 "configure"
+#line 4224 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2281,7 +4231,7 @@
 connect()
 ; return 0; }
 EOF
-if { (eval echo configure:2285: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4235: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -2305,12 +4255,12 @@
 
     # gomez@mi.uni-erlangen.de says -lposix is necessary on A/UX.
     echo $ac_n "checking for remove""... $ac_c" 1>&6
-echo "configure:2309: checking for remove" >&5
+echo "configure:4259: checking for remove" >&5
 if eval "test \"`echo '$''{'ac_cv_func_remove'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2314 "configure"
+#line 4264 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char remove(); below.  */
@@ -2333,7 +4283,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:2337: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4287: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_remove=yes"
 else
@@ -2354,7 +4304,7 @@
 
     if test $ac_cv_func_remove = no; then
       echo $ac_n "checking for remove in -lposix""... $ac_c" 1>&6
-echo "configure:2358: checking for remove in -lposix" >&5
+echo "configure:4308: checking for remove in -lposix" >&5
 ac_lib_var=`echo posix'_'remove | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2362,7 +4312,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lposix  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2366 "configure"
+#line 4316 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2373,7 +4323,7 @@
 remove()
 ; return 0; }
 EOF
-if { (eval echo configure:2377: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4327: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -2397,12 +4347,12 @@
 
     # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
     echo $ac_n "checking for shmat""... $ac_c" 1>&6
-echo "configure:2401: checking for shmat" >&5
+echo "configure:4351: checking for shmat" >&5
 if eval "test \"`echo '$''{'ac_cv_func_shmat'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2406 "configure"
+#line 4356 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char shmat(); below.  */
@@ -2425,7 +4375,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:2429: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4379: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_shmat=yes"
 else
@@ -2446,7 +4396,7 @@
 
     if test $ac_cv_func_shmat = no; then
       echo $ac_n "checking for shmat in -lipc""... $ac_c" 1>&6
-echo "configure:2450: checking for shmat in -lipc" >&5
+echo "configure:4400: checking for shmat in -lipc" >&5
 ac_lib_var=`echo ipc'_'shmat | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2454,7 +4404,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lipc  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2458 "configure"
+#line 4408 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2465,7 +4415,7 @@
 shmat()
 ; return 0; }
 EOF
-if { (eval echo configure:2469: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4419: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -2498,7 +4448,7 @@
   # libraries we check for below, so use a different variable.
   #  --interran@uluru.Stanford.EDU, kb@cs.umb.edu.
   echo $ac_n "checking for IceConnectionNumber in -lICE""... $ac_c" 1>&6
-echo "configure:2502: checking for IceConnectionNumber in -lICE" >&5
+echo "configure:4452: checking for IceConnectionNumber in -lICE" >&5
 ac_lib_var=`echo ICE'_'IceConnectionNumber | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2506,7 +4456,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lICE $X_EXTRA_LIBS $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2510 "configure"
+#line 4460 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2517,7 +4467,7 @@
 IceConnectionNumber()
 ; return 0; }
 EOF
-if { (eval echo configure:2521: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4471: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -2552,7 +4502,7 @@
 LIBS="$LIBS $X_LIBS"
 
 echo $ac_n "checking for XOpenDisplay in -lX11""... $ac_c" 1>&6
-echo "configure:2556: checking for XOpenDisplay in -lX11" >&5
+echo "configure:4506: checking for XOpenDisplay in -lX11" >&5
 ac_lib_var=`echo X11'_'XOpenDisplay | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2560,7 +4510,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lX11  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2564 "configure"
+#line 4514 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2571,7 +4521,7 @@
 XOpenDisplay()
 ; return 0; }
 EOF
-if { (eval echo configure:2575: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4525: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -2600,7 +4550,7 @@
 
 SHAPE=""
 echo $ac_n "checking whether to build support for the XShape extension""... $ac_c" 1>&6
-echo "configure:2604: checking whether to build support for the XShape extension" >&5
+echo "configure:4554: checking whether to build support for the XShape extension" >&5
 # Check whether --enable-shape or --disable-shape was given.
 if test "${enable_shape+set}" = set; then
   enableval="$enable_shape"
@@ -2612,7 +4562,7 @@
 if test x$enableval = "xyes"; then
   echo "$ac_t""yes" 1>&6
   echo $ac_n "checking for XShapeCombineShape in -lXext""... $ac_c" 1>&6
-echo "configure:2616: checking for XShapeCombineShape in -lXext" >&5
+echo "configure:4566: checking for XShapeCombineShape in -lXext" >&5
 ac_lib_var=`echo Xext'_'XShapeCombineShape | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2620,7 +4570,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lXext  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2624 "configure"
+#line 4574 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2631,7 +4581,7 @@
 XShapeCombineShape()
 ; return 0; }
 EOF
-if { (eval echo configure:2635: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4585: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -2647,9 +4597,9 @@
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   echo $ac_n "checking for X11/extensions/shape.h""... $ac_c" 1>&6
-echo "configure:2651: checking for X11/extensions/shape.h" >&5
+echo "configure:4601: checking for X11/extensions/shape.h" >&5
     cat > conftest.$ac_ext <<EOF
-#line 2653 "configure"
+#line 4603 "configure"
 #include "confdefs.h"
 #include <X11/Xlib.h>
 #include <X11/Xutil.h>
@@ -2659,7 +4609,7 @@
 long foo = ShapeSet
 ; return 0; }
 EOF
-if { (eval echo configure:2663: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4613: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   echo "$ac_t""yes" 1>&6
       SHAPE="-DSHAPE"; Xext_lib="-lXext"
@@ -2685,7 +4635,7 @@
 
 KDE=""
 echo $ac_n "checking whether to build support for KDE""... $ac_c" 1>&6
-echo "configure:2689: checking whether to build support for KDE" >&5
+echo "configure:4639: checking whether to build support for KDE" >&5
 # Check whether --enable-kde or --disable-kde was given.
 if test "${enable_kde+set}" = set; then
   enableval="$enable_kde"
@@ -2704,7 +4654,7 @@
 
 SLIT=""
 echo $ac_n "checking whether to include the Slit""... $ac_c" 1>&6
-echo "configure:2708: checking whether to include the Slit" >&5
+echo "configure:4658: checking whether to include the Slit" >&5
 # Check whether --enable-slit or --disable-slit was given.
 if test "${enable_slit+set}" = set; then
   enableval="$enable_slit"
@@ -2725,7 +4675,7 @@
 
 INTERLACE=""
 echo $ac_n "checking whether to include interlacing image code""... $ac_c" 1>&6
-echo "configure:2729: checking whether to include interlacing image code" >&5
+echo "configure:4679: checking whether to include interlacing image code" >&5
 # Check whether --enable-slit or --disable-slit was given.
 if test "${enable_slit+set}" = set; then
   enableval="$enable_slit"
@@ -2744,12 +4694,12 @@
 
    
 echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
-echo "configure:2748: checking return type of signal handlers" >&5
+echo "configure:4698: checking return type of signal handlers" >&5
 if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2753 "configure"
+#line 4703 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <signal.h>
@@ -2766,7 +4716,7 @@
 int i;
 ; return 0; }
 EOF
-if { (eval echo configure:2770: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4720: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_type_signal=void
 else
@@ -2786,7 +4736,7 @@
 
 
 echo $ac_n "checking whether to enable maintainer-specific portions of Makefiles""... $ac_c" 1>&6
-echo "configure:2790: checking whether to enable maintainer-specific portions of Makefiles" >&5
+echo "configure:4740: checking whether to enable maintainer-specific portions of Makefiles" >&5
     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.
 if test "${enable_maintainer_mode+set}" = set; then
   enableval="$enable_maintainer_mode"
@@ -2924,7 +4874,7 @@
 ac_given_srcdir=$srcdir
 ac_given_INSTALL="$INSTALL"
 
-trap 'rm -fr `echo "Makefile src/Makefile util/Makefile data/Makefile data/styles/Makefile version.h config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
+trap 'rm -fr `echo "Makefile src/Makefile util/Makefile data/Makefile intl/Makefile data/styles/Makefile po/Makefile.in version.h  config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
 EOF
 cat >> $CONFIG_STATUS <<EOF
 
@@ -2971,6 +4921,29 @@
 s%@CPP@%$CPP%g
 s%@CXX@%$CXX%g
 s%@regex_cmd@%$regex_cmd%g
+s%@RANLIB@%$RANLIB%g
+s%@ALLOCA@%$ALLOCA%g
+s%@USE_NLS@%$USE_NLS%g
+s%@MSGFMT@%$MSGFMT%g
+s%@GMSGFMT@%$GMSGFMT%g
+s%@XGETTEXT@%$XGETTEXT%g
+s%@GENCAT@%$GENCAT%g
+s%@USE_INCLUDED_LIBINTL@%$USE_INCLUDED_LIBINTL%g
+s%@CATALOGS@%$CATALOGS%g
+s%@CATOBJEXT@%$CATOBJEXT%g
+s%@DATADIRNAME@%$DATADIRNAME%g
+s%@GMOFILES@%$GMOFILES%g
+s%@INSTOBJEXT@%$INSTOBJEXT%g
+s%@INTLDEPS@%$INTLDEPS%g
+s%@INTLLIBS@%$INTLLIBS%g
+s%@INTLOBJS@%$INTLOBJS%g
+s%@POFILES@%$POFILES%g
+s%@POSUB@%$POSUB%g
+s%@INCLUDE_LOCALE_H@%$INCLUDE_LOCALE_H%g
+s%@GT_NO@%$GT_NO%g
+s%@GT_YES@%$GT_YES%g
+s%@MKINSTALLDIRS@%$MKINSTALLDIRS%g
+s%@l@%$l%g
 s%@X_CFLAGS@%$X_CFLAGS%g
 s%@X_PRE_LIBS@%$X_PRE_LIBS%g
 s%@X_LIBS@%$X_LIBS%g
@@ -3023,7 +4996,7 @@
 
 cat >> $CONFIG_STATUS <<EOF
 
-CONFIG_FILES=\${CONFIG_FILES-"Makefile src/Makefile util/Makefile data/Makefile data/styles/Makefile version.h"}
+CONFIG_FILES=\${CONFIG_FILES-"Makefile src/Makefile util/Makefile data/Makefile intl/Makefile data/styles/Makefile po/Makefile.in version.h "}
 EOF
 cat >> $CONFIG_STATUS <<\EOF
 for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
@@ -3190,11 +5163,60 @@
 fi; done
 
 EOF
+
+cat >> $CONFIG_STATUS <<EOF
+ac_sources="$nls_cv_header_libgt"
+ac_dests="$nls_cv_header_intl"
+EOF
+
+cat >> $CONFIG_STATUS <<\EOF
+srcdir=$ac_given_srcdir
+while test -n "$ac_sources"; do
+  set $ac_dests; ac_dest=$1; shift; ac_dests=$*
+  set $ac_sources; ac_source=$1; shift; ac_sources=$*
+
+  echo "linking $srcdir/$ac_source to $ac_dest"
+
+  if test ! -r $srcdir/$ac_source; then
+    { echo "configure: error: $srcdir/$ac_source: File not found" 1>&2; exit 1; }
+  fi
+  rm -f $ac_dest
+
+  # Make relative symlinks.
+  # Remove last slash and all that follows it.  Not all systems have dirname.
+  ac_dest_dir=`echo $ac_dest|sed 's%/[^/][^/]*$%%'`
+  if test "$ac_dest_dir" != "$ac_dest" && test "$ac_dest_dir" != .; then
+    # The dest file is in a subdirectory.
+    test ! -d "$ac_dest_dir" && mkdir "$ac_dest_dir"
+    ac_dest_dir_suffix="/`echo $ac_dest_dir|sed 's%^\./%%'`"
+    # A "../" for each directory in $ac_dest_dir_suffix.
+    ac_dots=`echo $ac_dest_dir_suffix|sed 's%/[^/]*%../%g'`
+  else
+    ac_dest_dir_suffix= ac_dots=
+  fi
+
+  case "$srcdir" in
+  [/$]*) ac_rel_source="$srcdir/$ac_source" ;;
+  *) ac_rel_source="$ac_dots$srcdir/$ac_source" ;;
+  esac
+
+  # Make a symlink if possible; otherwise try a hard link.
+  if ln -s $ac_rel_source $ac_dest 2>/dev/null ||
+    ln $srcdir/$ac_source $ac_dest; then :
+  else
+    { echo "configure: error: can not link $ac_dest to $srcdir/$ac_source" 1>&2; exit 1; }
+  fi
+done
+EOF
 cat >> $CONFIG_STATUS <<EOF
 
 
+
 EOF
 cat >> $CONFIG_STATUS <<\EOF
+case "$CONFIG_FILES" in *po/Makefile.in*)
+        sed -e "/POTFILES =/r po/POTFILES" po/Makefile.in > po/Makefile
+      esac
 test -z "$CONFIG_HEADERS" || echo timestamp > stamp-h
 
 exit 0
--- blackbox-0.51.3.orig/src/Basemenu.cc
+++ blackbox-0.51.3/src/Basemenu.cc
@@ -238,8 +238,8 @@
   if (title_vis)
     menu.item_w = (menu.bevel_w * 2) +
       XTextWidth(screen->getTitleFont(),
-		 ((menu.label) ? menu.label : "Blackbox Menu"),
-		 strlen(((menu.label) ? menu.label : "Blackbox Menu")));
+		 ((menu.label) ? menu.label : _("Blackbox Menu")),
+		 strlen(((menu.label) ? menu.label : _("Blackbox Menu"))));
   else
     menu.item_w = 1;
   
@@ -328,8 +328,8 @@
 	XDrawString(display, menu.title, screen->getMenuTitleGC(),
 		    menu.bevel_w, screen->getTitleFont()->ascent +
 		    menu.bevel_w,
-		    ((menu.label) ? menu.label : "Blackbox Menu"),
-		    strlen(((menu.label) ? menu.label : "Blackbox Menu")));
+		    ((menu.label) ? menu.label : _("Blackbox Menu")),
+		    strlen(((menu.label) ? menu.label : _("Blackbox Menu"))));
 	break;
       }
       
@@ -337,14 +337,14 @@
       {
 	int off = menu.bevel_w +
 	  XTextWidth(screen->getTitleFont(),
-		     ((menu.label) ? menu.label : "Blackbox Menu"),
+		     ((menu.label) ? menu.label : _("Blackbox Menu")),
 		     strlen(((menu.label) ? menu.label :
-			     "Blackbox Menu")));
+			     _("Blackbox Menu"))));
 	XDrawString(display, menu.title, screen->getMenuTitleGC(),
 		    menu.width - off,
 		    screen->getTitleFont()->ascent + menu.bevel_w,
-		    ((menu.label) ? menu.label : "Blackbox Menu"),
-		    strlen(((menu.label) ? menu.label : "Blackbox Menu")));
+		    ((menu.label) ? menu.label : _("Blackbox Menu")),
+		    strlen(((menu.label) ? menu.label : _("Blackbox Menu"))));
 	break;
       }
       
@@ -352,13 +352,13 @@
       {
 	int ins = (menu.width -
 		   (XTextWidth(screen->getTitleFont(),
-			       ((menu.label) ? menu.label : "Blackbox Menu"),
+			       ((menu.label) ? menu.label : _("Blackbox Menu")),
 			       strlen(((menu.label) ? menu.label :
-				       "Blackbox Menu"))))) / 2;
+				       _("Blackbox Menu")))))) / 2;
 	XDrawString(display, menu.title, screen->getMenuTitleGC(), ins,
 		    screen->getTitleFont()->ascent + menu.bevel_w,
-		    ((menu.label) ? menu.label : "Blackbox Menu"),
-		    strlen(((menu.label) ? menu.label : "Blackbox Menu")));
+		    ((menu.label) ? menu.label : _("Blackbox Menu")),
+		    strlen(((menu.label) ? menu.label : _("Blackbox Menu"))));
 	break;
       }
     }
@@ -777,22 +777,22 @@
 	XDrawString(display, menu.title, screen->getMenuTitleGC(),
 		    menu.bevel_w, screen->getTitleFont()->ascent +
 		    menu.bevel_w,
-		    ((menu.label) ? menu.label : "Blackbox Menu"),
-		    strlen(((menu.label) ? menu.label : "Blackbox Menu")));
+		    ((menu.label) ? menu.label : _("Blackbox Menu")),
+		    strlen(((menu.label) ? menu.label : _("Blackbox Menu"))));
 	break;
       }
 
     case BScreen::RightJustify:
       {
 	int off = XTextWidth(screen->getTitleFont(),
-			     ((menu.label) ? menu.label : "Blackbox Menu"),
+			     ((menu.label) ? menu.label : _("Blackbox Menu")),
 			     strlen(((menu.label) ? menu.label :
-				     "Blackbox Menu"))) + menu.bevel_w;
+				     _("Blackbox Menu")))) + menu.bevel_w;
 	XDrawString(display, menu.title, screen->getMenuTitleGC(),
 		    menu.width - off,
 		    screen->getTitleFont()->ascent + menu.bevel_w,
-		    ((menu.label) ? menu.label : "Blackbox Menu"),
-		    strlen(((menu.label) ? menu.label : "Blackbox Menu")));
+		    ((menu.label) ? menu.label : _("Blackbox Menu")),
+		    strlen(((menu.label) ? menu.label : _("Blackbox Menu"))));
 	break;
       }
       
@@ -800,13 +800,13 @@
       {
 	int ins = (menu.width -
 		   (XTextWidth(screen->getTitleFont(),
-			       ((menu.label) ? menu.label : "Blackbox Menu"),
+			       ((menu.label) ? menu.label : _("Blackbox Menu")),
 			       strlen(((menu.label) ? menu.label :
-				       "Blackbox Menu"))))) / 2;
-	XDrawString(display, menu.title, screen->getMenuTitleGC(), ins,
+				       _("Blackbox Menu")))))) / 2;
+	XDrawString(display, menu.title, screen->getMenuTitleGC(),ins,
 		    screen->getTitleFont()->ascent + menu.bevel_w,
-		    ((menu.label) ? menu.label : "Blackbox Menu"),
-		    strlen(((menu.label) ? menu.label : "Blackbox Menu")));
+		    ((menu.label) ? menu.label : _("Blackbox Menu")),
+		    strlen(((menu.label) ? menu.label : _("Blackbox Menu"))));
 	break;
       }
     }
--- blackbox-0.51.3.orig/src/Windowmenu.cc
+++ blackbox-0.51.3/src/Windowmenu.cc
@@ -48,19 +48,19 @@
   defaultMenu();
 
   sendToMenu = new SendtoWorkspaceMenu(win, bb);
-  insert("Send To ...", sendToMenu);
+  insert(_("Send To ..."), sendToMenu);
   if (window->hasTitlebar())
-    insert("(Un)Shade", BScreen::WindowShade);
+    insert(_("(Un)Shade"), BScreen::WindowShade);
   if (window->isIconifiable())
-    insert("Iconify", BScreen::WindowIconify);
+    insert(_("Iconify"), BScreen::WindowIconify);
   if (window->isMaximizable())
-    insert("(Un)Maximize", BScreen::WindowMaximize);  
-  insert("Raise", BScreen::WindowRaise);
-  insert("Lower", BScreen::WindowLower);
-  insert("(Un)Stick", BScreen::WindowStick);
-  insert("Kill Client", BScreen::WindowKill);
+    insert(_("(Un)Maximize"), BScreen::WindowMaximize);  
+  insert(_("Raise"), BScreen::WindowRaise);
+  insert(_("Lower"), BScreen::WindowLower);
+  insert(_("(Un)Stick"), BScreen::WindowStick);
+  insert(_("Kill Client"), BScreen::WindowKill);
   if (window->isClosable())
-    insert("Close", BScreen::WindowClose);
+    insert(_("Close"), BScreen::WindowClose);
   
   update();
 }
@@ -139,7 +139,7 @@
   }
 
   if (window->isClosable())
-    insert("Close", BScreen::WindowClose);
+    insert(_("Close"), BScreen::WindowClose);
       
   update();
 }
@@ -183,7 +183,7 @@
       remove(0);
   
   for (i = 0; i < screen->getCount(); ++i)
-    insert(screen->getWorkspace(i)->getName());
+    insert(_(screen->getWorkspace(i)->getName()));
   
   Basemenu::update();
 }
--- blackbox-0.51.3.orig/src/Workspace.cc
+++ blackbox-0.51.3/src/Workspace.cc
@@ -338,7 +338,7 @@
     
     name = new char[32];
     if (name)
-      sprintf(name, "Workspace %d", id + 1);
+      sprintf(name, _("Workspace %d"), id + 1);
   }
 
   clientmenu->setLabel(name);
--- blackbox-0.51.3.orig/src/Workspacemenu.cc
+++ blackbox-0.51.3/src/Workspacemenu.cc
@@ -43,10 +43,10 @@
   setHidable(True);
   defaultMenu();
   
-  setLabel("Workspaces");
+  setLabel(_("Workspaces"));
 
-  insert("New Workspace");
-  insert("Remove Last");
+  insert(_("New Workspace"));
+  insert(_("Remove Last"));
 }
 
 
--- blackbox-0.51.3.orig/src/blackbox.cc
+++ blackbox-0.51.3/src/blackbox.cc
@@ -179,18 +179,18 @@
     break;
     
   default:
-    fprintf(stderr, "%s:  signal %d caught\n", __FILE__, sig);
+    fprintf(stderr, _("%s:  signal %d caught\n"), __FILE__, sig);
 
     if (! blackbox->isStartup() && ! re_enter) {
       internal_error = True;
 
       re_enter = 1;
-      fprintf(stderr, "shutting down\n");
+      fprintf(stderr, _("shutting down\n"));
       blackbox->shutdown();
     }
 
     if (sig != SIGTERM && sig != SIGINT) {
-      fprintf(stderr, "aborting... dumping core\n");
+      fprintf(stderr, _("aborting... dumping core\n"));
       abort();
     }
     
@@ -205,7 +205,7 @@
 static int handleXErrors(Display *d, XErrorEvent *e) {
   char errtxt[128];
   XGetErrorText(d, e->error_code, errtxt, 128);
-  fprintf(stderr, "%s:  X error: %s(%d) opcodes %d/%d\n", __FILE__, errtxt,
+  fprintf(stderr, _("%s:  X error: %s(%d) opcodes %d/%d\n"), __FILE__, errtxt,
           e->error_code, e->request_code, e->minor_code);
 
   if (internal_error) abort();
@@ -270,6 +270,15 @@
   argv = m_argv;
   rc_file = rc;
 
+  bzero(lang, 3);
+  #ifdef HAVE_SETLOCALE
+  char* lang_name = setlocale(LC_ALL, "");
+  if (lang_name)
+  {
+    strncat(lang, lang_name, 2);
+  }
+  #endif
+
   no_focus = auto_raise_pending = _reconfigure = _reread_menu = False;
 
   resource.menu_file = resource.style_file = (char *) 0;
@@ -355,7 +364,7 @@
 
   if (! screenList->count()) {
     fprintf(stderr,
-            "Blackbox::Blackbox: no managable screens found, aborting.\n");
+            _("Blackbox::Blackbox: no managable screens found, aborting.\n"));
     
     ::exit(3);
   }
@@ -474,7 +483,7 @@
   if (internal_error) {
     shutdown();
 
-    fprintf(stderr, "aborting... dumping core\n");
+    fprintf(stderr, _("aborting... dumping core\n"));
     abort();
   }
 }
@@ -1594,6 +1603,15 @@
     sprintf(resource.menu_file, "%s", DEFAULTMENU);
   }
   
+  int len = strlen(resource.menu_file);
+  resource.nls_menu_file = new char[len + 3 + 1];
+  memset(resource.nls_menu_file, 0, len + 3 + 1);
+  strncpy(resource.nls_menu_file, resource.menu_file, len);
+  if (*lang) {
+      strncat( resource.nls_menu_file, ".", 1 );
+      strncat( resource.nls_menu_file, lang, 2 ); /* Get NLS menu file name */
+  }
+
   if (XrmGetResource(database, "session.imageDither", "Session.ImageDither",
 		     &value_type, &value)) {
     if (! strncasecmp("true", value.addr, value.size))
@@ -1869,9 +1887,9 @@
 
     screen->saveStrftimeFormat(format);
   } else {
-    int len = strlen("%I:%M %p");
+    int len = strlen(_("%I:%M %p"));
     format = new char[len + 1];
-    sprintf (format, "%%I:%%M %%p");
+    sprintf (format, _("%%I:%%M %%p"));
 
     screen->saveStrftimeFormat(format);
   }
--- blackbox-0.51.3.orig/src/main.cc
+++ blackbox-0.51.3/src/main.cc
@@ -61,6 +61,12 @@
  
 #ifdef    HAVE_SETLOCALE
   setlocale(LC_ALL, "");
+  bindtextdomain (PACKAGE, LOCALEDIR);
+  textdomain (PACKAGE);
+
+  if (!XSupportsLocale()) {
+    fprintf(stderr,_("Blackbox: X library does not support locale\n"));
+  }
 #endif // HAVE_SETLOCALE
 
   int i;
@@ -80,7 +86,7 @@
       // set by the environment variable DISPLAY
 
       if ((++i) >= argc) {
-	fprintf(stderr, "error: '-display' requires an argument\n");
+	fprintf(stderr, _("error: '-display' requires an argument\n"));
 
 	::exit(1);
       }
@@ -91,22 +97,22 @@
       
       if (putenv(dtmp)) {
 	fprintf(stderr,
-		"warning: couldn't set environment variable 'DISPLAY'\n");
+		_("warning: couldn't set environment variable 'DISPLAY'\n"));
 	perror("putenv()");
       }
     } else if (! strcmp(argv[i], "-version")) {
       // print current version string
-      printf("Blackbox %s : (c) 1997 - 1999 Brad Hughes\n\n",
+      printf(_("Blackbox %s : (c) 1997 - 1999 Brad Hughes\n\n"),
              __blackbox_version);
 
       ::exit(0);
     } else if (! strcmp(argv[i], "-help")) {
       // print program usage and command line options
-      printf("Blackbox %s : (c) 1997 - 1999 Brad Hughes\n\n"
+      printf(_("Blackbox %s : (c) 1997 - 1999 Brad Hughes\n\n"
              "  -display <string>\tuse display connection.\n"
              "  -rc <string>\t\tuse alternate resource file.\n"
 	     "  -version\t\tdisplay version and exit.\n"
-             "  -help\t\t\tdisplay this help text and exit.\n\n",
+             "  -help\t\t\tdisplay this help text and exit.\n\n"),
 	     __blackbox_version);
 
       ::exit(0);
--- blackbox-0.51.3.orig/src/blackbox.hh
+++ blackbox-0.51.3/src/blackbox.hh
@@ -23,6 +23,7 @@
 
 #include <X11/Xlib.h>
 #include <X11/Xresource.h>
+#include <X11/Xlocale.h>
 
 class Basemenu;
 class BlackboxWindow;
@@ -42,6 +43,7 @@
 #include "BaseDisplay.hh"
 #include "Image.hh"
 #include "LinkedList.hh"
+#include "fontset_wrapper.hh"
 
 #ifdef    HAVE_STDIO_H
 # include <stdio.h>
@@ -86,7 +88,7 @@
     Bool image_dither, colormap_focus_follows_mouse, opaque_move;
     Time double_click_interval, auto_raise_delay_sec, auto_raise_delay_usec;
     
-    char *menu_file, *style_file;
+    char *menu_file, *nls_menu_file, *style_file;
     int colors_per_channel;
     unsigned long wkspc_change_mask, cycle_mask;
   } resource;
@@ -130,6 +132,7 @@
 
   void do_reconfigure(void);
 
+  char lang[3];
 
 public:
   Blackbox(int, char **, char * = 0, char * = 0);
@@ -182,6 +185,7 @@
 
   char *getStyleFilename(void) { return resource.style_file; }
   char *getMenuFilename(void)  { return resource.menu_file; }
+  char *getNLSMenuFilename(void)  { return resource.nls_menu_file; }
 
   int getColorsPerChannel(void) { return resource.colors_per_channel; }
 
@@ -222,5 +226,24 @@
 #endif // HAVE_STRFTIME
 };
 
+/* Take care of NLS matters.  */
+
+#if HAVE_LOCALE_H
+# include <locale.h>
+#endif
+#if !HAVE_SETLOCALE
+# define setlocale(Category, Locale) /* empty */
+#endif
+
+#if ENABLE_NLS
+# include <libintl.h>
+# define _(Text) gettext (Text)
+#else
+# undef bindtextdomain
+# define bindtextdomain(Domain, Directory) /* empty */
+# undef textdomain
+# define textdomain(Domain) /* empty */
+# define _(Text) Text
+#endif
 
 #endif // __blackbox_hh
--- blackbox-0.51.3.orig/src/Makefile.in
+++ blackbox-0.51.3/src/Makefile.in
@@ -42,7 +42,6 @@
 bindir = @bindir@
 sbindir = @sbindir@
 libexecdir = @libexecdir@
-datadir = @datadir@
 sysconfdir = @sysconfdir@
 sharedstatedir = @sharedstatedir@
 localstatedir = @localstatedir@
@@ -77,33 +76,56 @@
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
+CATALOGS = @CATALOGS@
+CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CXX = @CXX@
+DATADIRNAME = @DATADIRNAME@
+GENCAT = @GENCAT@
+GMOFILES = @GMOFILES@
+GMSGFMT = @GMSGFMT@
+GT_NO = @GT_NO@
+GT_YES = @GT_YES@
+INCLUDE_LOCALE_H = @INCLUDE_LOCALE_H@
+INSTOBJEXT = @INSTOBJEXT@
 INTERLACE = @INTERLACE@
+INTLDEPS = @INTLDEPS@
+INTLLIBS = @INTLLIBS@
+INTLOBJS = @INTLOBJS@
 KDE = @KDE@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
+MKINSTALLDIRS = @MKINSTALLDIRS@
+MSGFMT = @MSGFMT@
 PACKAGE = @PACKAGE@
+POFILES = @POFILES@
+POSUB = @POSUB@
+RANLIB = @RANLIB@
 SHAPE = @SHAPE@
 SLIT = @SLIT@
+USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
+USE_NLS = @USE_NLS@
 VERSION = @VERSION@
+l = @l@
 regex_cmd = @regex_cmd@
 
-CPPFLAGS = @CPPFLAGS@ @SHAPE@ @KDE@ @SLIT@ @INTERLACE@ -DDEFAULTMENU=\"$(pkgdatadir)/menu\" -DDEFAULTSTYLE=\"$(pkgdatadir)/styles/default\"
+CPPFLAGS = @CPPFLAGS@ @SHAPE@ @KDE@ @SLIT@ @INTERLACE@ -DDEFAULTMENU=\"/etc/X11/blackbox/blackbox-menu\" -DDEFAULTSTYLE=\"$(pkgdatadir)/styles/default\"
 
 
 bin_PROGRAMS = blackbox
 
-blackbox_SOURCES = BaseDisplay.cc Basemenu.cc Clientmenu.cc Icon.cc Image.cc LinkedList.cc Rootmenu.cc Screen.cc Slit.cc Toolbar.cc Window.cc Windowmenu.cc Workspace.cc Workspacemenu.cc blackbox.cc main.cc
+blackbox_SOURCES = BaseDisplay.cc Basemenu.cc Clientmenu.cc Icon.cc Image.cc LinkedList.cc Rootmenu.cc Screen.cc Slit.cc Toolbar.cc Window.cc Windowmenu.cc Workspace.cc Workspacemenu.cc blackbox.cc main.cc fontset_wrapper.cc
 
 MAINTAINERCLEANFILES = Makefile.in
+datadir = $(prefix)/@DATADIRNAME@
+localedir = $(datadir)/locale
+DEFS = -DLOCALEDIR=\"$(localedir)\" @DEFS@
+LDADD = @INTLLIBS@
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = ../config.h
 CONFIG_CLEAN_FILES = 
 PROGRAMS =  $(bin_PROGRAMS)
 
-
-DEFS = @DEFS@ -I. -I$(srcdir) -I..
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
 X_CFLAGS = @X_CFLAGS@
@@ -112,7 +134,7 @@
 X_PRE_LIBS = @X_PRE_LIBS@
 blackbox_OBJECTS =  BaseDisplay.o Basemenu.o Clientmenu.o Icon.o Image.o \
 LinkedList.o Rootmenu.o Screen.o Slit.o Toolbar.o Window.o Windowmenu.o \
-Workspace.o Workspacemenu.o blackbox.o main.o
+Workspace.o Workspacemenu.o blackbox.o main.o fontset_wrapper.o
 blackbox_LDADD = $(LDADD)
 blackbox_DEPENDENCIES = 
 blackbox_LDFLAGS = 
@@ -127,6 +149,11 @@
 
 TAR = tar
 GZIP_ENV = --best
+DEP_FILES =  .deps/BaseDisplay.P .deps/Basemenu.P .deps/Clientmenu.P \
+.deps/Icon.P .deps/Image.P .deps/LinkedList.P .deps/Rootmenu.P \
+.deps/Screen.P .deps/Slit.P .deps/Toolbar.P .deps/Window.P \
+.deps/Windowmenu.P .deps/Workspace.P .deps/Workspacemenu.P \
+.deps/blackbox.P .deps/fontset_wrapper.P .deps/main.P
 SOURCES = $(blackbox_SOURCES)
 OBJECTS = $(blackbox_OBJECTS)
 
@@ -134,9 +161,9 @@
 .SUFFIXES:
 .SUFFIXES: .S .c .cc .o .s
 $(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
-	cd $(top_srcdir) && $(AUTOMAKE) --gnu --include-deps src/Makefile
+	cd $(top_srcdir) && $(AUTOMAKE) --gnu src/Makefile
 
-Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
+Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status $(BUILT_SOURCES)
 	cd $(top_builddir) \
 	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
 
@@ -166,9 +193,6 @@
 	  rm -f $(DESTDIR)$(bindir)/`echo $$p|sed 's/$(EXEEXT)$$//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \
 	done
 
-.c.o:
-	$(COMPILE) -c $<
-
 .s.o:
 	$(COMPILE) -c $<
 
@@ -225,16 +249,72 @@
 subdir = src
 
 distdir: $(DISTFILES)
+	here=`cd $(top_builddir) && pwd`; \
+	top_distdir=`cd $(top_distdir) && pwd`; \
+	distdir=`cd $(distdir) && pwd`; \
+	cd $(top_srcdir) \
+	  && $(AUTOMAKE) --include-deps --build-dir=$$here --srcdir-name=$(top_srcdir) --output-dir=$$top_distdir --gnu src/Makefile
 	@for file in $(DISTFILES); do \
 	  d=$(srcdir); \
 	  if test -d $$d/$$file; then \
-	    cp -pr $$/$$file $(distdir)/$$file; \
+	    cp -pr $$d/$$file $(distdir)/$$file; \
 	  else \
 	    test -f $(distdir)/$$file \
 	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
 	    || cp -p $$d/$$file $(distdir)/$$file || :; \
 	  fi; \
 	done
+
+DEPS_MAGIC := $(shell mkdir .deps > /dev/null 2>&1 || :)
+
+-include $(DEP_FILES)
+
+mostlyclean-depend:
+
+clean-depend:
+
+distclean-depend:
+	-rm -rf .deps
+
+maintainer-clean-depend:
+
+%.o: %.c
+	@echo '$(COMPILE) -c $<'; \
+	$(COMPILE) -Wp,-MD,.deps/$(*F).pp -c $<
+	@-cp .deps/$(*F).pp .deps/$(*F).P; \
+	tr ' ' '\012' < .deps/$(*F).pp \
+	  | sed -e 's/^\\$$//' -e '/^$$/ d' -e '/:$$/ d' -e 's/$$/ :/' \
+	    >> .deps/$(*F).P; \
+	rm .deps/$(*F).pp
+
+%.lo: %.c
+	@echo '$(LTCOMPILE) -c $<'; \
+	$(LTCOMPILE) -Wp,-MD,.deps/$(*F).pp -c $<
+	@-sed -e 's/^\([^:]*\)\.o[ 	]*:/\1.lo \1.o :/' \
+	  < .deps/$(*F).pp > .deps/$(*F).P; \
+	tr ' ' '\012' < .deps/$(*F).pp \
+	  | sed -e 's/^\\$$//' -e '/^$$/ d' -e '/:$$/ d' -e 's/$$/ :/' \
+	    >> .deps/$(*F).P; \
+	rm -f .deps/$(*F).pp
+
+%.o: %.cc
+	@echo '$(CXXCOMPILE) -c $<'; \
+	$(CXXCOMPILE) -Wp,-MD,.deps/$(*F).pp -c $<
+	@-cp .deps/$(*F).pp .deps/$(*F).P; \
+	tr ' ' '\012' < .deps/$(*F).pp \
+	  | sed -e 's/^\\$$//' -e '/^$$/ d' -e '/:$$/ d' -e 's/$$/ :/' \
+	    >> .deps/$(*F).P; \
+	rm .deps/$(*F).pp
+
+%.lo: %.cc
+	@echo '$(LTCXXCOMPILE) -c $<'; \
+	$(LTCXXCOMPILE) -Wp,-MD,.deps/$(*F).pp -c $<
+	@-sed -e 's/^\([^:]*\)\.o[ 	]*:/\1.lo \1.o :/' \
+	  < .deps/$(*F).pp > .deps/$(*F).P; \
+	tr ' ' '\012' < .deps/$(*F).pp \
+	  | sed -e 's/^\\$$//' -e '/^$$/ d' -e '/:$$/ d' -e 's/$$/ :/' \
+	    >> .deps/$(*F).P; \
+	rm -f .deps/$(*F).pp
 info-am:
 info: info-am
 dvi-am:
@@ -273,23 +353,25 @@
 maintainer-clean-generic:
 	-test -z "$(MAINTAINERCLEANFILES)" || rm -f $(MAINTAINERCLEANFILES)
 mostlyclean-am:  mostlyclean-binPROGRAMS mostlyclean-compile \
-		mostlyclean-tags mostlyclean-generic
+		mostlyclean-tags mostlyclean-depend mostlyclean-generic
 
 mostlyclean: mostlyclean-am
 
-clean-am:  clean-binPROGRAMS clean-compile clean-tags clean-generic \
-		mostlyclean-am
+clean-am:  clean-binPROGRAMS clean-compile clean-tags clean-depend \
+		clean-generic mostlyclean-am
 
 clean: clean-am
 
 distclean-am:  distclean-binPROGRAMS distclean-compile distclean-tags \
-		distclean-generic clean-am distclean-local
+		distclean-depend distclean-generic clean-am \
+		distclean-local
 
 distclean: distclean-am
 
 maintainer-clean-am:  maintainer-clean-binPROGRAMS \
 		maintainer-clean-compile maintainer-clean-tags \
-		maintainer-clean-generic distclean-am
+		maintainer-clean-depend maintainer-clean-generic \
+		distclean-am
 	@echo "This command is intended for maintainers to use;"
 	@echo "it deletes files that may require special tools to rebuild."
 
@@ -299,12 +381,13 @@
 maintainer-clean-binPROGRAMS uninstall-binPROGRAMS install-binPROGRAMS \
 mostlyclean-compile distclean-compile clean-compile \
 maintainer-clean-compile tags mostlyclean-tags distclean-tags \
-clean-tags maintainer-clean-tags distdir info-am info dvi-am dvi check \
-check-am installcheck-am installcheck install-exec-am install-exec \
-install-data-am install-data install-am install uninstall-am uninstall \
-all-redirect all-am all installdirs mostlyclean-generic \
-distclean-generic clean-generic maintainer-clean-generic clean \
-mostlyclean distclean maintainer-clean
+clean-tags maintainer-clean-tags distdir mostlyclean-depend \
+distclean-depend clean-depend maintainer-clean-depend info-am info \
+dvi-am dvi check check-am installcheck-am installcheck install-exec-am \
+install-exec install-data-am install-data install-am install \
+uninstall-am uninstall all-redirect all-am all installdirs \
+mostlyclean-generic distclean-generic clean-generic \
+maintainer-clean-generic clean mostlyclean distclean maintainer-clean
 
 
 distclean-local:
@@ -349,6 +432,7 @@
  Workspace.hh Workspacemenu.hh
 main.o: main.cc ../version.h blackbox.hh BaseDisplay.hh LinkedList.hh \
  Image.hh
+fontset_wrapper.o: fontset_wrapper.cc fontset_wrapper.hh
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
--- blackbox-0.51.3.orig/src/Makefile.am
+++ blackbox-0.51.3/src/Makefile.am
@@ -19,14 +19,18 @@
 #
 
 CPPFLAGS= @CPPFLAGS@ @SHAPE@ @KDE@ @SLIT@ @INTERLACE@ \
--DDEFAULTMENU=\"$(pkgdatadir)/menu\" \
+-DDEFAULTMENU=\"/etc/X11/blackbox/blackbox-menu\" \
 -DDEFAULTSTYLE=\"$(pkgdatadir)/styles/default\"
 
 bin_PROGRAMS= blackbox
 
-blackbox_SOURCES= BaseDisplay.cc Basemenu.cc Clientmenu.cc Icon.cc Image.cc LinkedList.cc Rootmenu.cc Screen.cc Slit.cc Toolbar.cc Window.cc Windowmenu.cc Workspace.cc Workspacemenu.cc blackbox.cc main.cc
+blackbox_SOURCES= BaseDisplay.cc Basemenu.cc Clientmenu.cc Icon.cc Image.cc LinkedList.cc Rootmenu.cc Screen.cc Slit.cc Toolbar.cc Window.cc Windowmenu.cc Workspace.cc Workspacemenu.cc blackbox.cc main.cc fontset_wrapper.cc
 
 MAINTAINERCLEANFILES= Makefile.in
+datadir = $(prefix)/@DATADIRNAME@
+localedir = $(datadir)/locale
+DEFS = -DLOCALEDIR=\"$(localedir)\" @DEFS@
+LDADD = @INTLLIBS@
 
 distclean-local:
 	rm -f *\~ *.orig *.rej
@@ -70,3 +74,4 @@
  Workspace.hh Workspacemenu.hh
 main.o: main.cc ../version.h blackbox.hh BaseDisplay.hh LinkedList.hh \
  Image.hh
+fontset_wrapper.o: fontset_wrapper.cc fontset_wrapper.hh
--- blackbox-0.51.3.orig/src/Image.hh
+++ blackbox-0.51.3/src/Image.hh
@@ -24,6 +24,8 @@
 #include <X11/Xlib.h>
 #include <X11/Xutil.h>
 
+#include <libintl.h>
+
 class BaseDisplay;
 class ScreenInfo;
 class BImage;
--- blackbox-0.51.3.orig/src/Image.cc
+++ blackbox-0.51.3/src/Image.cc
@@ -27,7 +27,8 @@
 #endif // HAVE_CONFIG_H
 
 #include "BaseDisplay.hh"
-#include "Image.hh"
+//#include "Image.hh"
+#include "blackbox.hh"
 
 #ifdef    HAVE_SYS_TYPES_H
 #  include <sys/types.h>
@@ -126,7 +127,7 @@
 				control->getDrawable(), width,
 				height, control->getDepth());
   if (pixmap == None) {
-    fprintf(stderr, "BImage::render_solid: error creating pixmap\n");
+    fprintf(stderr, _("BImage::render_solid: error creating pixmap\n"));
     return None;
   }
   
@@ -249,7 +250,7 @@
 	         control->getDepth(), ZPixmap, 0, 0, width, height, 32, 0);
 
   if (! image) {
-    fprintf(stderr, "BImage::renderXImage: error creating XImage\n");
+    fprintf(stderr, _("BImage::renderXImage: error creating XImage\n"));
     return (XImage *) 0;
   }
 
@@ -259,7 +260,7 @@
   unsigned char *d = new unsigned char[image->bytes_per_line * (height + 1)];
   if (! d) {
     fprintf(stderr,
-	    "BImage::renderXImage: error allocating memory for image\n");
+	    _("BImage::renderXImage: error allocating memory for image\n"));
     XDestroyImage(image);
     return (XImage *) 0;
   }
@@ -270,7 +271,7 @@
   unsigned long pixel;
 
   if ((! red_table) || (! green_table) || (! blue_table)) {
-    fprintf(stderr, "BImage::renderXImage: error getting color mask tables\n");
+    fprintf(stderr, _("BImage::renderXImage: error getting color mask tables\n"));
     delete [] d;
     XDestroyImage(image);
     return (XImage *) 0;
@@ -279,7 +280,7 @@
   if (control->getVisual()->c_class != TrueColor)
     if ((! colors) || (! ncolors)) {
       fprintf(stderr,
-	      "BImage::renderXImage: error getting pseudo color tables\n");
+	      _("BImage::renderXImage: error getting pseudo color tables\n"));
       delete [] d;
       XDestroyImage(image);
       return (XImage *) 0;
@@ -308,7 +309,7 @@
 	(! green_error_4_table) ||
         (! blue_error_4_table)) {
       fprintf(stderr,
-	      "BImage::renderXImage: error getting dither information\n");
+	      _("BImage::renderXImage: error getting dither information\n"));
       delete [] d;
       XDestroyImage(image);
       return (XImage *) 0;
@@ -377,7 +378,7 @@
 	  break;
 	  
 	default:
-	  fprintf(stderr, "BImage::renderXImage: unsupported visual\n");
+	  fprintf(stderr, _("BImage::renderXImage: unsupported visual\n"));
 	  delete [] d;
 	  XDestroyImage(image);
 	  return (XImage *) 0;
@@ -441,7 +442,7 @@
 	  break;
 
 	default:
-	  fprintf(stderr, "BImage::renderXImage: unsupported visual\n");
+	  fprintf(stderr, _("BImage::renderXImage: unsupported visual\n"));
 	  delete [] d;
 	  XDestroyImage(image);
 	  return (XImage *) 0; 
@@ -463,7 +464,7 @@
                   width, height, control->getDepth());
 
   if (pixmap == None) {
-    fprintf(stderr, "BImage::renderPixmap: error creating pixmap\n");
+    fprintf(stderr, _("BImage::renderPixmap: error creating pixmap\n"));
     return None;
   }
  
@@ -1748,8 +1749,8 @@
       
       if (colors_per_channel < 2 || ncolors > (1 << screen_depth)) {
 	fprintf(stderr,
-		"BImageControl::BImageControl: invalid colormap size %d "
-		"(%d/%d/%d) - reducing",
+		_("BImageControl::BImageControl: invalid colormap size %d "
+		  "(%d/%d/%d) - reducing"),
                 ncolors, colors_per_channel, colors_per_channel,
                 colors_per_channel);
 
@@ -1758,8 +1759,8 @@
       
       colors = new XColor[ncolors];
       if (! colors) {
-	fprintf(stderr, "BImageControl::BImageControl: error allocating "
-		"colormap\n");
+	fprintf(stderr, _("BImageControl::BImageControl: error allocating "
+		"colormap\n"));
 	exit(1);
       }
 
@@ -1786,7 +1787,7 @@
       
       for (i = 0; i < ncolors; i++)
 	if (! XAllocColor(display->getDisplay(), root_colormap, &colors[i])) {
-	  fprintf(stderr, "couldn't alloc color %i %i %i\n", colors[i].red,
+	  fprintf(stderr, _("couldn't alloc color %i %i %i\n"), colors[i].red,
 		  colors[i].green, colors[i].blue);
 	  colors[i].flags = 0;
 	} else
@@ -1837,12 +1838,12 @@
     
   case GrayScale:
   case StaticGray:
-    fprintf(stderr, "BImageControl::BImageControl: GrayScale/StaticGray "
-                    "visual unsupported\n");
+    fprintf(stderr, _("BImageControl::BImageControl: GrayScale/StaticGray "
+                    "visual unsupported\n"));
     break;
     
   default:
-    fprintf(stderr, "BImageControl::BImageControl: unsupported visual %d\n",
+    fprintf(stderr, _("BImageControl::BImageControl: unsupported visual %d\n"),
 	    screeninfo->getVisual()->c_class);
     exit(1);
   }
@@ -1886,8 +1887,8 @@
 
   if (cache->count()) {
     int i, n = cache->count();
-    fprintf(stderr, "BImageContol::~BImageControl: pixmap cache - "
-	    "releasing %d pixmaps\n", n);
+    fprintf(stderr, _("BImageContol::~BImageControl: pixmap cache - "
+	    "releasing %d pixmaps\n"), n);
     
     for (i = 0; i < n; i++) {
       Cache *tmp = cache->first();
@@ -1997,13 +1998,13 @@
   if (! XParseColor(display->getDisplay(),
                     DefaultColormap(display->getDisplay(), screen_number),
 		    colorname, &color)) {
-    fprintf(stderr, "BImageControl::getColor: color parse error: \"%s\"\n",
+    fprintf(stderr, _("BImageControl::getColor: color parse error: \"%s\"\n"),
 	    colorname);
   } else if (! XAllocColor(display->getDisplay(),
                            DefaultColormap(display->getDisplay(),
                                            screen_number),
 			   &color)) {
-    fprintf(stderr, "BImageControl::getColor: color alloc error: \"%s\"\n",
+    fprintf(stderr, _("BImageControl::getColor: color alloc error: \"%s\"\n"),
 	    colorname);
   }
   
@@ -2025,13 +2026,13 @@
   if (! XParseColor(display->getDisplay(),
                     DefaultColormap(display->getDisplay(), screen_number),
 		    colorname, &color)) {
-    fprintf(stderr, "BImageControl::getColor: color parse error: \"%s\"\n",
+    fprintf(stderr, _("BImageControl::getColor: color parse error: \"%s\"\n"),
 	    colorname);
   } else if (! XAllocColor(display->getDisplay(),
                            DefaultColormap(display->getDisplay(),
                                            screen_number),
 			   &color)) {
-    fprintf(stderr, "BImageControl::getColor: color alloc error: \"%s\"\n",
+    fprintf(stderr, _("BImageControl::getColor: color alloc error: \"%s\"\n"),
 	    colorname);
   }
   
--- blackbox-0.51.3.orig/src/Screen.cc
+++ blackbox-0.51.3/src/Screen.cc
@@ -68,8 +68,8 @@
 
 static int anotherWMRunning(Display *display, XErrorEvent *) {
   fprintf(stderr,
-	  "BScreen::BScreen: an error occured while querying the X server.\n"
-	  "  another window manager already running on display %s.\n",
+	  _("BScreen::BScreen: an error occured while querying the X server.\n"
+	  "  another window manager already running on display %s.\n"),
           DisplayString(display));
   
   running = False;
@@ -261,12 +261,12 @@
     for (int i = 0; i < resource.workspaces; ++i) {
       wkspc = new Workspace(this, workspacesList->count());
       workspacesList->insert(wkspc);
-      workspacemenu->insert(wkspc->getName(), wkspc->getMenu());
+      workspacemenu->insert(_(wkspc->getName()), wkspc->getMenu());
     }
   } else {
     wkspc = new Workspace(this, workspacesList->count());
     workspacesList->insert(wkspc);
-    workspacemenu->insert(wkspc->getName(), wkspc->getMenu());
+    workspacemenu->insert(_(wkspc->getName()), wkspc->getMenu());
   }
   
 #ifdef    KDE
@@ -281,7 +281,7 @@
 		   (XID) data);
 #endif // KDE
     
-  workspacemenu->insert("Icons", iconmenu);
+  workspacemenu->insert(_("Icons"), iconmenu);
   workspacemenu->update();
   
   current_workspace = workspacesList->first();
@@ -764,17 +764,17 @@
     if ((resource.font.title = XLoadQueryFont(getDisplay()->getDisplay(),
                                               value.addr)) == NULL) {
       fprintf(stderr,
-	      "BScreen::LoadStyle(): couldn't load font '%s'\n", value.addr);
+	      _("BScreen::LoadStyle(): couldn't load font '%s'\n"), value.addr);
       if ((resource.font.title = XLoadQueryFont(getDisplay()->getDisplay(),
                                                 defaultFont)) == NULL) {
-	fprintf(stderr, "BScreen::LoadStyle(): couldn't load default font.\n");
+	fprintf(stderr, _("BScreen::LoadStyle(): couldn't load default font.\n"));
 	exit(2);
       }  
     }
   } else {
     if ((resource.font.title = XLoadQueryFont(getDisplay()->getDisplay(),
                                               defaultFont)) == NULL) {
-      fprintf(stderr, "BScreen::LoadStyle(): couldn't load default font\n");
+      fprintf(stderr, _("BScreen::LoadStyle(): couldn't load default font\n"));
       exit(2);
     }
   }
@@ -790,17 +790,17 @@
     if ((resource.font.menu = XLoadQueryFont(getDisplay()->getDisplay(),
                                              value.addr)) == NULL) {
       fprintf(stderr,
-	      "BScreen::LoadStyle(): couldn't load font '%s'\n", value.addr);
+	      _("BScreen::LoadStyle(): couldn't load font '%s'\n"), value.addr);
       if ((resource.font.menu = XLoadQueryFont(getDisplay()->getDisplay(),
                                                defaultFont)) == NULL) {
-	fprintf(stderr, "BScreen::LoadStyle(): couldn't load default font.\n");
+	fprintf(stderr, _("BScreen::LoadStyle(): couldn't load default font.\n"));
 	exit(2);
       }  
     }
   } else {
     if ((resource.font.menu = XLoadQueryFont(getDisplay()->getDisplay(),
                                              defaultFont)) == NULL) {
-      fprintf(stderr, "BScreen::LoadStyle: couldn't load default font.\n");
+      fprintf(stderr, _("BScreen::LoadStyle: couldn't load default font.\n"));
       exit(2);
     }
   }
@@ -835,7 +835,7 @@
   Workspace *wkspc = new Workspace(this, workspacesList->count());
   workspacesList->insert(wkspc);
 
-  workspacemenu->insert(wkspc->getName(), wkspc->getMenu(),
+  workspacemenu->insert(_(wkspc->getName()), wkspc->getMenu(),
 			wkspc->getWorkspaceID() + 1);
   workspacemenu->update();
 
@@ -1123,7 +1123,9 @@
   Bool defaultMenu = True;
   
   if (blackbox->getMenuFilename()) {
-    FILE *menu_file = fopen(blackbox->getMenuFilename(), "r");
+    FILE *menu_file = fopen(blackbox->getNLSMenuFilename(), "r");
+    if (! menu_file )
+      menu_file = fopen(blackbox->getMenuFilename(), "r");
 
     if (menu_file) {
       if (! feof(menu_file)) {
@@ -1163,7 +1165,7 @@
 	  }
 	}
       } else
-	fprintf(stderr, "%s: Empty menu file", blackbox->getMenuFilename());
+	fprintf(stderr, _("%s: Empty menu file"), blackbox->getMenuFilename());
       
       fclose(menu_file);
     } else
@@ -1173,8 +1175,8 @@
   if (defaultMenu) {
     rootmenu->defaultMenu();
     rootmenu->insert("xterm", BScreen::Execute, "xterm");
-    rootmenu->insert("Restart", BScreen::Restart);
-    rootmenu->insert("Exit", BScreen::Exit);
+    rootmenu->insert(_("Restart"), BScreen::Restart);
+    rootmenu->insert(_("Exit"), BScreen::Exit);
   } else
     blackbox->saveMenuFilename(blackbox->getMenuFilename());
 }
@@ -1256,8 +1258,8 @@
 
 	case 421: // exec 
 	  if ((! *label) && (! *command)) {
-	    fprintf(stderr," BScreen::parseMenuFile: [exec] error, "
-		    "no menu label and/or command defined\n");
+	    fprintf(stderr,_(" BScreen::parseMenuFile: [exec] error, "
+		    "no menu label and/or command defined\n"));
 	    continue;
 	  }
 	  
@@ -1267,8 +1269,8 @@
 	  
 	case 442: // exit
 	  if (! *label) {
-	      fprintf(stderr, "BScreen::parseMenuFile: [exit] error, "
-		      "no menu label defined\n");
+	      fprintf(stderr, _("BScreen::parseMenuFile: [exit] error, "
+		      "no menu label defined\n"));
 	      continue;
 	  }
 	  
@@ -1279,8 +1281,8 @@
 	case 561: // style
 	  {
 	    if ((! *label) || (! *command)) {
-	      fprintf(stderr, "BScreen::parseMenuFile: [style] error, "
-		      "no menu label and/or filename defined\n");
+	      fprintf(stderr, _("BScreen::parseMenuFile: [style] error, "
+		      "no menu label and/or filename defined\n"));
 	      continue;
 	    }
 	    
@@ -1313,8 +1315,8 @@
 	case 740: // include
 	  {
 	    if (! *label) {
-	      fprintf(stderr, "BScreen::parseMenuFile: [include] error, "
-		      "no filename defined\n");
+	      fprintf(stderr, _("BScreen::parseMenuFile: [include] error, "
+		      "no filename defined\n"));
 	      continue;
 	    }
 	    
@@ -1359,8 +1361,8 @@
 	  case 767: // submenu
 	    {
 	      if (! *label) {
-		fprintf(stderr, "BScreen::parseMenuFile: [submenu] error, "
-			"no menu label defined\n");
+		fprintf(stderr, _("BScreen::parseMenuFile: [submenu] error, "
+			"no menu label defined\n"));
 		continue;
 	      }
 
@@ -1382,8 +1384,8 @@
 	case 773: // restart
 	  {
 	    if (! *label) {
-	      fprintf(stderr, "BScreen::parseMenuFile: [restart] error, "
-		      "no menu label defined\n");
+	      fprintf(stderr, _("BScreen::parseMenuFile: [restart] error, "
+		      "no menu label defined\n"));
 	      continue;
 	    }
 	    
@@ -1398,8 +1400,8 @@
 	  case 845: // reconfig
 	    {
 	      if (! *label) {
-		fprintf(stderr, "BScreen::parseMenuFile: [reconfig] error, "
-			"no menu label defined\n");
+		fprintf(stderr, _("BScreen::parseMenuFile: [reconfig] error, "
+			"no menu label defined\n"));
 		continue;
 	      }
 	      
@@ -1515,8 +1517,8 @@
 	case 1090: // workspaces
 	  {
 	    if (! *label) {
-	      fprintf(stderr, "BScreen:parseMenuFile: [workspaces] error, "
-		      "no menu label defined\n");
+	      fprintf(stderr, _("BScreen:parseMenuFile: [workspaces] error, "
+		      "no menu label defined\n"));
 	      continue;
 	    }
 	    
@@ -1641,6 +1643,7 @@
 
 
 void BScreen::removeKWMWindow(Window win) {
+{
   LinkedListIterator<Window> mod_it(kwm_module_list);
   for (; mod_it.current(); mod_it++)
     if (*(mod_it.current()) == win)
@@ -1652,6 +1655,7 @@
     kwm_module_list->remove(w);
     delete w;
   }
+}
   
   LinkedListIterator<Window> win_it(kwm_window_list);
   for (; win_it.current(); win_it++)
--- blackbox-0.51.3.orig/src/Toolbar.cc
+++ blackbox-0.51.3/src/Toolbar.cc
@@ -216,8 +216,8 @@
 
   for (i = 0; i < screen->getCount(); i++) {
     w = XTextWidth(screen->getTitleFont(),
-		   screen->getWorkspace(i)->getName(),
-		   strlen(screen->getWorkspace(i)->getName())) +
+		   _(screen->getWorkspace(i)->getName()),
+		   strlen(_(screen->getWorkspace(i)->getName()))) +
       (frame.bevel_w * 2);
     
     if (w > frame.wlabel_w) frame.wlabel_w = w;
@@ -413,13 +413,13 @@
  
  
 void Toolbar::redrawWorkspaceLabel(Bool redraw) {
-  if (screen->getCurrentWorkspace()->getName()) {
+  if (_(screen->getCurrentWorkspace()->getName())) {
     if (redraw)
       XClearWindow(display, frame.workspaceLabel);
     
-    int l = strlen(screen->getCurrentWorkspace()->getName()),
+    int l = strlen(_(screen->getCurrentWorkspace()->getName())),
       tx = (XTextWidth(screen->getTitleFont(),
-		       screen->getCurrentWorkspace()->getName(), l) +
+		       _(screen->getCurrentWorkspace()->getName()), l) +
 	    (frame.bevel_w * 2)),
       x = (frame.wlabel_w - tx) / 2;
     
@@ -428,7 +428,7 @@
     XDrawString(display, frame.workspaceLabel, buttonGC, x,
 		(frame.wlabel_h + screen->getTitleFont()->ascent -
                  screen->getTitleFont()->descent) / 2,
-                screen->getCurrentWorkspace()->getName(), l);
+                _(screen->getCurrentWorkspace()->getName()), l);
   }
 }
 
@@ -653,7 +653,7 @@
 	screen->getWorkspacemenu()->
 	  remove(screen->getCurrentWorkspace()->getWorkspaceID() + 2);
 	screen->getWorkspacemenu()->
-	  insert(screen->getCurrentWorkspace()->getName(),
+	  insert(_(screen->getCurrentWorkspace()->getName()),
 		 screen->getCurrentWorkspace()->getMenu(),
 		 screen->getCurrentWorkspace()->getWorkspaceID() + 1);
 	screen->getWorkspacemenu()->update();
--- blackbox-0.51.3.orig/src/fontset_wrapper.cc
+++ blackbox-0.51.3/src/fontset_wrapper.cc
@@ -0,0 +1,337 @@
+/* Easy, easy, easy XFontSet wrapper            */
+/* by Yasuyuki Furukawa <yasu@on.cs.keio.ac.jp> */
+#ifdef HAVE_CONFIG_H
+#include "../config.h"
+#endif
+
+#if ENABLE_NLS
+
+#include <X11/Xlib.h>
+#include <X11/Xutil.h>
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+
+#define __fontset_wrapper_c__ 1
+#include "fontset_wrapper.hh"
+
+typedef struct _fonttable {
+  XFontStruct          *font;
+  Font                  fid;
+  XFontSet              fsid;
+  struct _fonttable    *next;
+} FontTable;
+
+FontTable *fonttable;
+
+static FontTable* SearchFontTableOfFID(Font fid)
+{
+    FontTable *ft;
+
+    if (fonttable == NULL)
+        return(NULL);
+
+    for (ft = fonttable ; ft; ft = ft->next) {
+        if (ft->fid == fid)
+	    return(ft);
+    }
+}
+
+
+static FontTable* SearchFontTable(XFontSetStruct *xfss)
+{
+    if(xfss == NULL)
+        return(NULL);
+
+    return(SearchFontTableOfFID(xfss->fid));
+}
+
+
+static XFontSet FontSetOfFID(Font fid)
+{
+    FontTable *ft;
+
+    if ((ft = SearchFontTableOfFID(fid)))
+        return(ft->fsid);
+    else
+	return(0);
+}
+
+
+static void FreeFontTable(FontTable *ft)
+{
+    if (!ft)
+        return;
+
+    if (ft != fonttable) {
+        FontTable *ft_prev;
+        for (ft_prev = fonttable ; ft_prev->next ; ft_prev = ft_prev->next) {
+	    if (ft_prev->next == ft)
+		break;
+	}
+	ft_prev = ft_prev->next;
+    } else
+        fonttable = fonttable->next;
+    free(ft);
+}
+
+static FontTable* CreateFontTable()
+{
+  FontTable *newft = NULL;
+
+  newft = (FontTable*)malloc(sizeof(FontTable));
+
+  if( newft == NULL ) {
+      fprintf(stderr, "fatal error: memory allocate failed while create fonttable.\n");
+      return(NULL);
+  }
+
+  newft->next = NULL;
+  if (fonttable) {
+      FontTable *ft = fonttable;
+      for ( ; ft->next ; ft = ft->next);
+      ft->next = newft;
+  } else
+      fonttable = newft;
+  return(newft);
+}
+
+void XFreeFontWrapper(Display *display, XFontSetStruct *xfss)
+{
+    FontTable *ft = NULL;
+
+    if (!xfss)
+      return;
+ 
+    if (!(ft = SearchFontTable(xfss)))
+        return;
+
+    XFreeFont(display, ft->font);
+    XFreeFontSet(display, ft->fsid);
+
+    FreeFontTable(ft);
+}
+
+XFontSetStruct *XLoadQueryFontWrapper(Display *display, const char *fontset_name)
+{
+#ifdef DEF_ADDITONAL_FONT
+    char     *additional_font_name = "," DEF_ADDITONAL_FONT;
+#else
+    char     *additional_font_name = NULL;
+#endif
+    char    **missing;
+    int       num_missing = 0;
+    char     *default_string;
+    char     *new_fontset_name = NULL;
+    XFontSet  fontset;
+    XFontSetStruct *xfss = NULL;
+    FontTable *ft;
+
+    if ((ft = CreateFontTable()) == NULL) {
+        fprintf(stderr, "fatal error: memory allocate failed "
+		        "while create fontset.\n");
+	return(NULL);
+    }
+
+    if ((ft->font = XLoadQueryFont(display,"fixed")) == NULL)
+        return(NULL);
+    ft->fid = ft->font->fid;
+
+    if (additional_font_name) {
+        new_fontset_name = (char *)malloc(strlen(fontset_name) +
+				    strlen(additional_font_name));
+	if (new_fontset_name) {
+	    strcpy(new_fontset_name, fontset_name);
+	    strcat(new_fontset_name, additional_font_name);
+	} else {
+	    fprintf(stderr, "fatal error: memory allocate failed "
+		            "while create fontset.\n");
+	    return(NULL);
+	}
+	fontset_name = new_fontset_name;
+    }
+
+    if ((ft->fsid = XCreateFontSet(display, fontset_name,
+		 &missing, &num_missing, &default_string)) == NULL ) {
+        if (num_missing > 0) {
+	    fprintf(stderr, "warring: The following "
+		            "character set%s are missing:\n",
+		    num_missing>1? "": "s" );
+	    while( num_missing > 0 )
+	        fprintf(stderr, "\t%s\n", missing[--num_missing]);
+
+	    XFreeStringList(missing);
+	    fprintf(stderr, "\tThe string \"%s\" will be used in place"
+		    "of any characters from those sets.",
+		    default_string);
+	}
+    }
+    if (new_fontset_name)
+        free(new_fontset_name);
+
+    if (ft->fsid) {
+        /* Create XFontSetStruct */
+        xfss = (XFontSetStruct *)malloc(sizeof(XFontSetStruct));
+	xfss->fsid    = ft->fsid;
+	xfss->fid     = ft->fid;
+	xfss->ascent  =-XExtentsOfFontSet(xfss->fsid)->max_logical_extent.y;
+	xfss->descent = XExtentsOfFontSet(xfss->fsid)->max_logical_extent.height
+	               +XExtentsOfFontSet(xfss->fsid)->max_logical_extent.y;
+    }
+    return(xfss);
+}
+
+void     XDrawStringWrapper(Display *display, Window win, GC gc,
+				    int x, int y, char* s, int l)
+{
+    XGCValues gcv;
+    XFontSet fontset;
+
+    XGetGCValues(display, gc, GCFont, &gcv);
+
+    if (fontset = FontSetOfFID(gcv.font)) {
+        XmbDrawString(display, win, fontset, gc, x, y, s, l);
+	/* XmbDrawString destory value of GCFont ... */
+	XChangeGC(display, gc, GCFont, &gcv);
+    } else
+        XDrawString(display, win, gc, x, y, s, l);
+}
+
+
+void     XDrawImageStringWrapper(Display *display, Window win, GC gc,
+				 int x, int y, char* s, int l)
+{
+    XGCValues gcv;
+    XFontSet fontset;
+
+    XGetGCValues(display, gc, GCFont, &gcv);
+
+    if (fontset = FontSetOfFID(gcv.font)) {
+        XmbDrawImageString(display, win, fontset, gc, x, y, s, l);
+	/* XmbDrawImageString destory value of GCFont ... */
+	XChangeGC(display, gc, GCFont, &gcv);
+    } else
+      XDrawImageString(display, win, gc, x, y, s, l);
+}
+
+void XTextExtentsWrapper( XFontSetStruct *font_struct,
+			  char *string, int nchars,
+			  int *direction_return,
+			  int *font_ascent_return,
+			  int *font_descent_return, 
+			  XCharStruct *overall_return )
+{
+    XRectangle overall_ink_return;
+    XRectangle overall_logical_return;
+
+    XmbTextExtents(font_struct->fsid,
+		   string, nchars,
+		   &overall_ink_return,
+		   &overall_logical_return );
+
+    *font_ascent_return  = -overall_logical_return.y;
+    *font_descent_return = overall_logical_return.height
+                          + overall_logical_return.y;
+    *direction_return;    /* XXX: unspported... */
+    *overall_return;
+}
+
+Status XGetWMNameWrapper(Display *display,
+			 Window w,
+			 XTextProperty *text_prop_return)
+{
+    int    status;
+
+    status = XGetWMName(display, w, text_prop_return);
+
+    if (status && text_prop_return->value
+	 && text_prop_return->nitems > 0) {
+        if (text_prop_return->encoding != XA_STRING) {
+	    char **list;
+	    int    num;
+	    text_prop_return->nitems = strlen((char *)text_prop_return->value);
+	    status = XmbTextPropertyToTextList(display,
+					       text_prop_return,
+					       &list, &num);
+	    if (status >= Success && num > 0 && *list) {
+	        XFree(text_prop_return->value);
+		text_prop_return->value  = (unsigned char*)strdup(*list);
+		text_prop_return->nitems = strlen(*list);
+		XFreeStringList(list);
+		return(1);
+	    }
+	} else
+	    return(1);
+    }
+    return(0);
+}
+
+
+Status XGetWMIconNameWrapper(Display *display,
+		    Window w,
+		    XTextProperty *text_prop_return)
+{
+    int    status;
+
+    status = XGetWMIconName(display, w, text_prop_return);
+
+    if (status && text_prop_return->value
+	 && text_prop_return->nitems > 0) {
+        if (text_prop_return->encoding != XA_STRING) {
+	    char **list;
+	    int    num;
+	    text_prop_return->nitems = strlen((char *)text_prop_return->value);
+	    status = XmbTextPropertyToTextList(display,
+					       text_prop_return,
+					       &list, &num);
+	    if (status >= Success && num > 0 && *list) {
+	        XFree(text_prop_return->value);
+		text_prop_return->value  = (unsigned char*)strdup(*list);
+		text_prop_return->nitems = strlen(*list);
+		XFreeStringList(list);
+		return(1);
+	    }
+	} else
+	    return(1);
+    }
+    return(0);
+}
+
+Status XGetIconNameWrapper(Display *display,
+			   Window win,
+			   char **iconname)
+{
+    XTextProperty text_prop;
+    char **list;
+    int num;
+    
+    if (XGetWMIconNameWrapper(display, win, &text_prop) != 0) {
+        if (text_prop.value && text_prop.nitems) {
+	    *iconname = (char *)text_prop.value;
+	    return 1;
+	}
+    }
+    *iconname = NULL;
+    return 0;
+}
+
+Status XFetchNameWrapper(Display *display,
+			 Window win,
+			 char ** winname)
+{
+    XTextProperty text_prop;
+    char **list;
+    int num;
+
+    if (XGetWMNameWrapper(display, win, &text_prop) != 0) {
+        if (text_prop.value && text_prop.nitems > 0) {
+	    *winname = (char *)text_prop.value;
+	    return 1;
+	}
+    }
+    *winname = NULL;
+    return 0;  
+}
+
+#endif /* ENABLE_NLS  */
--- blackbox-0.51.3.orig/src/fontset_wrapper.hh
+++ blackbox-0.51.3/src/fontset_wrapper.hh
@@ -0,0 +1,94 @@
+/* Easy, easy, easy XFontSet wrapper                 */
+/* by Yasuyuki Furukawa <yasu@on.cs.keio.ac.jp>,1998 */
+
+#ifndef __fontset_wrapper_h__
+#define __fontset_wrapper_h__
+
+#include <X11/Xlocale.h>
+#include <X11/Xlib.h>
+#include <X11/Xatom.h>
+
+/* Font struct wrapper for multibyte charactor */
+#if ENABLE_NLS 
+
+typedef struct {
+    Font     fid;
+    XFontSet fsid;
+    int      ascent, descent;
+} XFontSetStruct;
+
+/* Wrapper functions for font */
+XFontSetStruct *XLoadQueryFontWrapper(Display *display,
+				      const char *fontset_name);
+
+void            XFreeFontWrapper(Display *display,
+				XFontSetStruct *xfss);
+
+void            XDrawStringWrapper(Display *dpy, Window win, GC gc,
+				   int x, int y, char* s, int l);
+
+void            XDrawImageStringWrapper(Display *dpy, Window win, GC gc,
+					int x, int y, char* s, int l);
+
+void            XTextExtentsWrapper( XFontSetStruct *font_struct,
+				     char *string, int nchars,
+				     int *direction_return,
+				     int *font_ascent_return,
+				     int *font_descent_return, 
+				     XCharStruct *overall_return );
+
+/* Wrapper functions for window property */
+Status          XGetWMIconNameWrapper(Display *display,
+				      Window w,
+				      XTextProperty *text_prop_return);
+
+Status          XGetWMNameWrapper(Display *display,
+				  Window w,
+				  XTextProperty *text_prop_return);
+
+Status          XFetchNameWrapper(Display *display,
+				  Window win,
+				  char ** winname);
+
+Status          XGetIconNameWrapper(Display *display,
+				    Window win,
+				    char **iconname);
+
+/* Replace Xlib functions to Wrapper functions */
+#ifndef  __fontset_wrapper_c__
+#  define XFontStruct                       XFontSetStruct
+
+#  define XFreeFont(dpy, font)\
+          XFreeFontWrapper(dpy, font)
+
+#  define XLoadQueryFont(dpy, fontname)\
+          XLoadQueryFontWrapper(dpy, fontname)
+
+#  define XTextWidth(font,s,l)\
+          XmbTextEscapement((font)->fsid, s, l)
+
+#  define XDrawString(dpy, win, gc, x, y, s, l)\
+          XDrawStringWrapper(dpy, win, gc, x, y, s, l)
+
+#  define XDrawImageString(dpy, win, gc, x, y, s, l)\
+          XDrawImageStringWrapper(dpy, win, gc, x, y, s, l)
+
+#  define XTextExtents(font, str, len, dir_ret, asc_ret, desc_ret, chst)\
+          XTextExtentsWrapper(font, str, len, dir_ret, asc_ret, desc_ret, chst)
+
+#  define XGetWMName(dpy, w, text_prop)\
+          XGetWMNameWrapper(dpy, w, text_prop)
+
+#  define XGetWMIconName(dpy, w, text_prop)\
+          XGetWMIconNameWrapper(dpy, w, text_prop)
+
+#  define XFetchName(dpy, w, winname)\
+          XFetchNameWrapper(dpy, w, winname)
+
+#  define XGetIconName(dpy, w, iconname)\
+          XGetIconNameWrapper(dpy, w, iconname)
+#endif /* __fontset_wrapper_c__ */
+
+#endif /* ENABLE_NLS */
+
+#endif /* __fontset_wrapper_h__ */
--- blackbox-0.51.3.orig/util/Makefile.in
+++ blackbox-0.51.3/util/Makefile.in
@@ -77,16 +77,37 @@
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
+CATALOGS = @CATALOGS@
+CATOBJEXT = @CATOBJEXT@
 CC = @CC@
 CXX = @CXX@
+DATADIRNAME = @DATADIRNAME@
+GENCAT = @GENCAT@
+GMOFILES = @GMOFILES@
+GMSGFMT = @GMSGFMT@
+GT_NO = @GT_NO@
+GT_YES = @GT_YES@
+INCLUDE_LOCALE_H = @INCLUDE_LOCALE_H@
+INSTOBJEXT = @INSTOBJEXT@
 INTERLACE = @INTERLACE@
+INTLDEPS = @INTLDEPS@
+INTLLIBS = @INTLLIBS@
+INTLOBJS = @INTLOBJS@
 KDE = @KDE@
 MAINT = @MAINT@
 MAKEINFO = @MAKEINFO@
+MKINSTALLDIRS = @MKINSTALLDIRS@
+MSGFMT = @MSGFMT@
 PACKAGE = @PACKAGE@
+POFILES = @POFILES@
+POSUB = @POSUB@
+RANLIB = @RANLIB@
 SHAPE = @SHAPE@
 SLIT = @SLIT@
+USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
+USE_NLS = @USE_NLS@
 VERSION = @VERSION@
+l = @l@
 regex_cmd = @regex_cmd@
 
 bin_PROGRAMS = bsetroot
@@ -123,6 +144,7 @@
 
 TAR = tar
 GZIP_ENV = --best
+DEP_FILES =  .deps/bsetroot.P
 SOURCES = $(bsetroot_SOURCES)
 OBJECTS = $(bsetroot_OBJECTS)
 
@@ -130,9 +152,9 @@
 .SUFFIXES:
 .SUFFIXES: .S .c .o .s
 $(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
-	cd $(top_srcdir) && $(AUTOMAKE) --gnu --include-deps util/Makefile
+	cd $(top_srcdir) && $(AUTOMAKE) --gnu util/Makefile
 
-Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
+Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status $(BUILT_SOURCES)
 	cd $(top_builddir) \
 	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
 
@@ -162,9 +184,6 @@
 	  rm -f $(DESTDIR)$(bindir)/`echo $$p|sed 's/$(EXEEXT)$$//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \
 	done
 
-.c.o:
-	$(COMPILE) -c $<
-
 .s.o:
 	$(COMPILE) -c $<
 
@@ -219,16 +238,53 @@
 subdir = util
 
 distdir: $(DISTFILES)
+	here=`cd $(top_builddir) && pwd`; \
+	top_distdir=`cd $(top_distdir) && pwd`; \
+	distdir=`cd $(distdir) && pwd`; \
+	cd $(top_srcdir) \
+	  && $(AUTOMAKE) --include-deps --build-dir=$$here --srcdir-name=$(top_srcdir) --output-dir=$$top_distdir --gnu util/Makefile
 	@for file in $(DISTFILES); do \
 	  d=$(srcdir); \
 	  if test -d $$d/$$file; then \
-	    cp -pr $$/$$file $(distdir)/$$file; \
+	    cp -pr $$d/$$file $(distdir)/$$file; \
 	  else \
 	    test -f $(distdir)/$$file \
 	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
 	    || cp -p $$d/$$file $(distdir)/$$file || :; \
 	  fi; \
 	done
+
+DEPS_MAGIC := $(shell mkdir .deps > /dev/null 2>&1 || :)
+
+-include $(DEP_FILES)
+
+mostlyclean-depend:
+
+clean-depend:
+
+distclean-depend:
+	-rm -rf .deps
+
+maintainer-clean-depend:
+
+%.o: %.c
+	@echo '$(COMPILE) -c $<'; \
+	$(COMPILE) -Wp,-MD,.deps/$(*F).pp -c $<
+	@-cp .deps/$(*F).pp .deps/$(*F).P; \
+	tr ' ' '\012' < .deps/$(*F).pp \
+	  | sed -e 's/^\\$$//' -e '/^$$/ d' -e '/:$$/ d' -e 's/$$/ :/' \
+	    >> .deps/$(*F).P; \
+	rm .deps/$(*F).pp
+
+%.lo: %.c
+	@echo '$(LTCOMPILE) -c $<'; \
+	$(LTCOMPILE) -Wp,-MD,.deps/$(*F).pp -c $<
+	@-sed -e 's/^\([^:]*\)\.o[ 	]*:/\1.lo \1.o :/' \
+	  < .deps/$(*F).pp > .deps/$(*F).P; \
+	tr ' ' '\012' < .deps/$(*F).pp \
+	  | sed -e 's/^\\$$//' -e '/^$$/ d' -e '/:$$/ d' -e 's/$$/ :/' \
+	    >> .deps/$(*F).P; \
+	rm -f .deps/$(*F).pp
 info-am:
 info: info-am
 dvi-am:
@@ -267,23 +323,25 @@
 maintainer-clean-generic:
 	-test -z "$(MAINTAINERCLEANFILES)" || rm -f $(MAINTAINERCLEANFILES)
 mostlyclean-am:  mostlyclean-binPROGRAMS mostlyclean-compile \
-		mostlyclean-tags mostlyclean-generic
+		mostlyclean-tags mostlyclean-depend mostlyclean-generic
 
 mostlyclean: mostlyclean-am
 
-clean-am:  clean-binPROGRAMS clean-compile clean-tags clean-generic \
-		mostlyclean-am
+clean-am:  clean-binPROGRAMS clean-compile clean-tags clean-depend \
+		clean-generic mostlyclean-am
 
 clean: clean-am
 
 distclean-am:  distclean-binPROGRAMS distclean-compile distclean-tags \
-		distclean-generic clean-am distclean-local
+		distclean-depend distclean-generic clean-am \
+		distclean-local
 
 distclean: distclean-am
 
 maintainer-clean-am:  maintainer-clean-binPROGRAMS \
 		maintainer-clean-compile maintainer-clean-tags \
-		maintainer-clean-generic distclean-am
+		maintainer-clean-depend maintainer-clean-generic \
+		distclean-am
 	@echo "This command is intended for maintainers to use;"
 	@echo "it deletes files that may require special tools to rebuild."
 
@@ -293,12 +351,13 @@
 maintainer-clean-binPROGRAMS uninstall-binPROGRAMS install-binPROGRAMS \
 mostlyclean-compile distclean-compile clean-compile \
 maintainer-clean-compile tags mostlyclean-tags distclean-tags \
-clean-tags maintainer-clean-tags distdir info-am info dvi-am dvi check \
-check-am installcheck-am installcheck install-exec-am install-exec \
-install-data-am install-data install-am install uninstall-am uninstall \
-all-redirect all-am all installdirs mostlyclean-generic \
-distclean-generic clean-generic maintainer-clean-generic clean \
-mostlyclean distclean maintainer-clean
+clean-tags maintainer-clean-tags distdir mostlyclean-depend \
+distclean-depend clean-depend maintainer-clean-depend info-am info \
+dvi-am dvi check check-am installcheck-am installcheck install-exec-am \
+install-exec install-data-am install-data install-am install \
+uninstall-am uninstall all-redirect all-am all installdirs \
+mostlyclean-generic distclean-generic clean-generic \
+maintainer-clean-generic clean mostlyclean distclean maintainer-clean
 
 
 distclean-local:
--- blackbox-0.51.3.orig/ABOUT-NLS
+++ blackbox-0.51.3/ABOUT-NLS
@@ -0,0 +1,226 @@
+Notes on the Free Translation Project
+*************************************
+
+   Free software is going international!  The Free Translation Project
+is a way to get maintainers of free software, translators, and users all
+together, so that will gradually become able to speak many languages.
+A few packages already provide translations for their messages.
+
+   If you found this `ABOUT-NLS' file inside a distribution, you may
+assume that the distributed package does use GNU `gettext' internally,
+itself available at your nearest GNU archive site.  But you do *not*
+need to install GNU `gettext' prior to configuring, installing or using
+this package with messages translated.
+
+   Installers will find here some useful hints.  These notes also
+explain how users should proceed for getting the programs to use the
+available translations.  They tell how people wanting to contribute and
+work at translations should contact the appropriate team.
+
+   When reporting bugs in the `intl/' directory or bugs which may be
+related to internationalization, you should tell about the version of
+`gettext' which is used.  The information can be found in the
+`intl/VERSION' file, in internationalized packages.
+
+One advise in advance
+=====================
+
+   If you want to exploit the full power of internationalization, you
+should configure it using
+
+     ./configure --with-included-gettext
+
+to force usage of internationalizing routines provided within this
+package, despite the existence of internationalizing capabilities in the
+operating system where this package is being installed.  So far, only
+the `gettext' implementation in the GNU C library version 2 provides as
+many features (such as locale alias or message inheritance) as the
+implementation here.  It is also not possible to offer this additional
+functionality on top of a `catgets' implementation.  Future versions of
+GNU `gettext' will very likely convey even more functionality.  So it
+might be a good idea to change to GNU `gettext' as soon as possible.
+
+   So you need not provide this option if you are using GNU libc 2 or
+you have installed a recent copy of the GNU gettext package with the
+included `libintl'.
+
+INSTALL Matters
+===============
+
+   Some packages are "localizable" when properly installed; the
+programs they contain can be made to speak your own native language.
+Most such packages use GNU `gettext'.  Other packages have their own
+ways to internationalization, predating GNU `gettext'.
+
+   By default, this package will be installed to allow translation of
+messages.  It will automatically detect whether the system provides
+usable `catgets' (if using this is selected by the installer) or
+`gettext' functions.  If neither is available, the GNU `gettext' own
+library will be used.  This library is wholly contained within this
+package, usually in the `intl/' subdirectory, so prior installation of
+the GNU `gettext' package is *not* required.  Installers may use
+special options at configuration time for changing the default
+behaviour.  The commands:
+
+     ./configure --with-included-gettext
+     ./configure --with-catgets
+     ./configure --disable-nls
+
+will respectively bypass any pre-existing `catgets' or `gettext' to use
+the internationalizing routines provided within this package, enable
+the use of the `catgets' functions (if found on the locale system), or
+else, *totally* disable translation of messages.
+
+   When you already have GNU `gettext' installed on your system and run
+configure without an option for your new package, `configure' will
+probably detect the previously built and installed `libintl.a' file and
+will decide to use this.  This might be not what is desirable.  You
+should use the more recent version of the GNU `gettext' library.  I.e.
+if the file `intl/VERSION' shows that the library which comes with this
+package is more recent, you should use
+
+     ./configure --with-included-gettext
+
+to prevent auto-detection.
+
+   By default the configuration process will not test for the `catgets'
+function and therefore they will not be used.  The reasons are already
+given above: the emulation on top of `catgets' cannot provide all the
+extensions provided by the GNU `gettext' library.  If you nevertheless
+want to use the `catgets' functions use
+
+     ./configure --with-catgets
+
+to enable the test for `catgets' (this causes no harm if `catgets' is
+not available on your system).  If you really select this option we
+would like to hear about the reasons because we cannot think of any
+good one ourself.
+
+   Internationalized packages have usually many `po/LL.po' files, where
+LL gives an ISO 639 two-letter code identifying the language.  Unless
+translations have been forbidden at `configure' time by using the
+`--disable-nls' switch, all available translations are installed
+together with the package.  However, the environment variable `LINGUAS'
+may be set, prior to configuration, to limit the installed set.
+`LINGUAS' should then contain a space separated list of two-letter
+codes, stating which languages are allowed.
+
+Using This Package
+==================
+
+   As a user, if your language has been installed for this package, you
+only have to set the `LANG' environment variable to the appropriate
+ISO 639 `LL' two-letter code prior to using the programs in the
+package.  For example, let's suppose that you speak German.  At the
+shell prompt, merely execute `setenv LANG de' (in `csh'),
+`export LANG; LANG=de' (in `sh') or `export LANG=de' (in `bash').  This
+can be done from your `.login' or `.profile' file, once and for all.
+
+   An operating system might already offer message localization for
+many of its programs, while other programs have been installed locally
+with the full capabilities of GNU `gettext'.  Just using `gettext'
+extended syntax for `LANG' would break proper localization of already
+available operating system programs.  In this case, users should set
+both `LANGUAGE' and `LANG' variables in their environment, as programs
+using GNU `gettext' give preference to `LANGUAGE'.  For example, some
+Swedish users would rather read translations in German than English for
+when Swedish is not available.  This is easily accomplished by setting
+`LANGUAGE' to `sv:de' while leaving `LANG' to `sv'.
+
+Translating Teams
+=================
+
+   For the Free Translation Project to be a success, we need interested
+people who like their own language and write it well, and who are also
+able to synergize with other translators speaking the same language.
+Each translation team has its own mailing list, courtesy of Linux
+International.  You may reach your translation team at the address
+`LL@li.org', replacing LL by the two-letter ISO 639 code for your
+language.  Language codes are *not* the same as the country codes given
+in ISO 3166.  The following translation teams exist, as of December
+1997:
+
+     Chinese `zh', Czech `cs', Danish `da', Dutch `nl', English `en',
+     Esperanto `eo', Finnish `fi', French `fr', German `de', Hungarian
+     `hu', Irish `ga', Italian `it', Indonesian `id', Japanese `ja',
+     Korean `ko', Latin `la', Norwegian `no', Persian `fa', Polish
+     `pl', Portuguese `pt', Russian `ru', Slovenian `sl', Spanish `es',
+     Swedish `sv', and Turkish `tr'.
+
+For example, you may reach the Chinese translation team by writing to
+`zh@li.org'.
+
+   If you'd like to volunteer to *work* at translating messages, you
+should become a member of the translating team for your own language.
+The subscribing address is *not* the same as the list itself, it has
+`-request' appended.  For example, speakers of Swedish can send a
+message to `sv-request@li.org', having this message body:
+
+     subscribe
+
+   Keep in mind that team members are expected to participate
+*actively* in translations, or at solving translational difficulties,
+rather than merely lurking around.  If your team does not exist yet and
+you want to start one, or if you are unsure about what to do or how to
+get started, please write to `translation@iro.umontreal.ca' to reach the
+coordinator for all translator teams.
+
+   The English team is special.  It works at improving and uniformizing
+the terminology in use.  Proven linguistic skill are praised more than
+programming skill, here.
+
+Available Packages
+==================
+
+   Languages are not equally supported in all packages.  The following
+matrix shows the current state of internationalization, as of December
+1997.  The matrix shows, in regard of each package, for which languages
+PO files have been submitted to translation coordination.
+
+     Ready PO files    cs da de en es fi fr it ja ko nl no pl pt ru sl sv
+                     .----------------------------------------------------.
+     bash            |       []          []          []                   |  3
+     bison           |       []          []          []                   |  3
+     clisp           |       [] [] []    []                               |  4
+     cpio            |       []    []    []       [] []    []             |  6
+     diffutils       |       []    []    []                []          [] |  5
+     enscript        |       []    [] [] []          []             []    |  6
+     fileutils       | []    []    []    []       [] []    [] []    [] [] | 10
+     findutils       |       []    []    [] []    [] []    []    []    [] |  9
+     flex            |             []    []       []                   [] |  4
+     gcal            |       []          []          []    []          [] |  5
+     gettext         |    [] []    []    []       [] [] [] [] []    [] [] | 12
+     grep            |       []    []    []       [] [] [] []    [] [] [] | 10
+     hello           |    [] []    []    []       [] [] [] [] []    [] [] | 11
+     id-utils        |       []          []                []             |  3
+     indent          |    [] []                   []       []    []       |  5
+     libc            |       []    []    []       [] []    []          [] |  7
+     m4              |       []          []    []    []          []    [] |  6
+     make            |       []    []    []       [] []    []             |  6
+     music           |                   []                []             |  2
+     ptx             |       []    []    []          [] [] [] []       [] |  8
+     recode          |    [] []    []    []          []    [] []    [] [] |  9
+     sh-utils        |       []    []    []          [] [] [] []       [] |  8
+     sharutils       | []    []    []    []          []                [] |  6
+     tar             | []    []          [] []    [] [] [] [] []    [] [] | 11
+     texinfo         | []    []          []                               |  3
+     textutils       | []    []    []    []       [] [] [] []          [] |  9
+     wdiff           | []    []    []    []          [] [] []          [] |  8
+                     `----------------------------------------------------'
+       17 languages    cs da de en es fi fr it ja ko nl no pl pt ru sl sv
+       27 packages      6  4 25  1 18  1 26  2  1 12 20  9 19  7  4  7 17  179
+
+   Some counters in the preceding matrix are higher than the number of
+visible blocks let us expect.  This is because a few extra PO files are
+used for implementing regional variants of languages, or language
+dialects.
+
+   For a PO file in the matrix above to be effective, the package to
+which it applies should also have been internationalized and
+distributed as such by its maintainer.  There might be an observable
+lag between the mere existence a PO file and its wide availability in a
+distribution.
+
+   If December 1997 seems to be old, you may fetch a more recent copy
+of this `ABOUT-NLS' file on most GNU archive sites.
+
--- blackbox-0.51.3.orig/debian/README.debian
+++ blackbox-0.51.3/debian/README.debian
@@ -0,0 +1,14 @@
+blackbox for DEBIAN
+----------------------
+
+This is a windows manager for X.  It is similar to packages such as
+Window Maker, Enlightenment, and FVWM2.  You might be interested in this
+package if you are tired of window managers that are a heavy drain on
+your system resources, but you still want an attractive and modern-looking
+interface.
+
+see http://blackbox.alug.org for the official home page
+
+If none of this sounds familiar to you, you probably don't want this package.
+
+Brent A. Fulgham <bfulgham@debian.org>, Thu, 22 Oct 1999 22:07:09 -0700
--- blackbox-0.51.3.orig/debian/blackbox.1
+++ blackbox-0.51.3/debian/blackbox.1
@@ -0,0 +1,34 @@
+.TH NAME SECTION 
+.\" NAME should be all caps, SECTION should be 1-8, maybe w/ subsection
+.\" other parms are allowed: see man(7), man(1)
+.SH BLACKBOX WINDOW MANAGER
+blackbox \- window manager for X 
+.SH SYNOPSIS
+.B blackbox
+.I "[options] files ..."
+.br
+.SH "DESCRIPTION"
+This manual page documents briefly the
+.BR blackbox 
+window manager.
+.PP
+.B blackbox
+is a program that maintains control of the X display while you
+work with various applications.  It provides you with multiple
+workspaces, menus for launching applications, and attractive
+window decorations.
+.SH OPTIONS
+Program options are provided in configuration files.  In the Debian
+distribution, these files are located in /etc/X11/blackbox.  Individual
+users' customizations will be saved in their home directory upon
+exiting blackbox.  There should be no need to manually edit this file.
+
+.SH "SEE ALSO"
+If you are using this program, you really should be using the Debian
+menu system.  Check the media your distribution came in, or a local
+Debian mirror (http://www.debian.org) for more details.
+.SH AUTHOR
+This manual page was written by Brent A. Fulgham <bfulgham@debian.org>,
+for the Debian GNU/Linux system (but may be used by others).  Any
+mistakes or omissions are my fault, and inquiries should be directed
+to me (not the primary author).
--- blackbox-0.51.3.orig/debian/bsetroot.1
+++ blackbox-0.51.3/debian/bsetroot.1
@@ -0,0 +1,37 @@
+.TH NAME SECTION 
+.\" NAME should be all caps, SECTION should be 1-8, maybe w/ subsection
+.\" other parms are allowed: see man(7), man(1)
+.SH BLACKBOX ROOT WINDOW SETTINGS
+bsetroot \- root window configuration utility for X 
+.SH SYNOPSIS
+.B bsetroot
+.I "[options]  ..."
+    -display <string>        use display connection
+    -fg <color>              use foreground color
+    -bg <color>              use background color
+    -help                    print help text and exit
+    -solid <color>           use solid color
+    -mod <x> <y>             use modula pattern
+.br
+.SH "DESCRIPTION"
+This manual page documents briefly the
+.B bsetroot  
+utility.
+.PP
+.B bsetroot
+is a program that maintains control of the root window, allowing
+your to set the background/foreground colors and assign patterns.
+.SH OPTIONS
+Program options are provided on the command line.  These commands may
+be located in your .xinitrc file to provide customization of the 
+root window.
+
+.SH "SEE ALSO"
+If you are using this program, you really should be using the Debian
+menu system.  Check the media your distribution came in, or a local
+Debian mirror (http://www.debian.org) for more details.
+.SH AUTHOR
+This manual page was written by Brent A. Fulgham <bfulgham@debian.org>,
+for the Debian GNU/Linux system (but may be used by others).  Any
+mistakes or omissions are my fault, and inquiries should be directed
+to me (not the primary author).
--- blackbox-0.51.3.orig/debian/changelog
+++ blackbox-0.51.3/debian/changelog
@@ -0,0 +1,148 @@
+blackbox (0.51.3-5) unstable; urgency=low
+
+  * Add some wild-cards to support non-ISO-8859-1 folks using style data
+    files that are not internationalized.
+    (Closes #50715)
+  * Happy Thanksgiving to any United States users :-)
+
+ -- Brent A. Fulgham <bfulgham@debian.org>  Mon, 28 Nov 1999 22:25:08 -0700
+
+blackbox (0.51.3-4) unstable; urgency=low
+
+  * Include /etc/X11/blackbox as a conffile
+  * More escaping of '(' and ')' for filenames, etc.
+
+ -- Brent A. Fulgham <bfulgham@debian.org>  Mon, 8 Nov 1999 10:15:08 -0700
+
+blackbox (0.51.3-3) unstable; urgency=low
+
+  * Rename "bbaddstyle" to "update-bbstyles"
+  * update-bbstyles placed in /usr/sbin
+  * Tempfiles are now placed in /temp
+
+ -- Brent A. Fulgham <bfulgham@debian.org>  Fri, 22 Oct 1999 10:10:40 -0700
+
+blackbox (0.51.3-2) unstable; urgency=low
+
+  * Lintian fixes
+  * Corrections on manpage
+  * Many corrections and helpful hints from Sean Perry (Many thanks!)
+  * Updated URL for blackbox homepage
+  * Move old "Appearance" menu entry to "Styles"
+  * Update to look for menu entry in /etc/X11 to meet Debian standards
+  * Creation of "bbaddstyle", a script used to insert new styles into
+    the style menu, or rebuild it in whole from the styles directory.
+
+ -- Brent A. Fulgham <bfulgham@debian.org>  Fri, 22 Oct 1999 10:10:40 -0700
+
+blackbox (0.51.3-1.1) unstable; urgency=low
+
+  * NMU for blackbox updates
+      KDE support is on and works (0.51.3.1 patch level now)
+	  cleaned up maintainer scripts
+	  proper FHS compliance
+	  use dh_installmenu, rename debian/blackbox -> debian/menu-method
+
+ -- Sean E. Perry <shaleh@debian.org>  Fri, 22 Oct 1999 03:15:37 -0700
+
+blackbox (0.51.3-1) unstable; urgency=low
+
+  * New upstream version
+  * Removed old breugal entry from menu list.  This no longer
+    ships with the application.
+  * Some additional Japanese translation data, thanks to Yasayuki
+    Furukawa.
+
+ -- Brent A. Fulgham <bfulgham@debian.org>  Tue,  11 Oct 1999 21:32:15 -0700
+
+blackbox (0.51.2-4) unstable; urgency=low
+
+  * Remove ginstall from 'rules' file.
+
+ -- Brent A. Fulgham <bfulgham@debian.org>  Tue,  20 Sep 1999 20:37:45 -0700
+
+blackbox (0.51.2-3) unstable; urgency=low
+
+  * Corrected a linking error on the documentation.
+
+ -- Brent A. Fulgham <bfulgham@debian.org>  Tue,  16 Sep 1999 21:15:45 -0700
+
+blackbox (0.51.2-2) unstable; urgency=low
+
+  * Added Yasayuki Furukawa's i18n patch (submitted by
+    Debian-JP maintainer Noriaki Matoi.)  I ported it
+    to the new 0.51.2 version of blackbox, but almost
+    certainly missed some potfile stuff.   International
+    folks, please fill in the slots!!!!!
+
+ -- Brent A. Fulgham <bfulgham@debian.org>  Tue,  10 Sep 1999 21:15:45 -0700
+
+blackbox (0.51.2-1) unstable; urgency=low
+
+  * I am now taking over ownership of this package.
+  * New upstream source
+  * Move docs to /usr/share/doc/blacbox (to meet new standards)
+
+ -- Brent A. Fulgham <bfulgham@debian.org>  Tue,  8 Sep 1999 19:45:02 -0700
+
+blackbox (0.50.5-1) unstable; urgency=low
+
+  * Non-maintainer upload.
+  * New upstream source
+  * Fix menu integration issue
+
+ -- Brent A. Fulgham <bfulgham@debian.org>  Tue,  22 Jun 1999 14:45:02 -0700
+
+blackbox (0.50.3-2.2) unstable; urgency=low
+
+  * Non-maintainer upload.
+  * debian/rules (clean): ignore errors on make distclean and do it in the
+    right directory.
+
+ -- James Troup <james@nocrew.org>  Tue,  1 Jun 1999 13:29:31 -0400
+
+blackbox (0.50.3-2.1) unstable; urgency=low
+
+  * Non-maintainer upload to fix build problem.
+  * Use 'make distclean' in debian/rules to also remove config.cache. Existance
+    of that file could make compilation from source package impossible.
+    Fixes: #32369.
+
+ -- Roman Hodek <Roman.Hodek@informatik.uni-erlangen.de>  Wed, 10 Mar 1999 14:57:15 +0100
+
+blackbox (0.50.3-2) unstable; urgency=low
+
+  * Added support for Blackbox native themes, including the artsy "Brueghel"
+       themes.
+  * Better integration with the Debian Menu system
+  * NMU -- on behalf of Kevin Poorman
+        
+ -- Brent A. Fulgham <bfulgham@debian.org>  Mon, 1 Mar 1999 22:47:11 -0800
+	          
+blackbox (0.50.3-1) unstable; urgency=low
+
+  * Updated sources
+  * NMU -- on behalf of Kevin Poorman
+    
+ -- Brent A. Fulgham <bfulgham@debian.org>  Sun, 28 Feb 1999 23:06:51 -0800
+     
+     
+     blackbox (0.50.2-1) unstable; urgency=low
+
+  * Updated sources
+  * NMU -- on behalf of Kevin Poorman
+
+ -- Brent A. Fulgham <bfulgham@debian.org>  Sat, 16 Jan 1999 11:55:01 -0700
+
+
+blackbox (0.40.9-1) unstable; urgency=low
+
+  * Initial Release.
+  * NMU -- on behalf of Kevin Poorman
+
+ -- Brent A. Fulgham <bfulgham@debian.org>  Thu, 15 Oct 1998 18:17:09 -0700
+
+Local variables:
+mode: debian-changelog
+add-log-mailing-address: "bfulgham@debian.org"
+End:
--- blackbox-0.51.3.orig/debian/conffiles
+++ blackbox-0.51.3/debian/conffiles
@@ -0,0 +1,2 @@
+/etc/menu-methods/blackbox
+/etc/X11/blackbox
--- blackbox-0.51.3.orig/debian/control
+++ blackbox-0.51.3/debian/control
@@ -0,0 +1,23 @@
+Source: blackbox
+Section: x11
+Priority: optional
+Maintainer: Brent A. Fulgham <bfulgham@debian.org>
+Standards-Version: 2.4.0.0
+
+Package: blackbox
+Architecture: any
+Depends: ${shlibs:Depends}, gettext
+Suggests: menu (>=1.5)
+Description: Window manager for X 
+ This is a window manager for X.  It is similar in many respects to
+ such popular packages as Window Maker, Enlightenment, and FVWM2.  You
+ might be interested in this package if you are tired of window managers
+ that are a heavy drain on your system resources, but you still want
+ an attractive and modern-looking interface.
+ .
+ The best part of all is that this program is coded in C++, so it
+ is even more attractive "under the hood" than it is in service -- no
+ small feat.
+ .
+ If none of this sounds familiar to you, or you want your computer to
+ look like Windows 98, you probably don't want this package.
--- blackbox-0.51.3.orig/debian/copyright
+++ blackbox-0.51.3/debian/copyright
@@ -0,0 +1,31 @@
+This package was debianized by Brent A. Fulgham bfulgham@debian.org on
+Thu, 15 Oct 1998 18:17:09 -0700.
+
+It was downloaded from http://freshmeat.net
+
+Upstream Author(s): Brad Hughes <bhughes@tcac.net> 
+
+Copyright:
+
+-- README for Blackbox 0.50.x Beta - an X11 Window manager
+-- Copyright (c) 1997, 1998, 1999 by Brad Hughes, bhughes@tcac.net
+--
+--  This program is free software; you can redistribute it and/or modify
+--  it under the terms of the GNU General Public License as published by
+--  the Free Software Foundation; either version 2 of the License, or
+--  (at your option) any later version.
+--
+--  This program is distributed in the hope that it will be useful,
+--  but WITHOUT ANY WARRANTY; without even the implied warranty of
+--  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+--  GNU General Public License for more details.
+--
+--  You should have received a copy of the GNU General Public License
+--  along with this program; if not, write to the Free Software
+--  Foundation, 59 Temple Place - Suite 300,
+--  Boston, MA 02111-1307, USA.
+--
+-- (See the included file COPYING / GPL-2.0)
+-- 
+Note:  These files are not included with the distribution, since
+they are verbatim copies of /usr/doc/copyright/GPL
--- blackbox-0.51.3.orig/debian/dirs
+++ blackbox-0.51.3/debian/dirs
@@ -0,0 +1,11 @@
+etc/menu-methods
+etc/X11/blackbox
+usr/bin
+usr/sbin
+usr/share/man/man1
+usr/share/doc
+usr/share/doc/blackbox
+usr/share/doc/blackbox/examples
+usr/share/blackbox
+usr/share/locale/ja
+usr/share/locale/ja/LC_MESSAGES
--- blackbox-0.51.3.orig/debian/docs
+++ blackbox-0.51.3/debian/docs
@@ -0,0 +1 @@
+AUTHORS README TODO NEWS
--- blackbox-0.51.3.orig/debian/menu
+++ blackbox-0.51.3/debian/menu
@@ -0,0 +1,12 @@
+?package(blackbox):needs=wm \
+	section="WindowManagers" title="Blackbox" \
+  	command="/usr/bin/blackbox"
+?package(blackbox):needs=blackbox \
+	section=WindowManagers title="Exit" \
+	command="exit"
+?package(blackbox):needs=blackbox \
+	section="WindowManagers" title="Reconfigure" \
+	command="reconfig"
+?package(blackbox):needs=blackbox \
+	section="Styles" title="/usr/share/blackbox/styles/stylesmenu" \
+	command="include"
--- blackbox-0.51.3.orig/debian/menu-method
+++ blackbox-0.51.3/debian/menu-method
@@ -0,0 +1,29 @@
+#!/usr/sbin/install-menu
+#
+# Generates blackbox menus for all registered applications.
+compat="menu-1"
+
+!include menu.h
+
+genmenu="blackbox-menu"
+rootprefix="/etc/X11/blackbox/"
+userprefix=""
+treewalk=(M)
+rootsection="/Debian"
+
+supported
+    x11=   "  [exec] (" esc($title, "()") ") {" $command "}\n" 
+    wm=	   "  [restart] ("  esc($title, "()")  ")  {" $command "}\n" 
+    text=  "  [exec] (" esc($title, "()") ") { xterm -T " esc($title, "()") " -e " $command "}\n"
+    blackbox= "[" $command "] (" esc($title, "()") ")\n"
+endsupported
+
+preoutput= \
+  "# Automatically generated file. Do not edit (see /usr/share/doc/menu/README)\n\n\n\nDebian MENU\n\n"
+postoutput= \
+   "\nDebian END\n"
+
+startmenu= " [begin] (Debian)\n"
+submenutitle= "[submenu] (" esc($title,"()") ") {" esc($longtitle,"()") "}\n"
+endmenu= "[end]\n"
+
--- blackbox-0.51.3.orig/debian/postinst
+++ blackbox-0.51.3/debian/postinst
@@ -0,0 +1,62 @@
+#!/bin/sh
+#
+#  Blackbox postinst
+#
+#  Shamelessly ripped off of Marcelo Magallon's script
+#     by Brent Fulgham <bfulgham@debian.org>
+#
+set -e
+inst=/etc/menu-methods/blackbox
+wmfile="/etc/X11/window-managers"
+WMentry="/usr/bin/blackbox"
+script='print "'$WMentry'\n" unless (/^#(?!--)/ || $done) ; $done=1 unless /^#(?!--)/'
+
+add_wm_entry ()
+{
+    if [ -e $wmfile ] ; then
+	if [ -x /usr/sbin/register-window-manager ] ; then
+		/usr/sbin/register-window-manager --add $WMentry
+	else
+		echo "No /usr/sbin/register-window-manager available.  Please be sure"
+		echo "you are running a current X-windows package, and have installed"
+		echo "xfree86-common."
+		exit 2
+	fi
+    else
+        cat > $wmfile <<EOF
+# This file contains a list of available window managers.  The default
+# Xsession file will start the first window manager that it can
+# in this list.
+/usr/bin/blackbox
+/usr/X11R6/bin/twm
+EOF
+    fi
+}
+
+case "$1" in
+    configure)
+        add_wm_entry
+        
+        if test -x /usr/sbin/wm-menu-config; then 
+            wm-menu-config blackbox on; 
+        fi
+	if [ -d /usr/doc -a ! -e /usr/doc/blackbox -a -d /usr/share/doc/blackbox ]; then
+		ln -sf ../share/doc/blackbox /usr/doc/blackbox
+	fi
+	if [ -f /etc/X11/blackbox/Blackbox-menu ]; then
+		rm /etc/X11/blackbox/Blackbox-menu
+	fi
+
+    ;;
+
+    abort-upgrade|abort-deconfigure|abort-remove)
+        # how did we get here?  Force a non-zero exit code
+        exit 1
+    ;;
+
+    *)
+        echo "postinst called with unknown argument: \$1" >&2
+    ;;
+esac
+
+#DEBHELPER#
--- blackbox-0.51.3.orig/debian/postrm
+++ blackbox-0.51.3/debian/postrm
@@ -0,0 +1,28 @@
+#!/bin/sh
+set -e
+if test -x /usr/sbin/wm-menu-config; then wm-menu-config blackbox off; fi
+inst=/etc/menu-methods/blackbox
+Blackbox_entry="/usr/bin/blackbox"
+window_managers_file="/etc/X11/window-managers"
+
+case "$1" in
+    remove)
+    ;;
+    purge)
+        #remove blackbox reference in the window-managers file:
+	if [ -x /usr/sbin/register-window-manager ] ; then
+		register-window-manager --remove $Blackbox_entry
+	else
+		echo "Your system is missing /usr/sbin/register-window-manager"
+		echo "Please edit /etc/X11/window-managers by hand to remove"
+		echo "the entry for blackbox."
+	fi
+    ;;
+    upgrade);;
+    *)
+    	echo "postrm called with unknown argument \`$1'" >&2
+	exit 0
+    ;;
+esac
+
+#DEBHELPER#
--- blackbox-0.51.3.orig/debian/rules
+++ blackbox-0.51.3/debian/rules
@@ -0,0 +1,108 @@
+#!/usr/bin/make -f
+# MAde with the aid of dh_make, by Craig Small
+# Sample debian/rules that uses debhelper. GNU copyright 1997 by Joey Hess.
+# Some lines taken from debmake, by Cristoph Lameter.
+
+# Uncomment this to turn on verbose mode.
+#export DH_VERBOSE=1
+
+PACKAGE=blackbox
+CATALOGS=ja.gmo
+
+build: build-stamp
+build-stamp:
+	dh_testdir
+	aclocal; autoheader; automake; autoconf
+	./configure --prefix=/usr --enable-nls --enable-kde
+	
+	# Add here commands to compile the package.
+	$(MAKE) 
+
+	touch build-stamp
+
+clean:
+	dh_testdir
+	dh_testroot
+	rm -f build-stamp install-stamp
+
+	# Add here commands to clean up after the build process.
+	-$(MAKE) distclean
+
+	dh_clean
+	
+
+install: install-stamp
+install-stamp: build-stamp
+	dh_testdir
+	dh_testroot
+	dh_clean -k
+	dh_installdirs
+	dh_installmenu
+
+	# Add here commands to install the package into debian/tmp.
+	$(MAKE) install DESTDIR=`pwd`/debian/tmp
+	cp `pwd`/debian/blackbox.1 `pwd`/debian/tmp/usr/share/man/man1/blackbox.1
+	cp `pwd`/debian/bsetroot.1 `pwd`/debian/tmp/usr/share/man/man1/bsetroot.1
+	cp `pwd`/debian/update-bbstyles.1 `pwd`/debian/tmp/usr/share/man/man1/update-bbstyles.1
+	cp `pwd`/data/README 	`pwd`/debian/tmp/usr/share/doc/blackbox/examples/README.menus
+	cp `pwd`/data/menu.in	`pwd`/debian/tmp/usr/share/doc/blackbox/examples/menu.in
+	cp `pwd`/data/menu.ja.in  `pwd`/debian/tmp/usr/share/doc/blackbox/examples/menu.ja.in
+	cp `pwd`/ChangeLog `pwd`/debian/tmp/usr/share/doc/blackbox/changelog
+	cp `pwd`/debian/update-bbstyles `pwd`/debian/tmp/usr/sbin
+
+	# UGLY!!!!  Move the I18N stuff into proper directory
+	catalogs='$(CATALOGS)'; \
+	for cat in $$catalogs; do \
+	  lang=`echo $$cat | sed 's/.gmo$$//'`; \
+	  if test -r `pwd`/po/$$cat; then \
+	    /usr/bin/install -m 644 `pwd`/po/$$cat `pwd`/debian/tmp/usr/share/locale/$$lang/LC_MESSAGES/blackbox.mo; \
+	  fi; \
+	done
+
+	# Append some wild-card options on font selections so that
+	# non-internationalized menu files can still be used without causing
+	# problems for international users.  Make sense?  I thought not...
+	styles=`ls \`pwd\`/debian/tmp/usr/share/blackbox/styles/`; \
+	for style in $$styles; do \
+	  if test -f `pwd`/debian/tmp/usr/share/blackbox/styles/$$style; then \
+	    sed -f `pwd`/debian/pass1 `pwd`/debian/tmp/usr/share/blackbox/styles/$$style > `pwd`/debian/tmp/usr/share/blackbox/styles/temp; \
+	    sed -f `pwd`/debian/pass2 `pwd`/debian/tmp/usr/share/blackbox/styles/temp > `pwd`/debian/tmp/usr/share/blackbox/styles/$$style; \
+	  fi; \
+	done
+	    
+	touch install-stamp
+
+# Build architecture-independent files here.
+binary-indep: build install
+# We have nothing to do by default.
+
+# Build architecture-dependent files here.
+binary-arch: build install
+#	dh_testversion
+	dh_testdir
+	dh_testroot
+	dh_installdocs
+#	dh_installexamples
+	dh_installmenu
+#	dh_installemacsen
+#	dh_installinit
+#	dh_installcron
+#	dh_installmanpages
+#	dh_undocumented
+	dh_installchangelogs 
+	dh_strip
+	dh_compress
+	dh_fixperms
+	dh_suidregister
+	dh_installdeb
+	dh_shlibdeps
+	dh_gencontrol
+#	dh_makeshlibs
+	dh_md5sums
+	dh_builddeb
+
+source diff:                                                                  
+	@echo >&2 'source and diff are obsolete - use dpkg-source -b'; false
+
+binary: binary-indep binary-arch
+.PHONY: build clean binary-indep binary-arch binary
--- blackbox-0.51.3.orig/debian/styles.temp
+++ blackbox-0.51.3/debian/styles.temp
@@ -0,0 +1,16 @@
+[style] (pnoidja)    {/usr/share/blackbox/styles/pnoidja}
+[style] (blackmagic)    {/usr/share/blackbox/styles/blackmagic}
+[style] (coldsteel)    {/usr/share/blackbox/styles/coldsteel}
+[style] (colorpurple)    {/usr/share/blackbox/styles/colorpurple}
+[style] (darkgreen)    {/usr/share/blackbox/styles/darkgreen}
+[style] (default)    {/usr/share/blackbox/styles/default}
+[style] (gnoid)    {/usr/share/blackbox/styles/gnoid}
+[style] (green)    {/usr/share/blackbox/styles/green}
+[style] (onoid)    {/usr/share/blackbox/styles/onoid}
+[style] (pnoid)    {/usr/share/blackbox/styles/pnoid}
+[style] (previous)    {/usr/share/blackbox/styles/previous}
+[style] (results)    {/usr/share/blackbox/styles/results}
+[style] (slatebox)    {/usr/share/blackbox/styles/slatebox}
+[style] (steelblue)    {/usr/share/blackbox/styles/steelblue}
+[style] (steelbox)    {/usr/share/blackbox/styles/steelbox}
+[style] (stylesmenu)    {/usr/share/blackbox/styles/stylesmenu}
--- blackbox-0.51.3.orig/debian/update-bbstyles.1
+++ blackbox-0.51.3/debian/update-bbstyles.1
@@ -0,0 +1,52 @@
+.TH NAME SECTION 
+.\" NAME should be all caps, SECTION should be 1-8, maybe w/ subsection
+.\" other parms are allowed: see man(7), man(1)
+.SH BLACKBOX STYLE MENU UPDATE
+update-bbstyles \- Blackbox Style Menu Update
+.SH SYNOPSIS
+.B update-bbstyles
+.I "--update  [filename]  [title]"
+.I "--build"
+.I "--remove  [title]"
+.br
+.SH "DESCRIPTION"
+This manual page documents briefly the
+.BR update-bbstyles 
+style menu update script.
+.PP
+.B update-bbstyles
+This program is designed to be used in conjunction with
+Brad Hughes' Blackbox window manager.  It can be used in two  
+modes for creating or updating the style menu on your system.
+.SH UPDATE
+In update mode, the stylemenu in /usr/share/blackbox/styles 
+is read.  The new style is inserted at the proper lexicographical
+(alphabetical) location in the style as decided by comparing
+the style titles.  The filename from the command line is 
+verified for existance before the update will proceed.  Both
+the title and the filename are required for the update to
+take place.
+
+.SH BUILD
+This creates a brand-new style menu in /usr/share/blackbox/styles
+based on the files present in the /usr/share/blackbox/styles
+directory.  It ignores the stylesmenu itself.
+
+WARNING:  Because the blackbox style format does not contain
+meta-data for the title, this information is lost when running
+a build.  In this mode, the filenames are used for the title.
+The stylemenu may be hand-edited to provide the desired
+title where the filename is not appropriate.
+
+.SH REMOVE
+This removes the style "Title" from the styles menu
+in the /usr/share/blackbox/styles directory.
+
+.SH "SEE ALSO"
+If you are using this program, you really should be using the Debian
+menu system.  Check the media your distribution came in, or a local
+Debian mirror (http://www.debian.org) for more details.
+.SH AUTHOR
+This manual page was written by Brent A. Fulgham <bfulgham@debian.org>,
+for the Debian GNU/Linux system (but may be used by others).
+
--- blackbox-0.51.3.orig/debian/update-bbstyles
+++ blackbox-0.51.3/debian/update-bbstyles
@@ -0,0 +1,187 @@
+#!/usr/bin/perl 
+#
+#  update-bbstyles -- stylemenu update script
+#  Copyright (c) 1999 by Brent A. Fulgham <bfulgham@debian.org>
+#  
+#  This program is free software, under the terms of the
+#  GNU General Public License as published by the Free Software
+#  Foundation; either version 2 of the license, or (at your
+#  option) any later version.
+#
+#  This routine is designed to be used in conjunction with 
+#  Brad Hughes' Blackbox window manager.
+#
+#  It can be run in three modes:
+#
+#    --update  [filename] [title]
+#
+#        This updates the stylemenu in /usr/share/blackbox/styles with
+#        the style file "filename" of name "Title".  Note that Title
+#        should be quoted.  This routine places the new style in the
+#        menu in alphabetical order.
+#
+#    --remove  [title]
+#
+#        This removes the style called "title" from the menu file.
+#        Note that title should be quoted. 
+#
+#    --build
+#
+#        This creates a brand-new style menu in /usr/share/blackbox/styles
+#        based on the files present in the /usr/share/blackbox/style
+#        directory.  Note that because the blackbox style format does
+#        not contain meta-data for the title, this information is lost
+#        and the file name is used for the title.  The stylemenu may
+#        be hand-edited to provide the desired title.
+
+#
+#  Globals
+#
+$stylesmenu = "/usr/share/blackbox/styles/stylesmenu";
+$stylesdir  = "/usr/share/blackbox/styles";
+$tempstyle = "/tmp/styles.temp";
+
+#
+#  Initialization
+#
+sub initialize 
+{
+    if (($ARGV[0] eq "--update") || ($ARGV[0] eq "-u"))
+    {
+    	$filename = $ARGV[1]  || die "No filename argument given\n";
+	$title = $ARGV[2]     || die "No title argument given\n";
+    	return 1;
+    }
+    elsif (($ARGV[0] eq "--build") || ($ARGV[0] eq "-b"))
+    {
+    	return 2;
+    }
+    elsif (($ARGV[0] eq "--remove") || ($ARGV[0] eq "-r"))
+    {
+        $title = $ARGV[1]     || die "No title argument given\n";
+        return 3;
+    }
+    else 	# Bad input
+    {
+        print "\n";
+    	print "Usage:  update-bbstyles [--update] [filename] [title]\n";
+	print "        update-bbstyles [--build]\n\n";
+	print "        update-bbstyles [--remove] [title]\n";
+	print "  -u, --update          Add an entry to the styles menu\n";
+	print "  -b, --build           Build the style menu from the\n";
+	print "                        files in the style directory.\n";
+	print "  -r, --remove          Remove an entry from the menu.\n\n";
+	print "Note:  The build option will destroy any title information\n";
+	print "in the menu, because the style files do not contain this\n";
+	print "information.  The filename will be used as the style title\n";
+	print "in this case.\n";
+	exit 1;
+    }
+}
+
+#
+#  Update the style menu
+#
+sub update
+{
+    print "Updating the style menu\n";
+    opendir(STYLESDIR, $stylesdir) || die "Sorry.  No $stylesdir directory.\n";
+    if (-f "$stylesdir/$filename")
+    {
+    	# Update the style menu
+	open(INSTYLE, "$stylesmenu") || die "Couldn't open $stylesmenu\n";
+	open(TEMPFILE, ">$tempstyle") || die "Sorry.  Can't write to $tempstyle.\n";
+	$last = "a";
+	$used = 0;
+	while (<INSTYLE>)
+	{
+            chomp($_);
+            @fields = split(/[()]/, $_);
+            if ($filename gt $fields[1]  || $used == 1)
+            {
+	        $last = $fields[1];
+		print TEMPFILE "$_\n";
+            }
+	    else
+	    {
+	        print TEMPFILE "[style]  ($title)   {$stylesdir/$filename}\n";
+		print TEMPFILE "$_\n";
+		$used = 1;
+	    }
+	}
+    }
+    else
+    {
+        die "$filename is not present in the $stylesdir directory.\n";
+    }
+    close($TEMPFILE);
+    close($INSTYLE);
+    closedir($STYLESDIR);
+}
+
+
+#
+#  Build the style menu from the directory entries
+#
+sub build
+{
+    print "Building the style menu\n";
+    opendir(STYLESDIR, $stylesdir) || die "Sorry.  No $stylesdir directory.\n";
+    open(STYLEFILE, ">$tempstyle") || die "Sorry.  Can't write to $tempstyle.\n";
+
+    while ($name = readdir(STYLESDIR))
+    {
+        if (-f "$stylesdir/$name" && $name ne "stylesmenu" && $name ne "styles.temp")
+	{
+            print STYLEFILE "[style] ($name)    {$stylesdir/$name}\n"
+	}
+    }
+    close(STYLEFILE);
+    close(TEMPFILE);
+    unlink($stylesmenu) || die "Can't remove old style menu: $stylesmenu\n";
+    rename($tempstyle, $stylesmenu);
+    closedir(STYLESDIR);
+} 
+
+#
+#  Remove a Style from the style menu
+#
+sub remove
+{
+    print "Removing $title from the style menu\n";
+    opendir(STYLESDIR, $stylesdir) || die "Sorry.  No $stylesdir directory.\n";
+    open(INSTYLE, "$stylesmenu") || die "Couldn't open $stylesmenu\n";
+    open(TEMPFILE, ">$tempstyle") || die "Sorry.  Can't write to $tempstyle.\n";
+    while (<INSTYLE>)
+    {
+        chomp($_);
+        @fields = split(/[()]/, $_);
+        if ($title ne $fields[1])
+        {
+	    print TEMPFILE "$_\n";
+	}
+    }
+    close(STYLEFILE);
+    close(TEMPFILE);
+    unlink($stylesmenu) || die "Can't remove old style menu: $stylesmenu\n";
+    rename($tempstyle, $stylesmenu);
+    closedir(STYLESDIR);
+}
+
+#
+#  Main routine
+#
+$mode = initialize();
+
+if ($mode == 1)		# Update
+{
+    update();
+}
+elsif ($mode == 2)	# Build
+{
+    build();
+}
+else			# Remove
+{
+    remove();
+}
--- blackbox-0.51.3.orig/debian/pass1
+++ blackbox-0.51.3/debian/pass1
@@ -0,0 +1,5 @@
+/-\*-\*-\*-\*$/{
+a\
+,-*-medium-r-*--14-*,*
+}
+
--- blackbox-0.51.3.orig/debian/pass2
+++ blackbox-0.51.3/debian/pass2
@@ -0,0 +1,5 @@
+/-\*-\*-\*-\*$/{
+N
+s/\n//
+}
+
--- blackbox-0.51.3.orig/intl/Makefile.in
+++ blackbox-0.51.3/intl/Makefile.in
@@ -0,0 +1,214 @@
+# Makefile for directory with message catalog handling in GNU NLS Utilities.
+# Copyright (C) 1995, 1996, 1997 Free Software Foundation, Inc.
+#
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+#
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+
+PACKAGE = @PACKAGE@
+VERSION = @VERSION@
+
+SHELL = /bin/sh
+
+srcdir = @srcdir@
+top_srcdir = @top_srcdir@
+top_builddir = ..
+VPATH = @srcdir@
+
+prefix = @prefix@
+exec_prefix = @exec_prefix@
+transform = @program_transform_name@
+libdir = $(exec_prefix)/lib
+includedir = $(prefix)/include
+datadir = $(prefix)/@DATADIRNAME@
+localedir = $(datadir)/locale
+gnulocaledir = $(prefix)/share/locale
+gettextsrcdir = @datadir@/gettext/intl
+aliaspath = $(localedir):.
+subdir = intl
+
+INSTALL = @INSTALL@
+INSTALL_DATA = @INSTALL_DATA@
+MKINSTALLDIRS = @MKINSTALLDIRS@
+
+l = @l@
+
+AR = ar
+CC = @CC@
+LIBTOOL = @LIBTOOL@
+RANLIB = @RANLIB@
+
+DEFS = -DLOCALEDIR=\"$(localedir)\" -DGNULOCALEDIR=\"$(gnulocaledir)\" \
+-DLOCALE_ALIAS_PATH=\"$(aliaspath)\" @DEFS@
+CPPFLAGS = @CPPFLAGS@
+CFLAGS = @CFLAGS@
+LDFLAGS = @LDFLAGS@
+
+COMPILE = $(CC) -c $(DEFS) $(INCLUDES) $(CPPFLAGS) $(CFLAGS) $(XCFLAGS)
+
+HEADERS = $(COMHDRS) libgettext.h loadinfo.h
+COMHDRS = gettext.h gettextP.h hash-string.h
+SOURCES = $(COMSRCS) intl-compat.c cat-compat.c
+COMSRCS = bindtextdom.c dcgettext.c dgettext.c gettext.c \
+finddomain.c loadmsgcat.c localealias.c textdomain.c l10nflist.c \
+explodename.c
+OBJECTS = @INTLOBJS@ bindtextdom.$lo dcgettext.$lo dgettext.$lo gettext.$lo \
+finddomain.$lo loadmsgcat.$lo localealias.$lo textdomain.$lo l10nflist.$lo \
+explodename.$lo
+CATOBJS = cat-compat.$lo ../po/cat-id-tbl.$lo
+GETTOBJS = intl-compat.$lo
+DISTFILES.common = ChangeLog Makefile.in linux-msg.sed po2tbl.sed.in \
+xopen-msg.sed $(HEADERS) $(SOURCES)
+DISTFILES.normal = VERSION
+DISTFILES.gettext = libintl.glibc intlh.inst.in
+
+.SUFFIXES:
+.SUFFIXES: .c .o .lo
+.c.o:
+	$(COMPILE) $<
+.c.lo:
+	$(LIBTOOL) --mode=compile $(COMPILE) $<
+
+INCLUDES = -I.. -I. -I$(top_srcdir)/intl -I$(top_srcdir)/lib
+
+all: all-@USE_INCLUDED_LIBINTL@
+
+all-yes: libintl.$la intlh.inst
+all-no:
+
+libintl.a: $(OBJECTS)
+	rm -f $@
+	$(AR) cru $@ $(OBJECTS)
+	$(RANLIB) $@
+
+libintl.la: $(OBJECTS)
+	$(LIBTOOL) --mode=link $(CC) $(LDFLAGS) -o $@ $(OBJECTS) \
+		   -version-info 1:0 -rpath $(libdir)
+
+../po/cat-id-tbl.$lo: ../po/cat-id-tbl.c $(top_srcdir)/po/$(PACKAGE).pot
+	cd ../po && $(MAKE) cat-id-tbl.$lo
+
+check: all
+
+# This installation goal is only used in GNU gettext.  Packages which
+# only use the library should use install instead.
+
+# We must not install the libintl.h/libintl.a files if we are on a
+# system which has the gettext() function in its C library or in a
+# separate library or use the catgets interface.  A special case is
+# where configure found a previously installed GNU gettext library.
+# If you want to use the one which comes with this version of the
+# package, you have to use `configure --with-included-gettext'.
+install: install-exec install-data
+install-exec: all
+	if test "$(PACKAGE)" = "gettext" \
+	   && test '@INTLOBJS@' = '$(GETTOBJS)'; then \
+	  if test -r $(MKINSTALLDIRS); then \
+	    $(MKINSTALLDIRS) $(libdir) $(includedir); \
+	  else \
+	    $(top_srcdir)/mkinstalldirs $(libdir) $(includedir); \
+	  fi; \
+	  $(INSTALL_DATA) intlh.inst $(includedir)/libintl.h; \
+	  $(INSTALL_DATA) libintl.a $(libdir)/libintl.a; \
+	else \
+	  : ; \
+	fi
+install-data: all
+	if test "$(PACKAGE)" = "gettext"; then \
+	  if test -r $(MKINSTALLDIRS); then \
+	    $(MKINSTALLDIRS) $(gettextsrcdir); \
+	  else \
+	    $(top_srcdir)/mkinstalldirs $(gettextsrcdir); \
+	  fi; \
+	  $(INSTALL_DATA) VERSION $(gettextsrcdir)/VERSION; \
+	  dists="$(DISTFILES.common)"; \
+	  for file in $$dists; do \
+	    $(INSTALL_DATA) $(srcdir)/$$file $(gettextsrcdir)/$$file; \
+	  done; \
+	else \
+	  : ; \
+	fi
+
+# Define this as empty until I found a useful application.
+installcheck:
+
+uninstall:
+	dists="$(DISTFILES.common)"; \
+	for file in $$dists; do \
+	  rm -f $(gettextsrcdir)/$$file; \
+	done
+
+info dvi:
+
+$(OBJECTS): ../config.h libgettext.h
+bindtextdom.$lo finddomain.$lo loadmsgcat.$lo: gettextP.h gettext.h loadinfo.h
+dcgettext.$lo: gettextP.h gettext.h hash-string.h loadinfo.h
+
+tags: TAGS
+
+TAGS: $(HEADERS) $(SOURCES)
+	here=`pwd`; cd $(srcdir) && etags -o $$here/TAGS $(HEADERS) $(SOURCES)
+
+id: ID
+
+ID: $(HEADERS) $(SOURCES)
+	here=`pwd`; cd $(srcdir) && mkid -f$$here/ID $(HEADERS) $(SOURCES)
+
+
+mostlyclean:
+	rm -f *.a *.o *.lo core core.*
+
+clean: mostlyclean
+
+distclean: clean
+	rm -f Makefile ID TAGS po2msg.sed po2tbl.sed
+
+maintainer-clean: distclean
+	@echo "This command is intended for maintainers to use;"
+	@echo "it deletes files that may require special tools to rebuild."
+
+
+# GNU gettext needs not contain the file `VERSION' but contains some
+# other files which should not be distributed in other packages.
+distdir = ../$(PACKAGE)-$(VERSION)/$(subdir)
+dist distdir: Makefile $(DISTFILES)
+	if test "$(PACKAGE)" = gettext; then \
+	  additional="$(DISTFILES.gettext)"; \
+	else \
+	  additional="$(DISTFILES.normal)"; \
+	fi; \
+	for file in $(DISTFILES.common) $$additional; do \
+	  ln $(srcdir)/$$file $(distdir) 2> /dev/null \
+	    || cp -p $(srcdir)/$$file $(distdir); \
+	done
+
+dist-libc:
+	tar zcvf intl-glibc.tar.gz $(COMSRCS) $(COMHDRS) libintl.h.glibc
+
+Makefile: Makefile.in ../config.status
+	cd .. \
+	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
+
+# The dependency for intlh.inst is different in gettext and all other
+# packages.  Because we cannot you GNU make features we have to solve
+# the problem while rewriting Makefile.in.
+@GT_YES@intlh.inst: intlh.inst.in ../config.status
+@GT_YES@	cd .. \
+@GT_YES@	&& CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= \
+@GT_YES@	  $(SHELL) ./config.status
+@GT_NO@.PHONY: intlh.inst
+@GT_NO@intlh.inst:
+
+# Tell versions [3.59,3.63) of GNU make not to export all variables.
+# Otherwise a system limit (for SysV at least) may be exceeded.
+.NOEXPORT:
--- blackbox-0.51.3.orig/po/Makefile.in.in
+++ blackbox-0.51.3/po/Makefile.in.in
@@ -0,0 +1,251 @@
+# Makefile for program source directory in GNU NLS utilities package.
+# Copyright (C) 1995, 1996, 1997 by Ulrich Drepper <drepper@gnu.ai.mit.edu>
+#
+# This file file be copied and used freely without restrictions.  It can
+# be used in projects which are not available under the GNU Public License
+# but which still want to provide support for the GNU gettext functionality.
+# Please note that the actual code is *not* freely available.
+
+PACKAGE = @PACKAGE@
+VERSION = @VERSION@
+
+SHELL = /bin/sh
+@SET_MAKE@
+
+srcdir = @srcdir@
+top_srcdir = @top_srcdir@
+VPATH = @srcdir@
+
+prefix = @prefix@
+exec_prefix = @exec_prefix@
+datadir = $(prefix)/@DATADIRNAME@
+localedir = $(datadir)/locale
+gnulocaledir = $(prefix)/share/locale
+gettextsrcdir = $(prefix)/share/gettext/po
+subdir = po
+
+INSTALL = @INSTALL@
+INSTALL_DATA = @INSTALL_DATA@
+MKINSTALLDIRS = $(top_srcdir)/@MKINSTALLDIRS@
+
+CC = @CC@
+GENCAT = @GENCAT@
+GMSGFMT = PATH=../src:$$PATH @GMSGFMT@
+MSGFMT = @MSGFMT@
+XGETTEXT = PATH=../src:$$PATH @XGETTEXT@
+MSGMERGE = PATH=../src:$$PATH msgmerge
+
+DEFS = @DEFS@
+CFLAGS = @CFLAGS@
+CPPFLAGS = @CPPFLAGS@
+
+INCLUDES = -I.. 
+
+COMPILE = $(CC) -c $(DEFS) $(INCLUDES) $(CPPFLAGS) $(CFLAGS) $(XCFLAGS)
+
+SOURCES = cat-id-tbl.c
+POFILES = @POFILES@
+GMOFILES = @GMOFILES@
+DISTFILES = ChangeLog Makefile.in.in POTFILES.in $(PACKAGE).pot \
+stamp-cat-id $(POFILES) $(GMOFILES) $(SOURCES)
+
+POTFILES = \
+
+CATALOGS = @CATALOGS@
+CATOBJEXT = @CATOBJEXT@
+INSTOBJEXT = @INSTOBJEXT@
+
+.SUFFIXES:
+.SUFFIXES: .c .o .po .pox .gmo .mo .msg .cat
+
+.c.o:
+	$(COMPILE) $<
+
+.po.pox:
+	$(MAKE) $(PACKAGE).pot
+	$(MSGMERGE) $< $(srcdir)/$(PACKAGE).pot -o $*.pox
+
+.po.mo:
+	$(MSGFMT) -o $@ $<
+
+.po.gmo:
+	file=$(srcdir)/`echo $* | sed 's,.*/,,'`.gmo \
+	  && rm -f $$file && $(GMSGFMT) -o $$file $<
+
+.po.cat:
+	sed -f ../intl/po2msg.sed < $< > $*.msg \
+	  && rm -f $@ && $(GENCAT) $@ $*.msg
+
+
+all: all-@USE_NLS@
+
+all-yes: cat-id-tbl.c $(CATALOGS)
+all-no:
+
+$(srcdir)/$(PACKAGE).pot: $(POTFILES)
+	$(XGETTEXT) --default-domain=$(PACKAGE) --directory=$(top_srcdir) \
+	  --add-comments --keyword=_ --keyword=N_ \
+	  --files-from=$(srcdir)/POTFILES.in \
+	&& test ! -f $(PACKAGE).po \
+	   || ( rm -f $(srcdir)/$(PACKAGE).pot \
+		&& mv $(PACKAGE).po $(srcdir)/$(PACKAGE).pot ); \
+	[ -f $(PACKAGE).pot.additional -a -f $(srcdir)/$(PACKAGE).pot  ] \
+		&& cat  $(PACKAGE).pot.additional >> $(srcdir)/$(PACKAGE).pot
+		
+
+$(srcdir)/cat-id-tbl.c: stamp-cat-id; @:
+$(srcdir)/stamp-cat-id: $(PACKAGE).pot
+	rm -f cat-id-tbl.tmp
+	sed -f ../intl/po2tbl.sed $(srcdir)/$(PACKAGE).pot \
+		| sed -e "s/@PACKAGE NAME@/$(PACKAGE)/" > cat-id-tbl.tmp
+	if cmp -s cat-id-tbl.tmp $(srcdir)/cat-id-tbl.c; then \
+	  rm cat-id-tbl.tmp; \
+	else \
+	  echo cat-id-tbl.c changed; \
+	  rm -f $(srcdir)/cat-id-tbl.c; \
+	  mv cat-id-tbl.tmp $(srcdir)/cat-id-tbl.c; \
+	fi
+	cd $(srcdir) && rm -f stamp-cat-id && echo timestamp > stamp-cat-id
+
+
+install: install-exec install-data
+install-exec:
+install-data: install-data-@USE_NLS@
+install-data-no: all
+install-data-yes: all
+	if test -r "$(MKINSTALLDIRS)"; then \
+	  $(MKINSTALLDIRS) $(datadir); \
+	else \
+	  $(SHELL) $(top_srcdir)/mkinstalldirs $(datadir); \
+	fi
+	@catalogs='$(CATALOGS)'; \
+	for cat in $$catalogs; do \
+	  cat=`basename $$cat`; \
+	  case "$$cat" in \
+	    *.gmo) destdir=$(gnulocaledir);; \
+	    *)     destdir=$(localedir);; \
+	  esac; \
+	  lang=`echo $$cat | sed 's/\$(CATOBJEXT)$$//'`; \
+	  dir=$$destdir/$$lang/LC_MESSAGES; \
+	  if test -r "$(MKINSTALLDIRS)"; then \
+	    $(MKINSTALLDIRS) $$dir; \
+	  else \
+	    $(SHELL) $(top_srcdir)/mkinstalldirs $$dir; \
+	  fi; \
+	  if test -r $$cat; then \
+	    $(INSTALL_DATA) $$cat $$dir/$(PACKAGE)$(INSTOBJEXT); \
+	    echo "installing $$cat as $$dir/$(PACKAGE)$(INSTOBJEXT)"; \
+	  else \
+	    $(INSTALL_DATA) $(srcdir)/$$cat $$dir/$(PACKAGE)$(INSTOBJEXT); \
+	    echo "installing $(srcdir)/$$cat as" \
+		 "$$dir/$(PACKAGE)$(INSTOBJEXT)"; \
+	  fi; \
+	  if test -r $$cat.m; then \
+	    $(INSTALL_DATA) $$cat.m $$dir/$(PACKAGE)$(INSTOBJEXT).m; \
+	    echo "installing $$cat.m as $$dir/$(PACKAGE)$(INSTOBJEXT).m"; \
+	  else \
+	    if test -r $(srcdir)/$$cat.m ; then \
+	      $(INSTALL_DATA) $(srcdir)/$$cat.m \
+		$$dir/$(PACKAGE)$(INSTOBJEXT).m; \
+	      echo "installing $(srcdir)/$$cat as" \
+		   "$$dir/$(PACKAGE)$(INSTOBJEXT).m"; \
+	    else \
+	      true; \
+	    fi; \
+	  fi; \
+	done
+	if test "$(PACKAGE)" = "gettext"; then \
+	  if test -r "$(MKINSTALLDIRS)"; then \
+	    $(MKINSTALLDIRS) $(gettextsrcdir); \
+	  else \
+	    $(SHELL) $(top_srcdir)/mkinstalldirs $(gettextsrcdir); \
+	  fi; \
+	  $(INSTALL_DATA) $(srcdir)/Makefile.in.in \
+			  $(gettextsrcdir)/Makefile.in.in; \
+	else \
+	  : ; \
+	fi
+
+# Define this as empty until I found a useful application.
+installcheck:
+
+uninstall:
+	catalogs='$(CATALOGS)'; \
+	for cat in $$catalogs; do \
+	  cat=`basename $$cat`; \
+	  lang=`echo $$cat | sed 's/\$(CATOBJEXT)$$//'`; \
+	  rm -f $(localedir)/$$lang/LC_MESSAGES/$(PACKAGE)$(INSTOBJEXT); \
+	  rm -f $(localedir)/$$lang/LC_MESSAGES/$(PACKAGE)$(INSTOBJEXT).m; \
+	  rm -f $(gnulocaledir)/$$lang/LC_MESSAGES/$(PACKAGE)$(INSTOBJEXT); \
+	  rm -f $(gnulocaledir)/$$lang/LC_MESSAGES/$(PACKAGE)$(INSTOBJEXT).m; \
+	done
+	rm -f $(gettextsrcdir)/po-Makefile.in.in
+
+check: all
+
+cat-id-tbl.o: ../intl/libgettext.h
+
+dvi info tags TAGS ID:
+
+mostlyclean:
+	rm -f core core.* *.pox *.old.po cat-id-tbl.tmp
+	rm -fr *.o *.gmo
+
+clean: mostlyclean
+
+distclean: clean
+	rm -f Makefile Makefile.in POTFILES *.mo *.msg *.cat *.cat.m
+
+maintainer-clean: distclean
+	@echo "This command is intended for maintainers to use;"
+	@echo "it deletes files that may require special tools to rebuild."
+	rm -f $(GMOFILES)
+
+distdir = ../$(PACKAGE)-$(VERSION)/$(subdir)
+dist distdir: update-po $(DISTFILES)
+	dists="$(DISTFILES)"; \
+	for file in $$dists; do \
+	  ln $(srcdir)/$$file $(distdir) 2> /dev/null \
+	    || cp -p $(srcdir)/$$file $(distdir); \
+	done
+
+update-po: Makefile
+	$(MAKE) $(PACKAGE).pot
+	PATH=`pwd`/../src:$$PATH; \
+	cd $(srcdir); \
+	catalogs='$(CATALOGS)'; \
+	for cat in $$catalogs; do \
+	  cat=`basename $$cat`; \
+	  lang=`echo $$cat | sed 's/\$(CATOBJEXT)$$//'`; \
+	  mv $$lang.po $$lang.old.po; \
+	  echo "$$lang:"; \
+	  if $(MSGMERGE) $$lang.old.po $(PACKAGE).pot -o $$lang.po; then \
+	    rm -f $$lang.old.po; \
+	  else \
+	    echo "msgmerge for $$cat failed!"; \
+	    rm -f $$lang.po; \
+	    mv $$lang.old.po $$lang.po; \
+	  fi; \
+	done
+
+POTFILES: POTFILES.in
+	( if test 'x$(srcdir)' != 'x.'; then \
+	    posrcprefix='$(top_srcdir)/'; \
+	  else \
+	    posrcprefix="../"; \
+	  fi; \
+	  rm -f $@-t $@ \
+	    && (sed -e '/^#/d' -e '/^[ 	]*$$/d' \
+		    -e "s@.*@	$$posrcprefix& \\\\@" < $(srcdir)/$@.in \
+		| sed -e '$$s/\\$$//') > $@-t \
+	    && chmod a-w $@-t \
+	    && mv $@-t $@ )
+
+Makefile: Makefile.in.in ../config.status POTFILES
+	cd .. \
+	  && CONFIG_FILES=$(subdir)/$@.in CONFIG_HEADERS= \
+	       $(SHELL) ./config.status
+
+# Tell versions [3.59,3.63) of GNU make not to export all variables.
+# Otherwise a system limit (for SysV at least) may be exceeded.
+.NOEXPORT:
--- blackbox-0.51.3.orig/po/POTFILES.in
+++ blackbox-0.51.3/po/POTFILES.in
@@ -0,0 +1,15 @@
+src/Basemenu.cc
+src/Clientmenu.cc
+src/Icon.cc
+src/Image.cc
+src/LinkedList.cc
+src/Rootmenu.cc
+src/Screen.cc
+src/Toolbar.cc
+src/Window.cc
+src/Windowmenu.cc
+src/Workspace.cc
+src/Workspacemenu.cc
+src/blackbox.cc
+src/main.cc
+util/bsetroot.c
--- blackbox-0.51.3.orig/po/blackbox.pot
+++ blackbox-0.51.3/po/blackbox.pot
@@ -0,0 +1,339 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR Free Software Foundation, Inc.
+# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
+#
+#, fuzzy
+msgid ""
+msgstr ""
+"Project-Id-Version: PACKAGE VERSION\n"
+"POT-Creation-Date: 1999-10-15 09:37-0700\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=CHARSET\n"
+"Content-Transfer-Encoding: ENCODING\n"
+
+#: src/Basemenu.cc:241 src/Basemenu.cc:242 src/Basemenu.cc:331
+#: src/Basemenu.cc:332 src/Basemenu.cc:340 src/Basemenu.cc:342
+#: src/Basemenu.cc:346 src/Basemenu.cc:347 src/Basemenu.cc:355
+#: src/Basemenu.cc:357 src/Basemenu.cc:360 src/Basemenu.cc:361
+#: src/Basemenu.cc:780 src/Basemenu.cc:781 src/Basemenu.cc:788
+#: src/Basemenu.cc:790 src/Basemenu.cc:794 src/Basemenu.cc:795
+#: src/Basemenu.cc:803 src/Basemenu.cc:805 src/Basemenu.cc:808
+#: src/Basemenu.cc:809
+msgid "Blackbox Menu"
+msgstr ""
+
+#: src/Image.cc:130
+msgid "BImage::render_solid: error creating pixmap\n"
+msgstr ""
+
+#: src/Image.cc:253
+msgid "BImage::renderXImage: error creating XImage\n"
+msgstr ""
+
+#: src/Image.cc:263
+msgid "BImage::renderXImage: error allocating memory for image\n"
+msgstr ""
+
+#: src/Image.cc:274
+msgid "BImage::renderXImage: error getting color mask tables\n"
+msgstr ""
+
+#: src/Image.cc:283
+msgid "BImage::renderXImage: error getting pseudo color tables\n"
+msgstr ""
+
+#: src/Image.cc:312
+msgid "BImage::renderXImage: error getting dither information\n"
+msgstr ""
+
+#: src/Image.cc:381 src/Image.cc:445
+msgid "BImage::renderXImage: unsupported visual\n"
+msgstr ""
+
+#: src/Image.cc:467
+msgid "BImage::renderPixmap: error creating pixmap\n"
+msgstr ""
+
+#: src/Image.cc:1752
+#, c-format
+msgid ""
+"BImageControl::BImageControl: invalid colormap size %d (%d/%d/%d) - reducing"
+msgstr ""
+
+#: src/Image.cc:1762
+msgid "BImageControl::BImageControl: error allocating colormap\n"
+msgstr ""
+
+#: src/Image.cc:1790
+#, c-format
+msgid "couldn't alloc color %i %i %i\n"
+msgstr ""
+
+#: src/Image.cc:1841
+msgid "BImageControl::BImageControl: GrayScale/StaticGray visual unsupported\n"
+msgstr ""
+
+#: src/Image.cc:1846
+#, c-format
+msgid "BImageControl::BImageControl: unsupported visual %d\n"
+msgstr ""
+
+#: src/Image.cc:1890
+#, c-format
+msgid "BImageContol::~BImageControl: pixmap cache - releasing %d pixmaps\n"
+msgstr ""
+
+#: src/Image.cc:2001 src/Image.cc:2029
+#, c-format
+msgid "BImageControl::getColor: color parse error: \"%s\"\n"
+msgstr ""
+
+#: src/Image.cc:2007 src/Image.cc:2035
+#, c-format
+msgid "BImageControl::getColor: color alloc error: \"%s\"\n"
+msgstr ""
+
+#: src/Screen.cc:71
+#, c-format
+msgid ""
+"BScreen::BScreen: an error occured while querying the X server.\n"
+"  another window manager already running on display %s.\n"
+msgstr ""
+
+#: src/Screen.cc:284
+msgid "Icons"
+msgstr ""
+
+#: src/Screen.cc:767 src/Screen.cc:793
+#, c-format
+msgid "BScreen::LoadStyle(): couldn't load font '%s'\n"
+msgstr ""
+
+#: src/Screen.cc:770 src/Screen.cc:796
+msgid "BScreen::LoadStyle(): couldn't load default font.\n"
+msgstr ""
+
+#: src/Screen.cc:777
+msgid "BScreen::LoadStyle(): couldn't load default font\n"
+msgstr ""
+
+#: src/Screen.cc:803
+msgid "BScreen::LoadStyle: couldn't load default font.\n"
+msgstr ""
+
+#: src/Screen.cc:1168
+#, c-format
+msgid "%s: Empty menu file"
+msgstr ""
+
+#: src/Screen.cc:1178
+msgid "Restart"
+msgstr ""
+
+#: src/Screen.cc:1179
+msgid "Exit"
+msgstr ""
+
+#: src/Screen.cc:1261
+msgid ""
+" BScreen::parseMenuFile: [exec] error, no menu label and/or command defined\n"
+msgstr ""
+
+#: src/Screen.cc:1272
+msgid "BScreen::parseMenuFile: [exit] error, no menu label defined\n"
+msgstr ""
+
+#: src/Screen.cc:1284
+msgid ""
+"BScreen::parseMenuFile: [style] error, no menu label and/or filename "
+"defined\n"
+msgstr ""
+
+#: src/Screen.cc:1318
+msgid "BScreen::parseMenuFile: [include] error, no filename defined\n"
+msgstr ""
+
+#: src/Screen.cc:1364
+msgid "BScreen::parseMenuFile: [submenu] error, no menu label defined\n"
+msgstr ""
+
+#: src/Screen.cc:1387
+msgid "BScreen::parseMenuFile: [restart] error, no menu label defined\n"
+msgstr ""
+
+#: src/Screen.cc:1403
+msgid "BScreen::parseMenuFile: [reconfig] error, no menu label defined\n"
+msgstr ""
+
+#: src/Screen.cc:1520
+msgid "BScreen:parseMenuFile: [workspaces] error, no menu label defined\n"
+msgstr ""
+
+#: src/Windowmenu.cc:51
+msgid "Send To ..."
+msgstr ""
+
+#: src/Windowmenu.cc:53
+msgid "(Un)Shade"
+msgstr ""
+
+#: src/Windowmenu.cc:55
+msgid "Iconify"
+msgstr ""
+
+#: src/Windowmenu.cc:57
+msgid "(Un)Maximize"
+msgstr ""
+
+#: src/Windowmenu.cc:58
+msgid "Raise"
+msgstr ""
+
+#: src/Windowmenu.cc:59
+msgid "Lower"
+msgstr ""
+
+#: src/Windowmenu.cc:60
+msgid "(Un)Stick"
+msgstr ""
+
+#: src/Windowmenu.cc:61
+msgid "Kill Client"
+msgstr ""
+
+#: src/Windowmenu.cc:63 src/Windowmenu.cc:142
+msgid "Close"
+msgstr ""
+
+#: src/Workspace.cc:341
+#, c-format
+msgid "Workspace %d"
+msgstr ""
+
+#: src/Workspacemenu.cc:46
+msgid "Workspaces"
+msgstr ""
+
+#: src/Workspacemenu.cc:48
+msgid "New Workspace"
+msgstr ""
+
+#: src/Workspacemenu.cc:49
+msgid "Remove Last"
+msgstr ""
+
+#: src/blackbox.cc:182
+#, c-format
+msgid "%s:  signal %d caught\n"
+msgstr ""
+
+#: src/blackbox.cc:188
+msgid "shutting down\n"
+msgstr ""
+
+#: src/blackbox.cc:193 src/blackbox.cc:486
+msgid "aborting... dumping core\n"
+msgstr ""
+
+#: src/blackbox.cc:208
+#, c-format
+msgid "%s:  X error: %s(%d) opcodes %d/%d\n"
+msgstr ""
+
+#: src/blackbox.cc:367
+msgid "Blackbox::Blackbox: no managable screens found, aborting.\n"
+msgstr ""
+
+#: src/blackbox.cc:1890
+msgid "%I:%M %p"
+msgstr ""
+
+#: src/blackbox.cc:1892
+msgid "%%I:%%M %%p"
+msgstr ""
+
+#: src/main.cc:68
+msgid "Blackbox: X library does not support locale\n"
+msgstr ""
+
+#: src/main.cc:89
+msgid "error: '-display' requires an argument\n"
+msgstr ""
+
+#: src/main.cc:100
+msgid "warning: couldn't set environment variable 'DISPLAY'\n"
+msgstr ""
+
+#. print current version string
+#: src/main.cc:105
+#, c-format
+msgid ""
+"Blackbox %s : (c) 1997 - 1999 Brad Hughes\n"
+"\n"
+msgstr ""
+
+#. print program usage and command line options
+#: src/main.cc:111
+#, c-format
+msgid ""
+"Blackbox %s : (c) 1997 - 1999 Brad Hughes\n"
+"\n"
+"  -display <string>\tuse display connection.\n"
+"  -rc <string>\t\tuse alternate resource file.\n"
+"  -version\t\tdisplay version and exit.\n"
+"  -help\t\t\tdisplay this help text and exit.\n"
+"\n"
+msgstr ""
+#. KDE dose not support mulitbyte charactor.
+#. so blackbox uses gettext when display workspace name,
+#. not creates workspaces....
+#: data/rc:
+msgid "First Workspace"
+msgstr ""
+
+#: data/rc:
+msgid "Second Workspace"
+msgstr ""
+
+#: data/rc:
+msgid "Last Workspace"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 1"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 2"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 3"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 4"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 5"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 6"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 7"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 8"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 9"
+msgstr ""
--- blackbox-0.51.3.orig/po/blackbox.pot.additional
+++ blackbox-0.51.3/po/blackbox.pot.additional
@@ -0,0 +1,50 @@
+#. KDE dose not support mulitbyte charactor.
+#. so blackbox uses gettext when display workspace name,
+#. not creates workspaces....
+#: data/rc:
+msgid "First Workspace"
+msgstr ""
+
+#: data/rc:
+msgid "Second Workspace"
+msgstr ""
+
+#: data/rc:
+msgid "Last Workspace"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 1"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 2"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 3"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 4"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 5"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 6"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 7"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 8"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 9"
+msgstr ""
--- blackbox-0.51.3.orig/po/cat-id-tbl.c
+++ blackbox-0.51.3/po/cat-id-tbl.c
@@ -0,0 +1,339 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR Free Software Foundation, Inc.
+# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
+#
+#, fuzzy
+msgid ""
+msgstr ""
+"Project-Id-Version: PACKAGE VERSION\n"
+"POT-Creation-Date: 1999-10-15 09:37-0700\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=CHARSET\n"
+"Content-Transfer-Encoding: ENCODING\n"
+
+#: src/Basemenu.cc:241 src/Basemenu.cc:242 src/Basemenu.cc:331
+#: src/Basemenu.cc:332 src/Basemenu.cc:340 src/Basemenu.cc:342
+#: src/Basemenu.cc:346 src/Basemenu.cc:347 src/Basemenu.cc:355
+#: src/Basemenu.cc:357 src/Basemenu.cc:360 src/Basemenu.cc:361
+#: src/Basemenu.cc:780 src/Basemenu.cc:781 src/Basemenu.cc:788
+#: src/Basemenu.cc:790 src/Basemenu.cc:794 src/Basemenu.cc:795
+#: src/Basemenu.cc:803 src/Basemenu.cc:805 src/Basemenu.cc:808
+#: src/Basemenu.cc:809
+msgid "Blackbox Menu"
+msgstr ""
+
+#: src/Image.cc:130
+msgid "BImage::render_solid: error creating pixmap\n"
+msgstr ""
+
+#: src/Image.cc:253
+msgid "BImage::renderXImage: error creating XImage\n"
+msgstr ""
+
+#: src/Image.cc:263
+msgid "BImage::renderXImage: error allocating memory for image\n"
+msgstr ""
+
+#: src/Image.cc:274
+msgid "BImage::renderXImage: error getting color mask tables\n"
+msgstr ""
+
+#: src/Image.cc:283
+msgid "BImage::renderXImage: error getting pseudo color tables\n"
+msgstr ""
+
+#: src/Image.cc:312
+msgid "BImage::renderXImage: error getting dither information\n"
+msgstr ""
+
+#: src/Image.cc:381 src/Image.cc:445
+msgid "BImage::renderXImage: unsupported visual\n"
+msgstr ""
+
+#: src/Image.cc:467
+msgid "BImage::renderPixmap: error creating pixmap\n"
+msgstr ""
+
+#: src/Image.cc:1752
+#, c-format
+msgid ""
+"BImageControl::BImageControl: invalid colormap size %d (%d/%d/%d) - reducing"
+msgstr ""
+
+#: src/Image.cc:1762
+msgid "BImageControl::BImageControl: error allocating colormap\n"
+msgstr ""
+
+#: src/Image.cc:1790
+#, c-format
+msgid "couldn't alloc color %i %i %i\n"
+msgstr ""
+
+#: src/Image.cc:1841
+msgid "BImageControl::BImageControl: GrayScale/StaticGray visual unsupported\n"
+msgstr ""
+
+#: src/Image.cc:1846
+#, c-format
+msgid "BImageControl::BImageControl: unsupported visual %d\n"
+msgstr ""
+
+#: src/Image.cc:1890
+#, c-format
+msgid "BImageContol::~BImageControl: pixmap cache - releasing %d pixmaps\n"
+msgstr ""
+
+#: src/Image.cc:2001 src/Image.cc:2029
+#, c-format
+msgid "BImageControl::getColor: color parse error: \"%s\"\n"
+msgstr ""
+
+#: src/Image.cc:2007 src/Image.cc:2035
+#, c-format
+msgid "BImageControl::getColor: color alloc error: \"%s\"\n"
+msgstr ""
+
+#: src/Screen.cc:71
+#, c-format
+msgid ""
+"BScreen::BScreen: an error occured while querying the X server.\n"
+"  another window manager already running on display %s.\n"
+msgstr ""
+
+#: src/Screen.cc:284
+msgid "Icons"
+msgstr ""
+
+#: src/Screen.cc:767 src/Screen.cc:793
+#, c-format
+msgid "BScreen::LoadStyle(): couldn't load font '%s'\n"
+msgstr ""
+
+#: src/Screen.cc:770 src/Screen.cc:796
+msgid "BScreen::LoadStyle(): couldn't load default font.\n"
+msgstr ""
+
+#: src/Screen.cc:777
+msgid "BScreen::LoadStyle(): couldn't load default font\n"
+msgstr ""
+
+#: src/Screen.cc:803
+msgid "BScreen::LoadStyle: couldn't load default font.\n"
+msgstr ""
+
+#: src/Screen.cc:1168
+#, c-format
+msgid "%s: Empty menu file"
+msgstr ""
+
+#: src/Screen.cc:1178
+msgid "Restart"
+msgstr ""
+
+#: src/Screen.cc:1179
+msgid "Exit"
+msgstr ""
+
+#: src/Screen.cc:1261
+msgid ""
+" BScreen::parseMenuFile: [exec] error, no menu label and/or command defined\n"
+msgstr ""
+
+#: src/Screen.cc:1272
+msgid "BScreen::parseMenuFile: [exit] error, no menu label defined\n"
+msgstr ""
+
+#: src/Screen.cc:1284
+msgid ""
+"BScreen::parseMenuFile: [style] error, no menu label and/or filename "
+"defined\n"
+msgstr ""
+
+#: src/Screen.cc:1318
+msgid "BScreen::parseMenuFile: [include] error, no filename defined\n"
+msgstr ""
+
+#: src/Screen.cc:1364
+msgid "BScreen::parseMenuFile: [submenu] error, no menu label defined\n"
+msgstr ""
+
+#: src/Screen.cc:1387
+msgid "BScreen::parseMenuFile: [restart] error, no menu label defined\n"
+msgstr ""
+
+#: src/Screen.cc:1403
+msgid "BScreen::parseMenuFile: [reconfig] error, no menu label defined\n"
+msgstr ""
+
+#: src/Screen.cc:1520
+msgid "BScreen:parseMenuFile: [workspaces] error, no menu label defined\n"
+msgstr ""
+
+#: src/Windowmenu.cc:51
+msgid "Send To ..."
+msgstr ""
+
+#: src/Windowmenu.cc:53
+msgid "(Un)Shade"
+msgstr ""
+
+#: src/Windowmenu.cc:55
+msgid "Iconify"
+msgstr ""
+
+#: src/Windowmenu.cc:57
+msgid "(Un)Maximize"
+msgstr ""
+
+#: src/Windowmenu.cc:58
+msgid "Raise"
+msgstr ""
+
+#: src/Windowmenu.cc:59
+msgid "Lower"
+msgstr ""
+
+#: src/Windowmenu.cc:60
+msgid "(Un)Stick"
+msgstr ""
+
+#: src/Windowmenu.cc:61
+msgid "Kill Client"
+msgstr ""
+
+#: src/Windowmenu.cc:63 src/Windowmenu.cc:142
+msgid "Close"
+msgstr ""
+
+#: src/Workspace.cc:341
+#, c-format
+msgid "Workspace %d"
+msgstr ""
+
+#: src/Workspacemenu.cc:46
+msgid "Workspaces"
+msgstr ""
+
+#: src/Workspacemenu.cc:48
+msgid "New Workspace"
+msgstr ""
+
+#: src/Workspacemenu.cc:49
+msgid "Remove Last"
+msgstr ""
+
+#: src/blackbox.cc:182
+#, c-format
+msgid "%s:  signal %d caught\n"
+msgstr ""
+
+#: src/blackbox.cc:188
+msgid "shutting down\n"
+msgstr ""
+
+#: src/blackbox.cc:193 src/blackbox.cc:486
+msgid "aborting... dumping core\n"
+msgstr ""
+
+#: src/blackbox.cc:208
+#, c-format
+msgid "%s:  X error: %s(%d) opcodes %d/%d\n"
+msgstr ""
+
+#: src/blackbox.cc:367
+msgid "Blackbox::Blackbox: no managable screens found, aborting.\n"
+msgstr ""
+
+#: src/blackbox.cc:1890
+msgid "%I:%M %p"
+msgstr ""
+
+#: src/blackbox.cc:1892
+msgid "%%I:%%M %%p"
+msgstr ""
+
+#: src/main.cc:68
+msgid "Blackbox: X library does not support locale\n"
+msgstr ""
+
+#: src/main.cc:89
+msgid "error: '-display' requires an argument\n"
+msgstr ""
+
+#: src/main.cc:100
+msgid "warning: couldn't set environment variable 'DISPLAY'\n"
+msgstr ""
+
+#. print current version string
+#: src/main.cc:105
+#, c-format
+msgid ""
+"Blackbox %s : (c) 1997 - 1999 Brad Hughes\n"
+"\n"
+msgstr ""
+
+#. print program usage and command line options
+#: src/main.cc:111
+#, c-format
+msgid ""
+"Blackbox %s : (c) 1997 - 1999 Brad Hughes\n"
+"\n"
+"  -display <string>\tuse display connection.\n"
+"  -rc <string>\t\tuse alternate resource file.\n"
+"  -version\t\tdisplay version and exit.\n"
+"  -help\t\t\tdisplay this help text and exit.\n"
+"\n"
+msgstr ""
+#. KDE dose not support mulitbyte charactor.
+#. so blackbox uses gettext when display workspace name,
+#. not creates workspaces....
+#: data/rc:
+msgid "First Workspace"
+msgstr ""
+
+#: data/rc:
+msgid "Second Workspace"
+msgstr ""
+
+#: data/rc:
+msgid "Last Workspace"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 1"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 2"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 3"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 4"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 5"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 6"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 7"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 8"
+msgstr ""
+
+#: data/rc:
+msgid "Workspace 9"
+msgstr ""
--- blackbox-0.51.3.orig/po/ja.po
+++ blackbox-0.51.3/po/ja.po
@@ -0,0 +1,388 @@
+# Blackbox I18N Support
+#
+# Pathetic initial GNU gettext implementation by 
+# Brent Fulgham <bfulgham@debian.org>	09/11/1999
+# Please, please, please -- somebody talented in languages update this
+# stuff.  If anyone who really speaks French sees my translation they
+# will hunt me down and slap me silly :P
+
+# Based on the Debian-JP work in providing Kanji support by
+# Yasayuki Furukawa and Noriaki Matoi
+#
+# Copyright (C) YEAR Free Software Foundation, Inc.
+#
+
+msgid ""
+msgstr ""
+"Project-Id-Version: PACKAGE VERSION\n"
+"POT-Creation-Date: 1999-09-08 13:25-0700\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=CHARSET\n"
+"Content-Transfer-Encoding: ENCODING\n"
+
+#: src/Basemenu.cc:241 src/Basemenu.cc:242 src/Basemenu.cc:331
+#: src/Basemenu.cc:332 src/Basemenu.cc:340 src/Basemenu.cc:342
+#: src/Basemenu.cc:346 src/Basemenu.cc:347 src/Basemenu.cc:355
+#: src/Basemenu.cc:357 src/Basemenu.cc:360 src/Basemenu.cc:361
+#: src/Basemenu.cc:780 src/Basemenu.cc:781 src/Basemenu.cc:788
+#: src/Basemenu.cc:790 src/Basemenu.cc:794 src/Basemenu.cc:795
+#: src/Basemenu.cc:803 src/Basemenu.cc:805 src/Basemenu.cc:808
+#: src/Basemenu.cc:809
+msgid "Blackbox Menu"
+msgstr "Blackboxメニュー"
+
+#: src/Image.cc:130
+msgid "BImage::render_solid: error creating pixmap\n"
+msgstr "BImage::render_solid: Pixmap作成のエラーです\n"
+
+#: src/Image.cc:253
+msgid "BImage::renderXImage: error creating XImage\n"
+msgstr "BImage::renderXImage: XImage作成のエラーです\n"
+
+#: src/Image.cc:263
+msgid "BImage::renderXImage: error allocating memory for image\n"
+msgstr "BImage::renderXImage: 画像メモリ確保のエラーです\n"
+
+#: src/Image.cc:274
+msgid "BImage::renderXImage: error getting color mask tables\n"
+msgstr "BImage::renderXImage: カラーマスクテーブルの取得エラーです\n"
+
+#: src/Image.cc:283
+msgid "BImage::renderXImage: error getting pseudo color tables\n"
+msgstr "BImage::renderXImage: Pseudoカラーテーブルの取得エラーです\n"
+
+#: src/Image.cc:312
+msgid "BImage::renderXImage: error getting dither information\n"
+msgstr "BImage::renderXImage: ディザ情報の取得エラーです\n"
+
+#: src/Image.cc:381 src/Image.cc:445
+msgid "BImage::renderXImage: unsupported visual\n"
+msgstr "BImage::renderXImage: 未サポートのビジュアルです\n"
+
+#: src/Image.cc:467
+msgid "BImage::renderPixmap: error creating pixmap\n"
+msgstr "BImage::renderPixmap: Pixmap作成エラー\n"
+
+#: src/Image.cc:1752
+#, c-format
+msgid ""
+"BImageControl::BImageControl: invalid colormap size %d (%d/%d/%d) - reducing"
+msgstr ""
+"BImageControl::BImageControl: おかしなカラーマップサイズ %d (%d/%d/%d) です "
+"- 減色します"
+
+#: src/Image.cc:1762
+msgid "BImageControl::BImageControl: error allocating colormap\n"
+msgstr "BImageControl::BImageControl: カラーマップの確保に失敗しました\n"
+
+#: src/Image.cc:1790
+#, c-format
+msgid "couldn't alloc color %i %i %i\n"
+msgstr "カラー%i %i %iを確保できません\n"
+
+#: src/Image.cc:1841
+msgid "BImageControl::BImageControl: GrayScale/StaticGray visual unsupported\n"
+msgstr ""
+"BImageControl::BImageControl: "
+"GrayScale/StaticGray形式のビジュアルはサポートしてません\n"
+
+#, c-format
+msgid "BImageControl::BImageControl: unsupported visual %d\n"
+msgstr "BImageControl::BImageControl: 未サポートのビジュアル%d です\n"
+
+#: src/Image.cc:1890
+#, c-format
+msgid "BImageContol::~BImageControl: pixmap cache - releasing %d pixmaps\n"
+msgstr "BImageControl::~BImageControl: ?s?b?N?X?}?b?v?L???b?V?$B!D(J - %d OEA'I?s?b?N?X?}?b?v'd$B\"s(Jd*u'$B&L(J'U'$B!&(J\n"
+
+#: src/Image.cc:2001 src/Image.cc:2029
+#, c-format
+msgid "BImageControl::getColor: color parse error: \"%s\"\n"
+msgstr "BImageControl::getColor: カラー構文エラー: \"%s\"\n"
+
+#: src/Image.cc:2007 src/Image.cc:2035
+#, c-format
+msgid "BImageControl::getColor: color alloc error: \"%s\"\n"
+msgstr "BImageControl::getColor: カラー確保のエラー: \"%s\"\n"
+
+#: src/Screen.cc:71
+#, c-format
+msgid ""
+"BScreen::BScreen: an error occured while querying the X server.\n"
+"  another window manager already running on display %s.\n"
+msgstr ""
+"BScreen::BScreen: Xサーバの確認中にエラーが発生しました.\n"
+"  他のウィンドウマネージャが既にディスプレイ%sで立ち上がっているようです.\n"
+
+#: src/Screen.cc:284
+msgid "Icons"
+msgstr "アイコン"
+
+#: src/Screen.cc:767 src/Screen.cc:793
+#, c-format
+msgid "BScreen::LoadStyle(): couldn't load font '%s'\n"
+msgstr "BScreen::LoadStyle(): ?t?H?$B!H(J?g'd$B!H(JC'Y??'s'U'1'n. '%s\n"
+
+#: src/Screen.cc:770 src/Screen.cc:796
+msgid "BScreen::LoadStyle(): couldn't load default font.\n"
+msgstr "BScreen::LoadStyle(): ?f?t?H???g'I?t?H?$B!H(J?g'd$B!H(JC'Y??'s'U'1'n.\n"
+
+#: src/Screen.cc:777
+msgid "BScreen::LoadStyle(): couldn't load default font\n"
+msgstr "BScreen::LoadStyle(): ?f?t?H???g'I?t?H?$B!H(J?g'd$B!H(JC'Y??'s'U'1'n.\n"
+
+#: src/Screen.cc:803
+msgid "BScreen::LoadStyle: couldn't load default font.\n"
+msgstr "BScreen::LoadStyle(): ?f?t?H???g'I?t?H?$B!H(J?g'd$B!H(JC'Y??'s'U'1'n.\n"
+
+#: src/Screen.cc:1168
+#, c-format
+msgid "%s: Empty menu file"
+msgstr "%s: メニューファイルの内容が空です"
+
+#: src/Screen.cc:1178
+msgid "Restart"
+msgstr "再起動"
+
+#: src/Screen.cc:1179
+msgid "Exit"
+msgstr "終了"
+
+#: src/Screen.cc:1261
+msgid ""
+" BScreen::parseMenuFile: [exec] error, no menu label and/or command defined\n"
+msgstr "BScreen::parseMenuFile: [exec]エラー: ラベル文字列、または(あるいはかつ)コマンド定義がありません\n"
+
+#: src/Screen.cc:1272
+msgid "BScreen::parseMenuFile: [exit] error, no menu label defined\n"
+msgstr "BScreen::parseMenuFile: [exec]エラー: メニューのラベル定義がありません\n"
+
+#: src/Screen.cc:1284
+msgid ""
+"BScreen::parseMenuFile: [style] error, no menu label and/or filename "
+"defined\n"
+msgstr ""
+"BScreen::parseMenuFile: [style]エラー: メニューのラベルまたは(あるいはかつ)ファイル定義がありません\n"
+
+#: src/Screen.cc:1318
+msgid "BScreen::parseMenuFile: [include] error, no filename defined\n"
+msgstr ""
+"BScreen::parseMenuFile: [include]エラー: ファイル名の定義がありません\n"
+
+#: src/Screen.cc:1364
+msgid "BScreen::parseMenuFile: [submenu] error, no menu label defined\n"
+msgstr "BScreen::parseMenuFile: [submenu]エラー: メニューのラベル定義がありません\n"
+
+#: src/Screen.cc:1387
+msgid "BScreen::parseMenuFile: [restart] error, no menu label defined\n"
+msgstr "BScreen::parseMenuFile: [restart]エラー: メニューのラベル定義がありません\n"
+
+#: src/Screen.cc:1403
+msgid "BScreen::parseMenuFile: [reconfig] error, no menu label defined\n"
+msgstr "BScreen::parseMenuFile: [reconfig]エラー: メニューのラベル定義がありません\n"
+
+#: src/Screen.cc:1520
+msgid "BScreen:parseMenuFile: [workspaces] error, no menu label defined\n"
+msgstr "BScreen:parseMenuFile: [workspaces]エラー: メニューのラベル定義がありません\n"
+
+#: src/Windowmenu.cc:51
+msgid "Send To ..."
+msgstr "ワークスペース移動..."
+
+#: src/Windowmenu.cc:53
+msgid "(Un)Shade"
+msgstr "シェード/解除"
+
+#: src/Windowmenu.cc:55
+msgid "Iconify"
+msgstr "最小化"
+
+#: src/Windowmenu.cc:57
+msgid "(Un)Maximize"
+msgstr "最大化/解除"
+
+#: src/Windowmenu.cc:58
+msgid "Raise"
+msgstr "前へ"
+
+#: src/Windowmenu.cc:59
+msgid "Lower"
+msgstr "後ろへ"
+
+#: src/Windowmenu.cc:60
+msgid "(Un)Stick"
+msgstr "どこでも表示/解除"
+
+#: src/Windowmenu.cc:61
+msgid "Kill Client"
+msgstr "強制終了"
+
+#: src/Windowmenu.cc:63 src/Windowmenu.cc:142
+msgid "Close"
+msgstr "閉じる"
+
+#: src/Workspace.cc:343
+#, c-format
+msgid "Workspace %d"
+msgstr "???[?N?X?y?[?X %d"
+
+#: src/Workspacemenu.cc:46
+msgid "Workspaces"
+msgstr "ワークスペース"
+
+#: src/Workspacemenu.cc:48
+msgid "New Workspace"
+msgstr "新規ワークスペース"
+
+#: src/Workspacemenu.cc:49
+msgid "Remove Last"
+msgstr "最後のワークスペースを削除"
+
+#: src/blackbox.cc:182
+#, c-format
+msgid "%s:  signal %d caught\n"
+msgstr "%s: シグナル%dを受けました\n"
+
+#: src/blackbox.cc:188
+msgid "shutting down\n"
+msgstr "Blackboxを終了させます\n"
+
+#: src/blackbox.cc:193 src/blackbox.cc:486
+msgid "aborting... dumping core\n"
+msgstr "アボート... coreファイルを吐き出します\n"
+
+#: src/blackbox.cc:208
+#, c-format
+msgid "%s:  X error: %s(%d) opcodes %d/%d\n"
+msgstr"%s:  X error: %s(%d) 失敗したリクエストのメジャー/マイナーのオペコード:  %d / %d\n"
+
+#: src/blackbox.cc:367
+msgid "Blackbox::Blackbox: no managable screens found, aborting.\n"
+msgstr ""
+"Blackbox::Blackbox: 利用可能なスクリーンが見つかりません, アボートします.\n"
+
+#: src/blackbox.cc:1888
+msgid "%I:%M %p"
+msgstr "%p %I:%M"
+
+#: src/blackbox.cc:1890
+msgid "%%I:%%M %%p"
+msgstr "%%p %%I:%%M"
+
+#: src/main.cc:68
+msgid "Blackbox: X library does not support locale\n"
+msgstr "Blackbox: Xライブラリが国際化機能をサポートしていません\n"
+
+#: src/main.cc:89
+msgid "error: '-display' requires an argument\n"
+msgstr "エラー: '-display'には引数が必要です\n"
+
+#: src/main.cc:100
+msgid "warning: couldn't set environment variable 'DISPLAY'\n"
+msgstr "警告: 環境変数'DISPLAY'が定義されていません\n"
+
+#. print current version string
+#: src/main.cc:105
+#, c-format
+msgid ""
+"Blackbox %s : (c) 1997 - 1999 Brad Hughes\n"
+"\n"
+msgstr ""
+
+#. print program usage and command line options
+#: src/main.cc:111
+#, c-format
+msgid ""
+"Blackbox %s : (c) 1997 - 1999 Brad Hughes\n"
+"\n"
+"  -display <string>\tuse display connection.\n"
+"  -rc <string>\t\tuse alternate resource file.\n"
+"  -version\t\tdisplay version and exit.\n"
+"  -help\t\t\tdisplay this help text and exit.\n"
+"\n"
+msgstr ""
+"Blackbox %s : (c) 1997, 1999 Brad Hughes\n"
+"\n"
+"  -display <*$B\"y(J??-n>\t?w$B!G(Je'I?f?B?X?v?OE?C'AE?U$B!F!^(J'$B!&(J'e.\n"
+"  -rc <*$B\"y(J??-n>\t\t?w$B!G(Je'I?Y$B!G(Je?t?@?C??'d?g-p'$B!&(J'e.\n"
+"  -version\t\t?o?[?W?$B\"x(J?$B!H(J?i*n'I?o-I'$B!&(J'e.\n"
+"  -help\t\t\t'$B!^(J'I?w???v?i*n'd?o-I'$B!&(J'e.\n"
+"\n"
+
+# data/rc:
+#. KDE dose not support mulitbyte charactor.
+#. so blackbox uses gettext when display workspace name,
+#. not creates workspaces....
+msgid "First Workspace"
+msgstr "最初のワークスペース"
+
+# data/rc:
+msgid "Second Workspace"
+msgstr "セカンドワークスペース"
+
+# data/rc:
+msgid "Last Workspace"
+msgstr "最後のワークスペース"
+
+# data/rc:
+msgid "Workspace 1"
+msgstr "ワークスペース1"
+
+# data/rc:
+msgid "Workspace 2"
+msgstr "ワークスペース2"
+
+# data/rc:
+msgid "Workspace 3"
+msgstr "ワークスペース3"
+
+# data/rc:
+msgid "Workspace 4"
+msgstr "ワークスペース4"
+
+# data/rc:
+msgid "Workspace 5"
+msgstr "ワークスペース5"
+
+# data/rc:
+msgid "Workspace 6"
+msgstr "ワークスペース6"
+
+# data/rc:
+msgid "Workspace 7"
+msgstr "ワークスペース7"
+
+# data/rc:
+msgid "Workspace 8"
+msgstr "ワークスペース8"
+
+# data/rc:
+msgid "Workspace 9"
+msgstr "ワークスペース9"
+
+#~ msgid ""
+#~ "blackbox: couldn't load font '%s'\n"
+#~ "          reverting to default font.\n"
+#~ msgstr ""
+#~ "blackbox: フォント'%s'をロードできません\n"
+#~ "          標準フォントに切り替えます.\n"
+
+#~ msgid ""
+#~ "blackbox: couldn't load default font.  please check to\n"
+#~ "make sure the necessary font is installed '%s'\n"
+#~ msgstr ""
+#~ "blackbox: 標準フォントを読み込めませんでした. 必要なフォント\n"
+#~ "'%s'がインストールされているか確認してください.\n"
+
+#~ msgid "xterm"
+#~ msgstr "kterm"
+
+#~ msgid "BScreen::parseMenuFile: [exec] error: no command string (%s)\n"
+#~ msgstr ""
+#~ "BScreen::parseMenuFile: [exec]エラー: コマンド文字列がありません (%s)\n"
+
+#~ msgid "exiting\n"
+#~ msgstr "終了\n"
--- blackbox-0.51.3.orig/po/stamp-cat-id
+++ blackbox-0.51.3/po/stamp-cat-id
@@ -0,0 +1 @@
+timestamp
